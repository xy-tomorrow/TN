!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1);var i=n(298),a=n(299),r=n(309),o=n(348),s=window.pageData;(0,i.createStore)(a.reducers,{status:s.status,adType:s.adType,startDate:s.startDate,isLogin:s.isLogin,detail:s,productId:s.productId,brandId:s.brandId,productType:s.productType,productName:s.productName,destGroupId:s.destGroupId,destGroupName:s.destGroupName,proMode:s.proMode,tagType:s.tagType,bookCityCode:s.bookCityCode,departCityCode:s.departCityCode,backCityCode:s.backCityCode,coupon:s.coupon,isSupportMultipleJourney:s.isSupportMultipleJourney,journeyDays:s.journeyDays,multiTab:s.multiTab,journey:s.journey,journeyId:s.journeyId,calendar:null,departDate:"",retailCity:s.signInfo&&s.signInfo.company,adult:2,child:0,freeChild:0,departCity:{code:s.departCityCode,name:s.departCityName},backCity:{code:s.backCityCode,name:s.backCityName},hotDepartCities:s.recCityInfo,allDepartCities:s.departCityInfo,allBackCities:s.backCityInfo,connection:s.connection});r.headModule.init(),o.detailModule.init()},function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(2),n(293),n(295),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(3),n(52),n(53),n(54),n(55),n(57),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(131),n(132),n(136),n(137),n(138),n(139),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(159),n(160),n(166),n(167),n(169),n(170),n(171),n(175),n(176),n(177),n(178),n(179),n(181),n(182),n(183),n(184),n(187),n(189),n(190),n(191),n(193),n(195),n(197),n(198),n(199),n(201),n(202),n(203),n(204),n(211),n(214),n(215),n(217),n(218),n(221),n(222),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(249),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(263),n(264),n(265),n(266),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(291),n(292),t.exports=n(9)},function(t,e,n){"use strict";var i=n(4),a=n(5),r=n(6),o=n(8),s=n(18),c=n(22).KEY,l=n(7),u=n(23),d=n(24),f=n(19),p=n(25),h=n(26),v=n(27),m=n(29),y=n(42),g=n(45),b=n(12),_=n(32),x=n(16),w=n(17),j=n(46),k=n(49),I=n(51),T=n(11),C=n(30),D=I.f,S=T.f,M=k.f,O=i.Symbol,E=i.JSON,P=E&&E.stringify,A="prototype",$=p("_hidden"),N=p("toPrimitive"),L={}.propertyIsEnumerable,J=u("symbol-registry"),R=u("symbols"),F=u("op-symbols"),V=Object[A],G="function"==typeof O,H=i.QObject,B=!H||!H[A]||!H[A].findChild,U=r&&l(function(){return 7!=j(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=D(V,e);i&&delete V[e],S(t,e,n),i&&t!==V&&S(V,e,i)}:S,z=function(t){var e=R[t]=j(O[A]);return e._k=t,e},W=G&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},Y=function(t,e,n){return t===V&&Y(F,e,n),b(t),e=x(e,!0),b(n),a(R,e)?(n.enumerable?(a(t,$)&&t[$][e]&&(t[$][e]=!1),n=j(n,{enumerable:w(0,!1)})):(a(t,$)||S(t,$,w(1,{})),t[$][e]=!0),U(t,e,n)):S(t,e,n)},K=function(t,e){b(t);for(var n,i=y(e=_(e)),a=0,r=i.length;r>a;)Y(t,n=i[a++],e[n]);return t},q=function(t,e){return void 0===e?j(t):K(j(t),e)},X=function(t){var e=L.call(this,t=x(t,!0));return!(this===V&&a(R,t)&&!a(F,t))&&(!(e||!a(this,t)||!a(R,t)||a(this,$)&&this[$][t])||e)},Z=function(t,e){if(t=_(t),e=x(e,!0),t!==V||!a(R,e)||a(F,e)){var n=D(t,e);return!n||!a(R,e)||a(t,$)&&t[$][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=M(_(t)),i=[],r=0;n.length>r;)a(R,e=n[r++])||e==$||e==c||i.push(e);return i},tt=function(t){for(var e,n=t===V,i=M(n?F:_(t)),r=[],o=0;i.length>o;)!a(R,e=i[o++])||n&&!a(V,e)||r.push(R[e]);return r};G||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(F,n),a(this,$)&&a(this[$],t)&&(this[$][t]=!1),U(this,t,w(1,n))};return r&&B&&U(V,t,{configurable:!0,set:e}),z(t)},s(O[A],"toString",function(){return this._k}),I.f=Z,T.f=Y,n(50).f=k.f=Q,n(44).f=X,n(43).f=tt,r&&!n(28)&&s(V,"propertyIsEnumerable",X,!0),h.f=function(t){return z(p(t))}),o(o.G+o.W+o.F*!G,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var et=C(p.store),nt=0;et.length>nt;)v(et[nt++]);o(o.S+o.F*!G,"Symbol",{"for":function(t){return a(J,t+="")?J[t]:J[t]=O(t)},keyFor:function(t){if(W(t))return m(J,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!G,"Object",{create:q,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),E&&o(o.S+o.F*(!G||l(function(){var t=O();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,n,i=[t],a=1;arguments.length>a;)i.push(arguments[a++]);return e=i[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),i[1]=e,P.apply(E,i)}}}),O[A][N]||n(10)(O[A],N,O[A].valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var i=n(4),a=n(9),r=n(10),o=n(18),s=n(20),c="prototype",l=function(t,e,n){var u,d,f,p,h=t&l.F,v=t&l.G,m=t&l.S,y=t&l.P,g=t&l.B,b=v?i:m?i[e]||(i[e]={}):(i[e]||{})[c],_=v?a:a[e]||(a[e]={}),x=_[c]||(_[c]={});v&&(n=e);for(u in n)d=!h&&b&&void 0!==b[u],f=(d?b:n)[u],p=g&&d?s(f,i):y&&"function"==typeof f?s(Function.call,f):f,b&&o(b,u,f,t&l.U),_[u]!=f&&r(_,u,p),y&&x[u]!=f&&(x[u]=f)};i.core=a,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(11),a=n(17);t.exports=n(6)?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(12),a=n(14),r=n(16),o=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),a)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(13);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(6)&&!n(7)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(13),a=n(4).document,r=i(a)&&i(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},function(t,e,n){var i=n(13);t.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(4),a=n(10),r=n(5),o=n(19)("src"),s="toString",c=Function[s],l=(""+c).split(s);n(9).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(r(n,"name")||a(n,"name",e)),t[e]!==n&&(c&&(r(n,o)||a(n,o,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||c.call(this)})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(21);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,a){return t.call(e,n,i,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(19)("meta"),a=n(13),r=n(5),o=n(11).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(7)(function(){return c(Object.preventExtensions({}))}),u=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},d=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},f=function(t,e){if(!r(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return l&&h.NEED&&c(t)&&!r(t,i)&&u(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(t,e,n){var i=n(4),a="__core-js_shared__",r=i[a]||(i[a]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,n){var i=n(11).f,a=n(5),r=n(25)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){var i=n(23)("wks"),a=n(19),r=n(4).Symbol,o="function"==typeof r,s=t.exports=function(t){return i[t]||(i[t]=o&&r[t]||(o?r:a)("Symbol."+t))};s.store=i},function(t,e,n){e.f=n(25)},function(t,e,n){var i=n(4),a=n(9),r=n(28),o=n(26),s=n(11).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var i=n(30),a=n(32);t.exports=function(t,e){for(var n,r=a(t),o=i(r),s=o.length,c=0;s>c;)if(r[n=o[c++]]===e)return n}},function(t,e,n){var i=n(31),a=n(41);t.exports=Object.keys||function(t){return i(t,a)}},function(t,e,n){var i=n(5),a=n(32),r=n(36)(!1),o=n(40)("IE_PROTO");t.exports=function(t,e){var n,s=a(t),c=0,l=[];for(n in s)n!=o&&i(s,n)&&l.push(n);for(;e.length>c;)i(s,n=e[c++])&&(~r(l,n)||l.push(n));return l}},function(t,e,n){var i=n(33),a=n(35);t.exports=function(t){return i(a(t))}},function(t,e,n){var i=n(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(32),a=n(37),r=n(39);t.exports=function(t){return function(e,n,o){var s,c=i(e),l=a(c.length),u=r(o,l);if(t&&n!=n){for(;l>u;)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(38),a=Math.min;t.exports=function(t){return t>0?a(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(38),a=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?a(t+e,0):r(t,e)}},function(t,e,n){var i=n(23)("keys"),a=n(19);t.exports=function(t){return i[t]||(i[t]=a(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(30),a=n(43),r=n(44);t.exports=function(t){var e=i(t),n=a.f;if(n)for(var o,s=n(t),c=r.f,l=0;s.length>l;)c.call(t,o=s[l++])&&e.push(o);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(34);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(12),a=n(47),r=n(41),o=n(40)("IE_PROTO"),s=function(){},c="prototype",l=function(){var t,e=n(15)("iframe"),i=r.length,a="<",o=">";for(e.style.display="none",n(48).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+o+"document.F=Object"+a+"/script"+o),t.close(),l=t.F;i--;)delete l[c][r[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[c]=i(t),n=new s,s[c]=null,n[o]=t):n=l(),void 0===e?n:a(n,e)}},function(t,e,n){var i=n(11),a=n(12),r=n(30);t.exports=n(6)?Object.defineProperties:function(t,e){a(t);for(var n,o=r(e),s=o.length,c=0;s>c;)i.f(t,n=o[c++],e[n]);return t}},function(t,e,n){t.exports=n(4).document&&document.documentElement},function(t,e,n){var i=n(32),a=n(50).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==r.call(t)?s(t):a(i(t))}},function(t,e,n){var i=n(31),a=n(41).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,a)}},function(t,e,n){var i=n(44),a=n(17),r=n(32),o=n(16),s=n(5),c=n(14),l=Object.getOwnPropertyDescriptor;e.f=n(6)?l:function(t,e){if(t=r(t),e=o(e,!0),c)try{return l(t,e)}catch(n){}if(s(t,e))return a(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(8);i(i.S,"Object",{create:n(46)})},function(t,e,n){var i=n(8);i(i.S+i.F*!n(6),"Object",{defineProperty:n(11).f})},function(t,e,n){var i=n(8);i(i.S+i.F*!n(6),"Object",{defineProperties:n(47)})},function(t,e,n){var i=n(32),a=n(51).f;n(56)("getOwnPropertyDescriptor",function(){return function(t,e){return a(i(t),e)}})},function(t,e,n){var i=n(8),a=n(9),r=n(7);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",o)}},function(t,e,n){var i=n(58),a=n(59);n(56)("getPrototypeOf",function(){return function(t){return a(i(t))}})},function(t,e,n){var i=n(35);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(5),a=n(58),r=n(40)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(58),a=n(30);n(56)("keys",function(){return function(t){return a(i(t))}})},function(t,e,n){n(56)("getOwnPropertyNames",function(){return n(49).f})},function(t,e,n){var i=n(13),a=n(22).onFreeze;n(56)("freeze",function(t){return function(e){return t&&i(e)?t(a(e)):e}})},function(t,e,n){var i=n(13),a=n(22).onFreeze;n(56)("seal",function(t){return function(e){return t&&i(e)?t(a(e)):e}})},function(t,e,n){var i=n(13),a=n(22).onFreeze;n(56)("preventExtensions",function(t){return function(e){return t&&i(e)?t(a(e)):e}})},function(t,e,n){var i=n(13);n(56)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(13);n(56)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(13);n(56)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(8);i(i.S+i.F,"Object",{assign:n(69)})},function(t,e,n){"use strict";var i=n(30),a=n(43),r=n(44),o=n(58),s=n(33),c=Object.assign;t.exports=!c||n(7)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){for(var n=o(t),c=arguments.length,l=1,u=a.f,d=r.f;c>l;)for(var f,p=s(arguments[l++]),h=u?i(p).concat(u(p)):i(p),v=h.length,m=0;v>m;)d.call(p,f=h[m++])&&(n[f]=p[f]);return n}:c},function(t,e,n){var i=n(8);i(i.S,"Object",{is:n(71)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var i=n(8);i(i.S,"Object",{setPrototypeOf:n(73).set})},function(t,e,n){var i=n(13),a=n(12),r=function(t,e){if(a(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(20)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){"use strict";var i=n(75),a={};a[n(25)("toStringTag")]="z",a+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(34),a=n(25)("toStringTag"),r="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),a))?n:r?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(8);i(i.P,"Function",{bind:n(77)})},function(t,e,n){"use strict";var i=n(21),a=n(13),r=n(78),o=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var i=[],a=0;a<e;a++)i[a]="a["+a+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),s=function(){var i=n.concat(o.call(arguments));return this instanceof s?c(e,i.length,i):r(e,i,t)};return a(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(11).f,a=n(17),r=n(5),o=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",l=Object.isExtensible||function(){return!0};c in o||n(6)&&i(o,c,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(s)[1];return r(t,c)||!l(t)||i(t,c,a(5,e)),e}catch(n){return""}}})},function(t,e,n){"use strict";var i=n(13),a=n(59),r=n(25)("hasInstance"),o=Function.prototype;r in o||n(11).f(o,r,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=a(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(8),a=n(82);i(i.G+i.F*(parseInt!=a),{parseInt:a})},function(t,e,n){var i=n(4).parseInt,a=n(83).trim,r=n(84),o=/^[\-+]?0[xX]/;t.exports=8!==i(r+"08")||22!==i(r+"0x16")?function(t,e){var n=a(String(t),3);return i(n,e>>>0||(o.test(n)?16:10))}:i},function(t,e,n){var i=n(8),a=n(35),r=n(7),o=n(84),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(t,e,n){var a={},s=r(function(){return!!o[t]()||c[t]()!=c}),l=a[t]=s?e(f):o[t];n&&(a[n]=l),i(i.P+i.F*s,"String",a)},f=d.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},function(t,e){t.exports="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(8),a=n(86);i(i.G+i.F*(parseFloat!=a),{parseFloat:a})},function(t,e,n){var i=n(4).parseFloat,a=n(83).trim;t.exports=1/i(n(84)+"-0")!==-(1/0)?function(t){var e=a(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){"use strict";var i=n(4),a=n(5),r=n(34),o=n(88),s=n(16),c=n(7),l=n(50).f,u=n(51).f,d=n(11).f,f=n(83).trim,p="Number",h=i[p],v=h,m=h.prototype,y=r(n(46)(m))==p,g="trim"in String.prototype,b=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():f(e,3);var n,i,a,r=e.charCodeAt(0);if(43===r||45===r){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+e}for(var o,c=e.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>a)return NaN;return parseInt(c,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(y?c(function(){m.valueOf.call(n)}):r(n)!=p)?o(new v(b(e)),n,h):b(e)};for(var _,x=n(6)?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)a(v,_=x[w])&&!a(h,_)&&d(h,_,u(v,_));h.prototype=m,m.constructor=h,n(18)(i,p,h)}},function(t,e,n){var i=n(13),a=n(73).set;t.exports=function(t,e,n){var r,o=e.constructor;return o!==n&&"function"==typeof o&&(r=o.prototype)!==n.prototype&&i(r)&&a&&a(t,r),t}},function(t,e,n){"use strict";var i=n(8),a=n(38),r=n(90),o=n(91),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d="0",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*l[n],l[n]=i%1e7,i=c(i/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=c(n/t),n=n%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+o.call(d,7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2===1?v(t,e-1,n*t):v(t*t,e/2,n)},m=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,i,s,c=r(this,u),l=a(t),y="",g=d;if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(e=m(c*v(2,69,1))-69,n=e<0?c*v(2,-e,1):c/v(2,e,1),n*=4503599627370496,e=52-e,e>0){for(f(0,n),i=l;i>=7;)f(1e7,0),i-=7;for(f(v(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),f(1,1),p(2),g=h()}else f(0,n),f(1<<-e,0),g=h()+o.call(d,l);return l>0?(s=g.length,g=y+(s<=l?"0."+o.call(d,l-s)+g:g.slice(0,s-l)+"."+g.slice(s-l))):g=y+g,g}})},function(t,e,n){var i=n(34);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(38),a=n(35);t.exports=function(t){var e=String(a(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e,n){"use strict";var i=n(8),a=n(7),r=n(90),o=1..toPrecision;i(i.P+i.F*(a(function(){return"1"!==o.call(1,void 0)})||!a(function(){o.call({})})),"Number",{toPrecision:function(t){var e=r(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,n){var i=n(8);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(8),a=n(4).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&a(t)}})},function(t,e,n){var i=n(8);i(i.S,"Number",{isInteger:n(96)})},function(t,e,n){var i=n(13),a=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&a(t)===t}},function(t,e,n){var i=n(8);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(8),a=n(96),r=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return a(t)&&r(t)<=9007199254740991}})},function(t,e,n){var i=n(8);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(8);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(8),a=n(86);i(i.S+i.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(t,e,n){var i=n(8),a=n(82);i(i.S+i.F*(Number.parseInt!=a),"Number",{parseInt:a})},function(t,e,n){var i=n(8),a=n(104),r=Math.sqrt,o=Math.acosh;i(i.S+i.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:a(t-1+r(t-1)*r(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var a=n(8),r=Math.asinh;a(a.S+a.F*!(r&&1/r(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(8),a=Math.atanh;i(i.S+i.F*!(a&&1/a(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(8),a=n(108);i(i.S,"Math",{cbrt:function(t){return a(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(8);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(8),a=Math.exp;i(i.S,"Math",{cosh:function(t){return(a(t=+t)+a(-t))/2}})},function(t,e,n){var i=n(8),a=n(112);i(i.S+i.F*(a!=Math.expm1),"Math",{expm1:a})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(8),a=n(108),r=Math.pow,o=r(2,-52),s=r(2,-23),c=r(2,127)*(2-s),l=r(2,-126),u=function(t){return t+1/o-1/o};i(i.S,"Math",{fround:function(t){var e,n,i=Math.abs(t),r=a(t);return i<l?r*u(i/l/s)*l*s:(e=(1+s/o)*i,n=e-(e-i),n>c||n!=n?r*(1/0):r*n)}})},function(t,e,n){var i=n(8),a=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,r=0,o=0,s=arguments.length,c=0;o<s;)n=a(arguments[o++]),c<n?(i=c/n,r=r*i*i+1,c=n):n>0?(i=n/c,r+=i*i):r+=n;return c===1/0?1/0:c*Math.sqrt(r)}})},function(t,e,n){var i=n(8),a=Math.imul;i(i.S+i.F*n(7)(function(){return a(4294967295,5)!=-5||2!=a.length}),"Math",{imul:function(t,e){var n=65535,i=+t,a=+e,r=n&i,o=n&a;return 0|r*o+((n&i>>>16)*o+r*(n&a>>>16)<<16>>>0)}})},function(t,e,n){var i=n(8);i(i.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var i=n(8);i(i.S,"Math",{log1p:n(104)})},function(t,e,n){var i=n(8);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(8);i(i.S,"Math",{sign:n(108)})},function(t,e,n){var i=n(8),a=n(112),r=Math.exp;i(i.S+i.F*n(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(a(t)-a(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(8),a=n(112),r=Math.exp;i(i.S,"Math",{tanh:function(t){var e=a(t=+t),n=a(-t);return e==1/0?1:n==1/0?-1:(e-n)/(r(t)+r(-t))}})},function(t,e,n){var i=n(8);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(8),a=n(39),r=String.fromCharCode,o=String.fromCodePoint;i(i.S+i.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,o=0;i>o;){if(e=+arguments[o++],a(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?r(e):r(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(8),a=n(32),r=n(37);i(i.S,"String",{raw:function(t){for(var e=a(t.raw),n=r(e.length),i=arguments.length,o=[],s=0;n>s;)o.push(String(e[s++])),s<i&&o.push(String(arguments[s]));return o.join("")}})},function(t,e,n){"use strict";n(83)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(127)(!0);n(128)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(38),a=n(35);t.exports=function(t){return function(e,n){var r,o,s=String(a(e)),c=i(n),l=s.length;return c<0||c>=l?t?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):r:t?s.slice(c,c+2):(r-55296<<10)+(o-56320)+65536)}}},function(t,e,n){"use strict";var i=n(28),a=n(8),r=n(18),o=n(10),s=n(5),c=n(129),l=n(130),u=n(24),d=n(59),f=n(25)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",m="values",y=function(){return this};t.exports=function(t,e,n,g,b,_,x){l(n,e,g);var w,j,k,I=function(t){if(!p&&t in S)return S[t];switch(t){case v:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",C=b==m,D=!1,S=t.prototype,M=S[f]||S[h]||b&&S[b],O=M||I(b),E=b?C?I("entries"):O:void 0,P="Array"==e?S.entries||M:M;if(P&&(k=d(P.call(new t)),k!==Object.prototype&&(u(k,T,!0),i||s(k,f)||o(k,f,y))),C&&M&&M.name!==m&&(D=!0,O=function(){return M.call(this)}),i&&!x||!p&&!D&&S[f]||o(S,f,O),c[e]=O,c[T]=y,b)if(w={values:C?O:I(m),keys:_?O:I(v),entries:E},x)for(j in w)j in S||r(S,j,w[j]);else a(a.P+a.F*(p||D),e,w);return w}},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(46),a=n(17),r=n(24),o={};n(10)(o,n(25)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:a(1,n)}),r(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(8),a=n(127)(!1);i(i.P,"String",{codePointAt:function(t){return a(this,t)}})},function(t,e,n){"use strict";var i=n(8),a=n(37),r=n(133),o="endsWith",s=""[o];i(i.P+i.F*n(135)(o),"String",{endsWith:function(t){var e=r(this,t,o),n=arguments.length>1?arguments[1]:void 0,i=a(e.length),c=void 0===n?i:Math.min(a(n),i),l=String(t);return s?s.call(e,l,c):e.slice(c-l.length,c)===l}})},function(t,e,n){var i=n(134),a=n(35);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(t))}},function(t,e,n){var i=n(13),a=n(34),r=n(25)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},function(t,e,n){var i=n(25)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(a){}}return!0}},function(t,e,n){"use strict";var i=n(8),a=n(133),r="includes";i(i.P+i.F*n(135)(r),"String",{includes:function(t){return!!~a(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(8);i(i.P,"String",{repeat:n(91)})},function(t,e,n){"use strict";var i=n(8),a=n(37),r=n(133),o="startsWith",s=""[o];i(i.P+i.F*n(135)(o),"String",{startsWith:function(t){var e=r(this,t,o),n=a(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(140)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var i=n(8),a=n(7),r=n(35),o=/"/g,s=function(t,e,n,i){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+a+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(140)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(140)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(140)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(140)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(140)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(140)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(140)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(140)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(140)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(140)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(140)("sub",function(t){return function(){return t(this,"sub","","");}})},function(t,e,n){"use strict";n(140)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(8);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(8),a=n(58),r=n(16);i(i.P+i.F*n(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=a(this),n=r(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";var i=n(8),a=n(7),r=Date.prototype.getTime,o=function(t){return t>9?t:"0"+t};i(i.P+i.F*(a(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!a(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}})},function(t,e,n){var i=Date.prototype,a="Invalid Date",r="toString",o=i[r],s=i.getTime;new Date(NaN)+""!=a&&n(18)(i,r,function(){var t=s.call(this);return t===t?o.call(this):a})},function(t,e,n){var i=n(25)("toPrimitive"),a=Date.prototype;i in a||n(10)(a,i,n(158))},function(t,e,n){"use strict";var i=n(12),a=n(16),r="number";t.exports=function(t){if("string"!==t&&t!==r&&"default"!==t)throw TypeError("Incorrect hint");return a(i(this),t!=r)}},function(t,e,n){var i=n(8);i(i.S,"Array",{isArray:n(45)})},function(t,e,n){"use strict";var i=n(20),a=n(8),r=n(58),o=n(161),s=n(162),c=n(37),l=n(163),u=n(164);a(a.S+a.F*!n(165)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,d,f=r(t),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,y=0,g=u(f);if(m&&(v=i(v,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(e=c(f.length),n=new p(e);e>y;y++)l(n,y,m?v(f[y],y):f[y]);else for(d=g.call(f),n=new p;!(a=d.next()).done;y++)l(n,y,m?o(d,v,[a.value,y],!0):a.value);return n.length=y,n}})},function(t,e,n){var i=n(12);t.exports=function(t,e,n,a){try{return a?e(i(n)[0],n[1]):e(n)}catch(r){var o=t["return"];throw void 0!==o&&i(o.call(t)),r}}},function(t,e,n){var i=n(129),a=n(25)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[a]===t)}},function(t,e,n){"use strict";var i=n(11),a=n(17);t.exports=function(t,e,n){e in t?i.f(t,e,a(0,n)):t[e]=n}},function(t,e,n){var i=n(75),a=n(25)("iterator"),r=n(129);t.exports=n(9).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||r[i(t)]}},function(t,e,n){var i=n(25)("iterator"),a=!1;try{var r=[7][i]();r["return"]=function(){a=!0},Array.from(r,function(){throw 2})}catch(o){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r=[7],o=r[i]();o.next=function(){return{done:n=!0}},r[i]=function(){return o},t(r)}catch(s){}return n}},function(t,e,n){"use strict";var i=n(8),a=n(163);i(i.S+i.F*n(7)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)a(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(8),a=n(32),r=[].join;i(i.P+i.F*(n(33)!=Object||!n(168)(r)),"Array",{join:function(t){return r.call(a(this),void 0===t?",":t)}})},function(t,e,n){var i=n(7);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var i=n(8),a=n(48),r=n(34),o=n(39),s=n(37),c=[].slice;i(i.P+i.F*n(7)(function(){a&&c.call(a)}),"Array",{slice:function(t,e){var n=s(this.length),i=r(this);if(e=void 0===e?n:e,"Array"==i)return c.call(this,t,e);for(var a=o(t,n),l=o(e,n),u=s(l-a),d=Array(u),f=0;f<u;f++)d[f]="String"==i?this.charAt(a+f):this[a+f];return d}})},function(t,e,n){"use strict";var i=n(8),a=n(21),r=n(58),o=n(7),s=[].sort,c=[1,2,3];i(i.P+i.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!n(168)(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),a(t))}})},function(t,e,n){"use strict";var i=n(8),a=n(172)(0),r=n(168)([].forEach,!0);i(i.P+i.F*!r,"Array",{forEach:function(t){return a(this,t,arguments[1])}})},function(t,e,n){var i=n(20),a=n(33),r=n(58),o=n(37),s=n(173);t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,p=e||s;return function(e,s,h){for(var v,m,y=r(e),g=a(y),b=i(s,h,3),_=o(g.length),x=0,w=n?p(e,_):c?p(e,0):void 0;_>x;x++)if((f||x in g)&&(v=g[x],m=b(v,x,y),t))if(n)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(u)return!1;return d?-1:l||u?u:w}}},function(t,e,n){var i=n(174);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(13),a=n(45),r=n(25)("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(8),a=n(172)(1);i(i.P+i.F*!n(168)([].map,!0),"Array",{map:function(t){return a(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(8),a=n(172)(2);i(i.P+i.F*!n(168)([].filter,!0),"Array",{filter:function(t){return a(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(8),a=n(172)(3);i(i.P+i.F*!n(168)([].some,!0),"Array",{some:function(t){return a(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(8),a=n(172)(4);i(i.P+i.F*!n(168)([].every,!0),"Array",{every:function(t){return a(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(8),a=n(180);i(i.P+i.F*!n(168)([].reduce,!0),"Array",{reduce:function(t){return a(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var i=n(21),a=n(58),r=n(33),o=n(37);t.exports=function(t,e,n,s,c){i(e);var l=a(t),u=r(l),d=o(l.length),f=c?d-1:0,p=c?-1:1;if(n<2)for(;;){if(f in u){s=u[f],f+=p;break}if(f+=p,c?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:d>f;f+=p)f in u&&(s=e(s,u[f],f,l));return s}},function(t,e,n){"use strict";var i=n(8),a=n(180);i(i.P+i.F*!n(168)([].reduceRight,!0),"Array",{reduceRight:function(t){return a(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(8),a=n(36)(!1),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(o||!n(168)(r)),"Array",{indexOf:function(t){return o?r.apply(this,arguments)||0:a(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(8),a=n(32),r=n(38),o=n(37),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!n(168)(s)),"Array",{lastIndexOf:function(t){if(c)return s.apply(this,arguments)||0;var e=a(this),n=o(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,r(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(8);i(i.P,"Array",{copyWithin:n(185)}),n(186)("copyWithin")},function(t,e,n){"use strict";var i=n(58),a=n(39),r=n(37);t.exports=[].copyWithin||function(t,e){var n=i(this),o=r(n.length),s=a(t,o),c=a(e,o),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?o:a(l,o))-c,o-s),d=1;for(c<s&&s<c+u&&(d=-1,c+=u-1,s+=u-1);u-->0;)c in n?n[s]=n[c]:delete n[s],s+=d,c+=d;return n}},function(t,e,n){var i=n(25)("unscopables"),a=Array.prototype;void 0==a[i]&&n(10)(a,i,{}),t.exports=function(t){a[i][t]=!0}},function(t,e,n){var i=n(8);i(i.P,"Array",{fill:n(188)}),n(186)("fill")},function(t,e,n){"use strict";var i=n(58),a=n(39),r=n(37);t.exports=function(t){for(var e=i(this),n=r(e.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:a(c,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var i=n(8),a=n(172)(5),r="find",o=!0;r in[]&&Array(1)[r](function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(186)(r)},function(t,e,n){"use strict";var i=n(8),a=n(172)(6),r="findIndex",o=!0;r in[]&&Array(1)[r](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(186)(r)},function(t,e,n){n(192)("Array")},function(t,e,n){"use strict";var i=n(4),a=n(11),r=n(6),o=n(25)("species");t.exports=function(t){var e=i[t];r&&e&&!e[o]&&a.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(186),a=n(194),r=n(129),o=n(32);t.exports=n(128)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(4),a=n(88),r=n(11).f,o=n(50).f,s=n(134),c=n(196),l=i.RegExp,u=l,d=l.prototype,f=/a/g,p=/a/g,h=new l(f)!==f;if(n(6)&&(!h||n(7)(function(){return p[n(25)("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")}))){l=function(t,e){var n=this instanceof l,i=s(t),r=void 0===e;return!n&&i&&t.constructor===l&&r?t:a(h?new u(i&&!r?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&r?c.call(t):e),n?this:d,l)};for(var v=(function(t){t in l||r(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})}),m=o(u),y=0;m.length>y;)v(m[y++]);d.constructor=l,l.prototype=d,n(18)(i,"RegExp",l)}n(192)("RegExp")},function(t,e,n){"use strict";var i=n(12);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(198);var i=n(12),a=n(196),r=n(6),o="toString",s=/./[o],c=function(t){n(18)(RegExp.prototype,o,t,!0)};n(7)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?a.call(t):void 0)}):s.name!=o&&c(function(){return s.call(this)})},function(t,e,n){n(6)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(196)})},function(t,e,n){n(200)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){"use strict";var i=n(10),a=n(18),r=n(7),o=n(35),s=n(25);t.exports=function(t,e,n){var c=s(t),l=n(o,c,""[t]),u=l[0],d=l[1];r(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,u),i(RegExp.prototype,c,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},function(t,e,n){n(200)("replace",2,function(t,e,n){return[function(i,a){"use strict";var r=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,r,a):n.call(String(r),i,a)},n]})},function(t,e,n){n(200)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(200)("split",2,function(t,e,i){"use strict";var a=n(134),r=i,o=[].push,s="split",c="length",l="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var u=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!a(t))return r.call(n,t,e);var i,s,d,f,p,h=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,y=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,v+"g");for(u||(i=new RegExp("^"+g.source+"$(?!\\s)",v));(s=g.exec(n))&&(d=s.index+s[0][c],!(d>m&&(h.push(n.slice(m,s.index)),!u&&s[c]>1&&s[0].replace(i,function(){for(p=1;p<arguments[c]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[c]>1&&s.index<n[c]&&o.apply(h,s.slice(1)),f=s[0][c],m=d,h[c]>=y)));)g[l]===s.index&&g[l]++;return m===n[c]?!f&&g.test("")||h.push(""):h.push(n.slice(m)),h[c]>y?h.slice(0,y):h}}else"0"[s](void 0,0)[c]&&(i=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(n,a){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r,a):i.call(String(r),n,a)},i]})},function(t,e,n){"use strict";var i,a,r,o=n(28),s=n(4),c=n(20),l=n(75),u=n(8),d=n(13),f=n(21),p=n(205),h=n(206),v=n(207),m=n(208).set,y=n(209)(),g="Promise",b=s.TypeError,_=s.process,x=s[g],_=s.process,w="process"==l(_),j=function(){},k=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(25)("species")]=function(t){t(j,j)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(j)instanceof e}catch(i){}}(),I=function(t,e){return t===e||t===x&&e===r},T=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},C=function(t){return I(x,t)?new D(t):new a(t)},D=a=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=i}),this.resolve=f(e),this.reject=f(n)},S=function(t){try{t()}catch(e){return{error:e}}},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var i=t._v,a=1==t._s,r=0,o=function(e){var n,r,o=a?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{o?(a||(2==t._h&&P(t),t._h=1),o===!0?n=i:(l&&l.enter(),n=o(i),l&&l.exit()),n===e.promise?c(b("Promise-chain cycle")):(r=T(n))?r.call(n,s,c):s(n)):c(i)}catch(u){c(u)}};n.length>r;)o(n[r++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){m.call(s,function(){var e,n,i,a=t._v;if(E(t)&&(e=S(function(){w?_.emit("unhandledRejection",a,t):(n=s.onunhandledrejection)?n({promise:t,reason:a}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",a)}),t._h=w||E(t)?2:1),t._a=void 0,e)throw e.error})},E=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!E(e.promise))return!1;return!0},P=function(t){m.call(s,function(){var e;w?_.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},A=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},$=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=T(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,c($,i,1),c(A,i,1))}catch(a){A.call(i,a)}}):(n._v=t,n._s=1,M(n,!1))}catch(i){A.call({_w:n,_d:!1},i)}}};k||(x=function(t){p(this,x,g,"_h"),f(t),i.call(this);try{t(c($,this,1),c(A,this,1))}catch(e){A.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(210)(x.prototype,{then:function(t,e){var n=C(v(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),D=function(){var t=new i;this.promise=t,this.resolve=c($,t,1),this.reject=c(A,t,1)}),u(u.G+u.W+u.F*!k,{Promise:x}),n(24)(x,g),n(192)(g),r=n(9)[g],u(u.S+u.F*!k,g,{reject:function(t){var e=C(this),n=e.reject;return n(t),e.promise}}),u(u.S+u.F*(o||!k),g,{resolve:function(t){if(t instanceof x&&I(t.constructor,this))return t;var e=C(this),n=e.resolve;return n(t),e.promise}}),u(u.S+u.F*!(k&&n(165)(function(t){x.all(t)["catch"](j)})),g,{all:function(t){var e=this,n=C(e),i=n.resolve,a=n.reject,r=S(function(){var n=[],r=0,o=1;h(t,!1,function(t){var s=r++,c=!1;n.push(void 0),o++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--o||i(n))},a)}),--o||i(n)});return r&&a(r.error),n.promise},race:function(t){var e=this,n=C(e),i=n.reject,a=S(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return a&&i(a.error),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(20),a=n(161),r=n(162),o=n(12),s=n(37),c=n(164),l={},u={},e=t.exports=function(t,e,n,d,f){var p,h,v,m,y=f?function(){return t}:c(t),g=i(n,d,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(r(y)){for(p=s(t.length);p>b;b++)if(m=e?g(o(h=t[b])[0],h[1]):g(t[b]),m===l||m===u)return m}else for(v=y.call(t);!(h=v.next()).done;)if(m=a(v,g,h.value,e),m===l||m===u)return m};e.BREAK=l,e.RETURN=u},function(t,e,n){var i=n(12),a=n(21),r=n(25)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[r])?e:a(n)}},function(t,e,n){var i,a,r,o=n(20),s=n(78),c=n(48),l=n(15),u=n(4),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,v=0,m={},y="onreadystatechange",g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){g.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},i(v),v},p=function(t){delete m[t]},"process"==n(34)(d)?i=function(t){d.nextTick(o(g,t,1))}:h?(a=new h,r=a.port2,a.port1.onmessage=b,i=o(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",b,!1)):i=y in l("script")?function(t){c.appendChild(l("script"))[y]=function(){c.removeChild(this),g.call(t)}}:function(t){setTimeout(o(g,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){var i=n(4),a=n(208).set,r=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,c="process"==n(34)(o);t.exports=function(){var t,e,n,l=function(){var i,a;for(c&&(i=o.domain)&&i.exit();t;){a=t.fn,t=t.next;try{a()}catch(r){throw t?n():e=void 0,r}}e=void 0,i&&i.enter()};if(c)n=function(){o.nextTick(l)};else if(r){var u=!0,d=document.createTextNode("");new r(l).observe(d,{characterData:!0}),n=function(){d.data=u=!u}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(l)}}else n=function(){a.call(i,l)};return function(i){var a={fn:i,next:void 0};e&&(e.next=a),t||(t=a,n()),e=a}}},function(t,e,n){var i=n(18);t.exports=function(t,e,n){for(var a in e)i(t,a,e[a],n);return t}},function(t,e,n){"use strict";var i=n(212);t.exports=n(213)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(11).f,a=n(46),r=n(210),o=n(20),s=n(205),c=n(35),l=n(206),u=n(128),d=n(194),f=n(192),p=n(6),h=n(22).fastKey,v=p?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var d=t(function(t,i){s(t,d,e,"_i"),t._i=a(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&l(i,n,t[u],t)});return r(d.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},"delete":function(t){var e=this,n=m(e,t);if(n){var i=n.n,a=n.p;delete e._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),e._f==n&&(e._f=i),e._l==n&&(e._l=a),e[v]--}return!!n},forEach:function(t){s(this,d,"forEach");for(var e,n=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),p&&i(d.prototype,"size",{get:function(){return c(this[v])}}),d},def:function(t,e,n){var i,a,r=m(t,e);return r?r.v=n:(t._l=r={i:a=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[v]++,"F"!==a&&(t._i[a]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?d(0,n.k):"values"==e?d(0,n.v):d(0,[n.k,n.v]):(t._t=void 0,d(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(4),a=n(8),r=n(18),o=n(210),s=n(22),c=n(206),l=n(205),u=n(13),d=n(7),f=n(165),p=n(24),h=n(88);t.exports=function(t,e,n,v,m,y){var g=i[t],b=g,_=m?"set":"add",x=b&&b.prototype,w={},j=function(t){var e=x[t];r(x,t,"delete"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(y||x.forEach&&!d(function(){(new b).entries().next()}))){var k=new b,I=k[_](y?{}:-0,1)!=k,T=d(function(){k.has(1)}),C=f(function(t){new b(t)}),D=!y&&d(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});C||(b=e(function(e,n){l(e,b,t);var i=h(new g,e,b);return void 0!=n&&c(n,m,i[_],i),i}),b.prototype=x,x.constructor=b),(T||D)&&(j("delete"),j("has"),m&&j("get")),(D||I)&&j(_),y&&x.clear&&delete x.clear}else b=v.getConstructor(e,t,m,_),o(b.prototype,n),s.NEED=!0;return p(b,t),w[t]=b,a(a.G+a.W+a.F*(b!=g),w),y||v.setStrong(b,t,m),b}},function(t,e,n){"use strict";var i=n(212);t.exports=n(213)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,a=n(172)(0),r=n(18),o=n(22),s=n(69),c=n(216),l=n(13),u=o.getWeak,d=Object.isExtensible,f=c.ufstore,p={},h=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(l(t)){var e=u(t);return e===!0?f(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(this,t,e)}},m=t.exports=n(213)("WeakMap",h,v,c,!0,!0);7!=(new m).set((Object.freeze||Object)(p),7).get(p)&&(i=c.getConstructor(h),s(i.prototype,v),o.NEED=!0,a(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];r(e,t,function(e,a){if(l(e)&&!d(e)){this._f||(this._f=new i);var r=this._f[t](e,a);return"set"==t?this:r}return n.call(this,e,a)})}))},function(t,e,n){"use strict";var i=n(210),a=n(22).getWeak,r=n(12),o=n(13),s=n(205),c=n(206),l=n(172),u=n(5),d=l(5),f=l(6),p=0,h=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return d(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var l=t(function(t,i){s(t,l,e,"_i"),t._i=p++,t._l=void 0,void 0!=i&&c(i,n,t[r],t)});return i(l.prototype,{"delete":function(t){if(!o(t))return!1;var e=a(t);return e===!0?h(this)["delete"](t):e&&u(e,this._i)&&delete e[this._i]},has:function(t){if(!o(t))return!1;var e=a(t);return e===!0?h(this).has(t):e&&u(e,this._i)}}),l},def:function(t,e,n){var i=a(r(e),!0);return i===!0?h(t).set(e,n):i[t._i]=n,t},ufstore:h}},function(t,e,n){"use strict";var i=n(216);n(213)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(8),a=n(219),r=n(220),o=n(12),s=n(39),c=n(37),l=n(13),u=n(4).ArrayBuffer,d=n(207),f=r.ArrayBuffer,p=r.DataView,h=a.ABV&&u.isView,v=f.prototype.slice,m=a.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(u!==f),{ArrayBuffer:f}),i(i.S+i.F*!a.CONSTR,y,{isView:function(t){return h&&h(t)||l(t)&&m in t}}),i(i.P+i.U+i.F*n(7)(function(){return!new f(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(o(this),t);for(var n=o(this).byteLength,i=s(t,n),a=s(void 0===e?n:e,n),r=new(d(this,f))(c(a-i)),l=new p(this),u=new p(r),h=0;i<a;)u.setUint8(h++,l.getUint8(i++));return r}}),n(192)(y)},function(t,e,n){for(var i,a=n(4),r=n(10),o=n(19),s=o("typed_array"),c=o("view"),l=!(!a.ArrayBuffer||!a.DataView),u=l,d=0,f=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<f;)(i=a[p[d++]])?(r(i.prototype,s,!0),r(i.prototype,c,!0)):u=!1;t.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(t,e,n){"use strict";var i=n(4),a=n(6),r=n(28),o=n(219),s=n(10),c=n(210),l=n(7),u=n(205),d=n(38),f=n(37),p=n(50).f,h=n(11).f,v=n(188),m=n(24),y="ArrayBuffer",g="DataView",b="prototype",_="Wrong length!",x="Wrong index!",w=i[y],j=i[g],k=i.Math,I=i.RangeError,T=i.Infinity,C=w,D=k.abs,S=k.pow,M=k.floor,O=k.log,E=k.LN2,P="buffer",A="byteLength",$="byteOffset",N=a?"_b":P,L=a?"_l":A,J=a?"_o":$,R=function(t,e,n){var i,a,r,o=Array(n),s=8*n-e-1,c=(1<<s)-1,l=c>>1,u=23===e?S(2,-24)-S(2,-77):0,d=0,f=t<0||0===t&&1/t<0?1:0;for(t=D(t),t!=t||t===T?(a=t!=t?1:0,i=c):(i=M(O(t)/E),t*(r=S(2,-i))<1&&(i--,r*=2),t+=i+l>=1?u/r:u*S(2,1-l),t*r>=2&&(i++,r/=2),i+l>=c?(a=0,i=c):i+l>=1?(a=(t*r-1)*S(2,e),i+=l):(a=t*S(2,l-1)*S(2,e),i=0));e>=8;o[d++]=255&a,a/=256,e-=8);for(i=i<<e|a,s+=e;s>0;o[d++]=255&i,i/=256,s-=8);return o[--d]|=128*f,o},F=function(t,e,n){var i,a=8*n-e-1,r=(1<<a)-1,o=r>>1,s=a-7,c=n-1,l=t[c--],u=127&l;for(l>>=7;s>0;u=256*u+t[c],c--,s-=8);for(i=u&(1<<-s)-1,u>>=-s,s+=e;s>0;i=256*i+t[c],c--,s-=8);if(0===u)u=1-o;else{if(u===r)return i?NaN:l?-T:T;i+=S(2,e),u-=o}return(l?-1:1)*i*S(2,u-e)},V=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},G=function(t){return[255&t]},H=function(t){return[255&t,t>>8&255]},B=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},U=function(t){return R(t,52,8)},z=function(t){return R(t,23,4)},W=function(t,e,n){h(t[b],e,{get:function(){return this[n]}})},Y=function(t,e,n,i){var a=+n,r=d(a);if(a!=r||r<0||r+e>t[L])throw I(x);var o=t[N]._b,s=r+t[J],c=o.slice(s,s+e);return i?c:c.reverse()},K=function(t,e,n,i,a,r){var o=+n,s=d(o);if(o!=s||s<0||s+e>t[L])throw I(x);for(var c=t[N]._b,l=s+t[J],u=i(+a),f=0;f<e;f++)c[l+f]=u[r?f:e-f-1]},q=function(t,e){u(t,w,y);var n=+e,i=f(n);if(n!=i)throw I(_);return i};if(o.ABV){if(!l(function(){new w})||!l(function(){new w(.5)})){w=function(t){return new C(q(this,t))};for(var X,Z=w[b]=C[b],Q=p(C),tt=0;Q.length>tt;)(X=Q[tt++])in w||s(w,X,C[X]);r||(Z.constructor=w)}var et=new j(new w(2)),nt=j[b].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(j[b],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else w=function(t){var e=q(this,t);this._b=v.call(Array(e),0),this[L]=e},j=function(t,e,n){u(this,j,g),u(t,w,g);var i=t[L],a=d(e);if(a<0||a>i)throw I("Wrong offset!");if(n=void 0===n?i-a:f(n),a+n>i)throw I(_);this[N]=t,this[J]=a,this[L]=n},a&&(W(w,A,"_l"),W(j,P,"_b"),W(j,A,"_l"),W(j,$,"_o")),c(j[b],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var e=Y(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Y(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(Y(this,4,t,arguments[1]))},getUint32:function(t){return V(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){K(this,1,t,G,e)},setUint8:function(t,e){K(this,1,t,G,e)},setInt16:function(t,e){K(this,2,t,H,e,arguments[2])},setUint16:function(t,e){K(this,2,t,H,e,arguments[2])},setInt32:function(t,e){K(this,4,t,B,e,arguments[2])},setUint32:function(t,e){K(this,4,t,B,e,arguments[2])},setFloat32:function(t,e){K(this,4,t,z,e,arguments[2])},setFloat64:function(t,e){K(this,8,t,U,e,arguments[2])}});m(w,y),m(j,g),s(j[b],o.VIEW,!0),e[y]=w,e[g]=j},function(t,e,n){var i=n(8);i(i.G+i.W+i.F*!n(219).ABV,{DataView:n(220).DataView})},function(t,e,n){n(223)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){"use strict";if(n(6)){var i=n(28),a=n(4),r=n(7),o=n(8),s=n(219),c=n(220),l=n(20),u=n(205),d=n(17),f=n(10),p=n(210),h=n(38),v=n(37),m=n(39),y=n(16),g=n(5),b=n(71),_=n(75),x=n(13),w=n(58),j=n(162),k=n(46),I=n(59),T=n(50).f,C=n(164),D=n(19),S=n(25),M=n(172),O=n(36),E=n(207),P=n(193),A=n(129),$=n(165),N=n(192),L=n(188),J=n(185),R=n(11),F=n(51),V=R.f,G=F.f,H=a.RangeError,B=a.TypeError,U=a.Uint8Array,z="ArrayBuffer",W="Shared"+z,Y="BYTES_PER_ELEMENT",K="prototype",q=Array[K],X=c.ArrayBuffer,Z=c.DataView,Q=M(0),tt=M(2),et=M(3),nt=M(4),it=M(5),at=M(6),rt=O(!0),ot=O(!1),st=P.values,ct=P.keys,lt=P.entries,ut=q.lastIndexOf,dt=q.reduce,ft=q.reduceRight,pt=q.join,ht=q.sort,vt=q.slice,mt=q.toString,yt=q.toLocaleString,gt=S("iterator"),bt=S("toStringTag"),_t=D("typed_constructor"),xt=D("def_constructor"),wt=s.CONSTR,jt=s.TYPED,kt=s.VIEW,It="Wrong length!",Tt=M(1,function(t,e){return Et(E(t,t[xt]),e)}),Ct=r(function(){return 1===new U(new Uint16Array([1]).buffer)[0]}),Dt=!!U&&!!U[K].set&&r(function(){new U(1).set({})}),St=function(t,e){if(void 0===t)throw B(It);var n=+t,i=v(t);if(e&&!b(n,i))throw H(It);return i},Mt=function(t,e){var n=h(t);if(n<0||n%e)throw H("Wrong offset!");return n},Ot=function(t){if(x(t)&&jt in t)return t;throw B(t+" is not a typed array!")},Et=function(t,e){if(!(x(t)&&_t in t))throw B("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return At(E(t,t[xt]),e)},At=function(t,e){for(var n=0,i=e.length,a=Et(t,i);i>n;)a[n]=e[n++];return a},$t=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Nt=function(t){var e,n,i,a,r,o,s=w(t),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,f=C(s);if(void 0!=f&&!j(f)){for(o=f.call(s),i=[],e=0;!(r=o.next()).done;e++)i.push(r.value);s=i}for(d&&c>2&&(u=l(u,arguments[2],2)),e=0,n=v(s.length),a=Et(this,n);n>e;e++)a[e]=d?u(s[e],e):s[e];return a},Lt=function(){for(var t=0,e=arguments.length,n=Et(this,e);e>t;)n[t]=arguments[t++];return n},Jt=!!U&&r(function(){yt.call(new U(1))}),Rt=function(){return yt.apply(Jt?vt.call(Ot(this)):Ot(this),arguments)},Ft={copyWithin:function(t,e){return J.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(Ot(this),arguments)},filter:function(t){return Pt(this,tt(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return at(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Ot(this),arguments)},lastIndexOf:function(t){return ut.apply(Ot(this),arguments)},map:function(t){return Tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return dt.apply(Ot(this),arguments)},reduceRight:function(t){return ft.apply(Ot(this),arguments)},reverse:function(){for(var t,e=this,n=Ot(e).length,i=Math.floor(n/2),a=0;a<i;)t=e[a],e[a++]=e[--n],e[n]=t;return e},some:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ht.call(Ot(this),t)},subarray:function(t,e){var n=Ot(this),i=n.length,a=m(t,i);return new(E(n,n[xt]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,v((void 0===e?i:m(e,i))-a))}},Vt=function(t,e){return Pt(this,vt.call(Ot(this),t,e))},Gt=function(t){Ot(this);var e=Mt(arguments[1],1),n=this.length,i=w(t),a=v(i.length),r=0;if(a+e>n)throw H(It);for(;r<a;)this[e+r]=i[r++]},Ht={entries:function(){return lt.call(Ot(this))},keys:function(){return ct.call(Ot(this))},values:function(){return st.call(Ot(this))}},Bt=function(t,e){return x(t)&&t[jt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ut=function(t,e){return Bt(t,e=y(e,!0))?d(2,t[e]):G(t,e)},zt=function(t,e,n){return!(Bt(t,e=y(e,!0))&&x(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};wt||(F.f=Ut,R.f=zt),o(o.S+o.F*!wt,"Object",{getOwnPropertyDescriptor:Ut,defineProperty:zt}),r(function(){mt.call({})})&&(mt=yt=function(){return pt.call(this)});var Wt=p({},Ft);p(Wt,Ht),f(Wt,gt,Ht.values),p(Wt,{slice:Vt,set:Gt,constructor:function(){},toString:mt,toLocaleString:Rt}),$t(Wt,"buffer","b"),$t(Wt,"byteOffset","o"),$t(Wt,"byteLength","l"),$t(Wt,"length","e"),V(Wt,bt,{get:function(){return this[jt]}}),t.exports=function(t,e,n,c){c=!!c;var l=t+(c?"Clamped":"")+"Array",d="Uint8Array"!=l,p="get"+t,h="set"+t,m=a[l],y=m||{},g=m&&I(m),b=!m||!s.ABV,w={},j=m&&m[K],C=function(t,n){var i=t._d;return i.v[p](n*e+i.o,Ct)},D=function(t,n,i){var a=t._d;c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),a.v[h](n*e+a.o,i,Ct)},S=function(t,e){V(t,e,{get:function(){return C(this,e)},set:function(t){return D(this,e,t)},enumerable:!0})};b?(m=n(function(t,n,i,a){u(t,m,l,"_d");var r,o,s,c,d=0,p=0;if(x(n)){if(!(n instanceof X||(c=_(n))==z||c==W))return jt in n?At(m,n):Nt.call(m,n);r=n,p=Mt(i,e);var h=n.byteLength;if(void 0===a){if(h%e)throw H(It);if(o=h-p,o<0)throw H(It)}else if(o=v(a)*e,o+p>h)throw H(It);s=o/e}else s=St(n,!0),o=s*e,r=new X(o);for(f(t,"_d",{b:r,o:p,l:o,e:s,v:new Z(r)});d<s;)S(t,d++)}),j=m[K]=k(Wt),f(j,"constructor",m)):$(function(t){new m(null),new m(t)},!0)||(m=n(function(t,n,i,a){u(t,m,l);var r;return x(n)?n instanceof X||(r=_(n))==z||r==W?void 0!==a?new y(n,Mt(i,e),a):void 0!==i?new y(n,Mt(i,e)):new y(n):jt in n?At(m,n):Nt.call(m,n):new y(St(n,d))}),Q(g!==Function.prototype?T(y).concat(T(g)):T(y),function(t){t in m||f(m,t,y[t])}),m[K]=j,i||(j.constructor=m));var M=j[gt],O=!!M&&("values"==M.name||void 0==M.name),E=Ht.values;f(m,_t,!0),f(j,jt,l),f(j,kt,!0),f(j,xt,m),(c?new m(1)[bt]==l:bt in j)||V(j,bt,{get:function(){return l}}),w[l]=m,o(o.G+o.W+o.F*(m!=y),w),o(o.S,l,{BYTES_PER_ELEMENT:e,from:Nt,of:Lt}),Y in j||f(j,Y,e),o(o.P,l,Ft),N(l),o(o.P+o.F*Dt,l,{set:Gt}),o(o.P+o.F*!O,l,Ht),o(o.P+o.F*(j.toString!=mt),l,{toString:mt}),o(o.P+o.F*r(function(){new m(1).slice()}),l,{slice:Vt}),o(o.P+o.F*(r(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!r(function(){j.toLocaleString.call([1,2])})),l,{toLocaleString:Rt}),A[l]=O?M:E,i||O||f(j,gt,E)}}else t.exports=function(){}},function(t,e,n){n(223)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(223)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(223)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(8),a=n(21),r=n(12),o=(n(4).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(7)(function(){o(function(){})}),"Reflect",{apply:function(t,e,n){var i=a(t),c=r(n);return o?o(i,e,c):s.call(i,e,c)}})},function(t,e,n){var i=n(8),a=n(46),r=n(21),o=n(12),s=n(13),c=n(7),l=n(77),u=(n(4).Reflect||{}).construct,d=c(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),f=!c(function(){u(function(){})});i(i.S+i.F*(d||f),"Reflect",{construct:function(t,e){r(t),o(e);var n=arguments.length<3?t:r(arguments[2]);if(f&&!d)return u(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var c=n.prototype,p=a(s(c)?c:Object.prototype),h=Function.apply.call(t,p,e);return s(h)?h:p}})},function(t,e,n){var i=n(11),a=n(8),r=n(12),o=n(16);a(a.S+a.F*n(7)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){r(t),e=o(e,!0),r(n);try{return i.f(t,e,n),!0}catch(a){return!1}}})},function(t,e,n){var i=n(8),a=n(51).f,r=n(12);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=a(r(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(8),a=n(12),r=function(t){this._t=a(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(130)(r,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new r(t)}})},function(t,e,n){function i(t,e){var n,s,u=arguments.length<3?t:arguments[2];return l(t)===u?t[e]:(n=a.f(t,e))?o(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:c(s=r(t))?i(s,e,u):void 0}var a=n(51),r=n(59),o=n(5),s=n(8),c=n(13),l=n(12);s(s.S,"Reflect",{get:i})},function(t,e,n){var i=n(51),a=n(8),r=n(12);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(r(t),e)}})},function(t,e,n){var i=n(8),a=n(59),r=n(12);i(i.S,"Reflect",{getPrototypeOf:function(t){return a(r(t))}})},function(t,e,n){var i=n(8);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(8),a=n(12),r=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return a(t),!r||r(t)}})},function(t,e,n){var i=n(8);i(i.S,"Reflect",{ownKeys:n(243)})},function(t,e,n){var i=n(50),a=n(43),r=n(12),o=n(4).Reflect;t.exports=o&&o.ownKeys||function(t){var e=i.f(r(t)),n=a.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(8),a=n(12),r=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){a(t);try{return r&&r(t),!0}catch(e){return!1}}})},function(t,e,n){function i(t,e,n){var c,f,p=arguments.length<4?t:arguments[3],h=r.f(u(t),e);if(!h){if(d(f=o(t)))return i(f,e,n,p);h=l(0)}return s(h,"value")?!(h.writable===!1||!d(p))&&(c=r.f(p,e)||l(0),c.value=n,a.f(p,e,c),!0):void 0!==h.set&&(h.set.call(p,n),!0)}var a=n(11),r=n(51),o=n(59),s=n(5),c=n(8),l=n(17),u=n(12),d=n(13);c(c.S,"Reflect",{set:i})},function(t,e,n){var i=n(8),a=n(73);a&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){a.check(t,e);try{return a.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var i=n(8),a=n(36)(!0);i(i.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(186)("includes")},function(t,e,n){"use strict";var i=n(8),a=n(127)(!0);i(i.P,"String",{at:function(t){return a(this,t)}})},function(t,e,n){"use strict";var i=n(8),a=n(250);i(i.P,"String",{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var i=n(37),a=n(91),r=n(35);t.exports=function(t,e,n,o){var s=String(r(t)),c=s.length,l=void 0===n?" ":String(n),u=i(e);if(u<=c||""==l)return s;var d=u-c,f=a.call(l,Math.ceil(d/l.length));return f.length>d&&(f=f.slice(0,d)),o?f+s:s+f}},function(t,e,n){"use strict";var i=n(8),a=n(250);i(i.P,"String",{padEnd:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(83)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(83)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var i=n(8),a=n(35),r=n(37),o=n(134),s=n(196),c=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(130)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(a(this),!o(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in c?String(t.flags):s.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=r(t.lastIndex),new l(i,e)}})},function(t,e,n){n(27)("asyncIterator")},function(t,e,n){n(27)("observable")},function(t,e,n){var i=n(8),a=n(243),r=n(32),o=n(51),s=n(163);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=r(t),i=o.f,c=a(n),l={},u=0;c.length>u;)s(l,e=c[u++],i(n,e));return l}})},function(t,e,n){var i=n(8),a=n(259)(!1);i(i.S,"Object",{values:function(t){return a(t)}})},function(t,e,n){var i=n(30),a=n(32),r=n(44).f;t.exports=function(t){return function(e){for(var n,o=a(e),s=i(o),c=s.length,l=0,u=[];c>l;)r.call(o,n=s[l++])&&u.push(t?[n,o[n]]:o[n]);return u}}},function(t,e,n){var i=n(8),a=n(259)(!0);i(i.S,"Object",{entries:function(t){return a(t)}})},function(t,e,n){"use strict";var i=n(8),a=n(58),r=n(21),o=n(11);n(6)&&i(i.P+n(262),"Object",{__defineGetter__:function(t,e){o.f(a(this),t,{get:r(e),enumerable:!0,configurable:!0})}})},function(t,e,n){t.exports=n(28)||!n(7)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(4)[t]})},function(t,e,n){"use strict";var i=n(8),a=n(58),r=n(21),o=n(11);n(6)&&i(i.P+n(262),"Object",{__defineSetter__:function(t,e){o.f(a(this),t,{set:r(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(8),a=n(58),r=n(16),o=n(59),s=n(51).f;n(6)&&i(i.P+n(262),"Object",{__lookupGetter__:function(t){var e,n=a(this),i=r(t,!0);do if(e=s(n,i))return e.get;while(n=o(n))}})},function(t,e,n){"use strict";var i=n(8),a=n(58),r=n(16),o=n(59),s=n(51).f;n(6)&&i(i.P+n(262),"Object",{__lookupSetter__:function(t){var e,n=a(this),i=r(t,!0);do if(e=s(n,i))return e.set;while(n=o(n))}})},function(t,e,n){var i=n(8);i(i.P+i.R,"Map",{toJSON:n(267)("Map")})},function(t,e,n){var i=n(75),a=n(268);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},function(t,e,n){var i=n(206);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(8);i(i.P+i.R,"Set",{toJSON:n(267)("Set")})},function(t,e,n){var i=n(8);i(i.S,"System",{global:n(4)})},function(t,e,n){var i=n(8),a=n(34);i(i.S,"Error",{isError:function(t){return"Error"===a(t)}})},function(t,e,n){var i=n(8);i(i.S,"Math",{iaddh:function(t,e,n,i){var a=t>>>0,r=e>>>0,o=n>>>0;return r+(i>>>0)+((a&o|(a|o)&~(a+o>>>0))>>>31)|0}})},function(t,e,n){var i=n(8);i(i.S,"Math",{isubh:function(t,e,n,i){var a=t>>>0,r=e>>>0,o=n>>>0;return r-(i>>>0)-((~a&o|~(a^o)&a-o>>>0)>>>31)|0}})},function(t,e,n){var i=n(8);i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,a=+e,r=i&n,o=a&n,s=i>>16,c=a>>16,l=(s*o>>>0)+(r*o>>>16);return s*c+(l>>16)+((r*c>>>0)+(l&n)>>16)}})},function(t,e,n){var i=n(8);i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,a=+e,r=i&n,o=a&n,s=i>>>16,c=a>>>16,l=(s*o>>>0)+(r*o>>>16);return s*c+(l>>>16)+((r*c>>>0)+(l&n)>>>16)}})},function(t,e,n){var i=n(277),a=n(12),r=i.key,o=i.set;i.exp({defineMetadata:function(t,e,n,i){o(t,e,a(n),r(i))}})},function(t,e,n){var i=n(211),a=n(8),r=n(23)("metadata"),o=r.store||(r.store=new(n(215))),s=function(t,e,n){var a=o.get(t);if(!a){if(!n)return;o.set(t,a=new i)}var r=a.get(e);if(!r){if(!n)return;a.set(e,r=new i)}return r},c=function(t,e,n){var i=s(e,n,!1);return void 0!==i&&i.has(t)},l=function(t,e,n){var i=s(e,n,!1);return void 0===i?void 0:i.get(t)},u=function(t,e,n,i){s(n,i,!0).set(t,e)},d=function(t,e){var n=s(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){a(a.S,"Reflect",t)};t.exports={store:o,map:s,has:c,get:l,set:u,keys:d,key:f,exp:p}},function(t,e,n){var i=n(277),a=n(12),r=i.key,o=i.map,s=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:r(arguments[2]),i=o(a(e),n,!1);if(void 0===i||!i["delete"](t))return!1;if(i.size)return!0;var c=s.get(e);return c["delete"](n),!!c.size||s["delete"](e)}})},function(t,e,n){var i=n(277),a=n(12),r=n(59),o=i.has,s=i.get,c=i.key,l=function(t,e,n){var i=o(t,e,n);if(i)return s(t,e,n);var a=r(e);return null!==a?l(t,a,n):void 0};i.exp({getMetadata:function(t,e){return l(t,a(e),arguments.length<3?void 0:c(arguments[2]))}})},function(t,e,n){var i=n(214),a=n(268),r=n(277),o=n(12),s=n(59),c=r.keys,l=r.key,u=function(t,e){var n=c(t,e),r=s(t);if(null===r)return n;var o=u(r,e);return o.length?n.length?a(new i(n.concat(o))):o:n};r.exp({getMetadataKeys:function(t){return u(o(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var i=n(277),a=n(12),r=i.get,o=i.key;i.exp({getOwnMetadata:function(t,e){return r(t,a(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,n){var i=n(277),a=n(12),r=i.keys,o=i.key;i.exp({getOwnMetadataKeys:function(t){return r(a(t),arguments.length<2?void 0:o(arguments[1]))}})},function(t,e,n){var i=n(277),a=n(12),r=n(59),o=i.has,s=i.key,c=function(t,e,n){var i=o(t,e,n);if(i)return!0;var a=r(e);return null!==a&&c(t,a,n)};i.exp({hasMetadata:function(t,e){return c(t,a(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(277),a=n(12),r=i.has,o=i.key;i.exp({hasOwnMetadata:function(t,e){return r(t,a(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,n){var i=n(277),a=n(12),r=n(21),o=i.key,s=i.set;i.exp({metadata:function(t,e){return function(n,i){s(t,e,(void 0!==i?a:r)(n),o(i))}}})},function(t,e,n){var i=n(8),a=n(209)(),r=n(4).process,o="process"==n(34)(r);i(i.G,{asap:function(t){var e=o&&r.domain;a(e?e.bind(t):t)}})},function(t,e,n){"use strict";var i=n(8),a=n(4),r=n(9),o=n(209)(),s=n(25)("observable"),c=n(21),l=n(12),u=n(205),d=n(210),f=n(10),p=n(206),h=p.RETURN,v=function(t){return null==t?void 0:c(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},g=function(t){y(t)||(t._o=void 0,m(t))},b=function(t,e){l(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:c(n),this._c=n)}catch(a){return void t.error(a)}y(this)&&m(this)};b.prototype=d({},{unsubscribe:function(){g(this)}});var _=function(t){this._s=t};_.prototype=d({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var i=v(n.next);if(i)return i.call(n,t)}catch(a){try{g(e)}finally{throw a}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var i=v(n.error);if(!i)throw t;t=i.call(n,t)}catch(a){try{m(e)}finally{throw a}}return m(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var i=v(n.complete);t=i?i.call(n,t):void 0}catch(a){try{m(e)}finally{throw a}}return m(e),t}}});var x=function(t){u(this,x,"Observable","_f")._f=c(t)};d(x.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(r.Promise||a.Promise)(function(n,i){c(t);var a=e.subscribe({next:function(e){try{return t(e)}catch(n){i(n),a.unsubscribe()}},error:i,complete:n})})}}),d(x,{from:function(t){var e="function"==typeof this?this:x,n=v(l(t)[s]);if(n){var i=l(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return o(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return h})===h)return}catch(i){if(n)throw i;return void e.error(i)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return o(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),f(x.prototype,s,function(){return this}),i(i.G,{Observable:x}),n(192)("Observable")},function(t,e,n){var i=n(4),a=n(8),r=n(78),o=n(289),s=i.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),l=function(t){return c?function(e,n){return t(r(o,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};a(a.G+a.B+a.F*c,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){"use strict";var i=n(290),a=n(78),r=n(21);t.exports=function(){for(var t=r(this),e=arguments.length,n=Array(e),o=0,s=i._,c=!1;e>o;)(n[o]=arguments[o++])===s&&(c=!0);return function(){var i,r=this,o=arguments.length,l=0,u=0;if(!c&&!o)return a(t,n,r);if(i=n.slice(),c)for(;e>l;l++)i[l]===s&&(i[l]=arguments[u++]);for(;o>u;)i.push(arguments[u++]);return a(t,i,r)}}},function(t,e,n){t.exports=n(4)},function(t,e,n){var i=n(8),a=n(208);i(i.G+i.B,{setImmediate:a.set,clearImmediate:a.clear})},function(t,e,n){for(var i=n(193),a=n(18),r=n(4),o=n(10),s=n(129),c=n(25),l=c("iterator"),u=c("toStringTag"),d=s.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var h,v=f[p],m=r[v],y=m&&m.prototype;if(y){y[l]||o(y,l,d),y[u]||o(y,u,v),s[v]=d;for(h in i)y[h]||a(y,h,i[h],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function i(t,e,n,i){var a=Object.create((e||r).prototype),o=new h(i||[]);return a._invoke=d(t,n,o),a}function a(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function r(){}function o(){}function s(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function u(t){function e(n,i,r,o){var s=a(t[n],t,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u instanceof l?Promise.resolve(u.arg).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(u).then(function(t){c.value=t,r(c)},o)}o(s.arg)}function i(t,n){function i(){return new Promise(function(i,a){e(t,n,i,a)})}return r=r?r.then(i,i):i()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var r;this._invoke=i}function d(t,e,n){var i=k;return function(r,o){if(i===T)throw new Error("Generator is already running");if(i===C){if("throw"===r)throw o;return m()}for(;;){var s=n.delegate;if(s){if("return"===r||"throw"===r&&s.iterator[r]===y){n.delegate=null;var c=s.iterator["return"];if(c){var l=a(c,s.iterator,o);if("throw"===l.type){r="throw",o=l.arg;continue}}if("return"===r)continue}var l=a(s.iterator[r],s.iterator,o);if("throw"===l.type){n.delegate=null,r="throw",o=l.arg;continue}r="next",o=y;var u=l.arg;if(!u.done)return i=I,u;n[s.resultName]=u.value,n.next=s.nextLoc,n.delegate=null}if("next"===r)n.sent=n._sent=o;else if("throw"===r){if(i===k)throw i=C,o;n.dispatchException(o)&&(r="next",o=y)}else"return"===r&&n.abrupt("return",o);i=T;var l=a(t,e,n);if("normal"===l.type){i=n.done?C:I;var u={value:l.arg,done:n.done};if(l.arg!==D)return u;n.delegate&&"next"===r&&(o=y)}else"throw"===l.type&&(i=C,r="throw",o=l.arg)}}}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function a(){for(;++n<t.length;)if(g.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=y,a.done=!0,a};return i.next=i}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",x=b.toStringTag||"@@toStringTag",w="object"==typeof t,j=e.regeneratorRuntime;if(j)return void(w&&(t.exports=j));j=e.regeneratorRuntime=w?t.exports:{},j.wrap=i;var k="suspendedStart",I="suspendedYield",T="executing",C="completed",D={},S=s.prototype=r.prototype;o.prototype=S.constructor=s,s.constructor=o,s[x]=o.displayName="GeneratorFunction",j.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},j.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(S),t},j.awrap=function(t){return new l(t)},c(u.prototype),j.async=function(t,e,n,a){var r=new u(i(t,e,n,a));return j.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},c(S),S[_]=function(){return this},S[x]="Generator",S.toString=function(){return"[object Generator]"},j.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},j.values=v,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return r.type="throw",r.arg=t,n.next=e,!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],r=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var o=g.call(a,"catchLoc"),s=g.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&g.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?this.next=a.finallyLoc:this.complete(r),D},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),D}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;p(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},D}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(294))},function(t,e){function n(t){if(c===setTimeout)return setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){p&&d&&(p=!1,d.length?f=d.concat(f):h=-1,f.length&&r())}function r(){if(!p){var t=n(a);p=!0;for(var e=f.length;e;){for(d=f,f=[];++h<e;)d&&d[h].run();h=-1,e=f.length}d=null,p=!1,i(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var c,l,u=t.exports={};!function(){try{c=setTimeout}catch(t){c=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(t){l=function(){throw new Error("clearTimeout is not defined")}}}();var d,f=[],p=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new o(t,e)),1!==f.length||p||n(r)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){n(296),t.exports=n(9).RegExp.escape},function(t,e,n){var i=n(8),a=n(297)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return a(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e){"use strict";function n(t,e){return o||(o=!0,f.addRedecuer(t)),e&&(s=Object.assign({},e)),f}function i(){if(o)return f;throw new Error("store hasn't been created!")}function a(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var a=e[i];"function"==typeof t[a]&&(n[a]=t[a])}var r=Object.keys(n);return function(){for(var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1],i=!1,a=Object.assign({},t),o=0;o<r.length;o++){var s=r[o],c=n[s],l=t[s],u=c(l,e);a[s]=u,i=i||u!==l}return i?a:t}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=!1,s={},c={},l="all",u=!1,d=function(){return s},f={getState:function(t){return t?s[t]:s},subscribe:function(t,e){if(e.startsWith("change:")||(e="change:"+e),"function"!=typeof t)throw new Error("Expected listener to be a function.");e=e||l,c[e]=c[e]||[],~c[e].indexOf(t)||c[e].push(t)},unsubscribe:function(t,e){var n;if("function"!=typeof t)throw new Error("Expected listener to be a function.");e=e||l,c[e]&&(n=c[e].indexOf(t))&&c[e].splice(n,1)},dispatch:function(t){var e,n;if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,e=d(s,t)}finally{u=!1}if(e&&e!==s){var i=!1;if(n=s,s=e,Object.keys(s).forEach(function(t){if(n[t]!==s[t]){var e=c["change:"+t];i=i||!0,e&&e.forEach(function(t){t()})}}),i){var a=c["change:"+l];a&&a.forEach(function(t){t()})}}return t},addRedecuer:function(t){switch("undefined"==typeof t?"undefined":r(t)){case"function":d=t;break;case"object":d=a(t);break;default:throw new Error("Expected reducer to be a function.")}}};e.createStore=n,e.getStore=i,e.combineReducer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducers=void 0;var i=n(298),a=n(300),r=n(302),o=n(304),s=n(306);e.reducers=(0,i.combineReducer)(Object.assign({},a.commonReducers,r.resourceReducers,o.detailReducers,s.tourReducers))},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.commonReducers=void 0;var a=n(301),r=i(a);e.commonReducers={isLogin:function(t,e){return e.type===r.CHANGE_LOGIN_STATUS?e.data:t}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CHANGE_LOGIN_STATUS="CHANGE_LOGIN_STATUS"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.resourceReducers=void 0;var a=n(303),r=i(a);e.resourceReducers={calendar:function(t,e){return e.type===r.LOAD_CALENDAR?e.data:t},roomBudget:function(t,e){return e.type===r.LOAD_CALENDAR_ROOM_BUDGET?e.data:t},departDate:function(t,e){return e.type===r.CHANGE_DEPART_DATE?e.data:t},departCity:function(t,e){return e.type===r.CHANGE_DEPART_CITY&&e.data&&e.data.code&&e.data.code!==t.code?e.data:t},backCity:function(t,e){return e.type===r.CHANGE_BACK_CITY&&e.data&&e.data.code?e.data:t},adult:function(t,e){return e.type===r.CHANGE_ADULT?e.data:t},child:function(t,e){return e.type===r.CHANGE_CHILD?e.data:t},freeChild:function(t,e){return e.type===r.CHANGE_FREE_CHILD?e.data:t},departDateTarget:function(t,e){return e.type===r.CHANGE_DEPART_DATE_TARGET?e.data:t},status:function(t,e){return e.type===r.CHANGE_PRODUCT_STATUS&&t!=e.data?e.data:t},currentJourney:function(t,e){return e.type===r.CHANG_DETAIL_JOURNEY?e.data:t}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LOAD_CALENDAR="LOAD_CALENDAR",e.LOAD_CALENDAR_ROOM_BUDGET="LOAD_CALENDAR_ROOM_BUDGET",e.CHANGE_DEPART_DATE="CHANGE_DEPART_DATE",e.CHANGE_DEPART_CITY="CHANGE_DEPART_CITY",e.CHANGE_BACK_CITY="CHANGE_BACK_CITY",e.CHANGE_ADULT="CHANGE_ADULT",e.CHANGE_CHILD="CHANGE_CHILD",e.CHANGE_FREE_CHILD="CHANGE_FREE_CHILD",e.CHANGE_DEPART_DATE_TARGET="CHANGE_DEPART_DATE_TARGET",e.CHANGE_PRODUCT_STATUS="CHANGE_PRODUCT_STATUS"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.detailReducers=void 0;var a=n(305),r=i(a);e.detailReducers={currentJourney:function(t,e){return e.type===r.CHANG_DETAIL_JOURNEY?e.data:t}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LOAD_COMMENT="LOAD_COMMENT",e.CHANGE_COMMENT_FILTER="CHANGE_COMMENT_FILTER",e.CHANG_DETAIL_JOURNEY="CHANG_DETAIL_JOURNEY"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tourReducers=void 0;var i=n(307);e.tourReducers={supplier:function(t,e){return e.type===i.actions.LOAD_SUPPLIER?e.data:t},brandInfo:function(t,e){return e.type===i.actions.LOAD_BRAND_INFO?e.data:t}}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.actions=void 0;var a=n(303),r=i(a),o=n(301),s=i(o),c=n(305),l=i(c),u=n(308),d=i(u);e.actions=Object.assign({},s,r,l,d)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LOAD_SUPPLIER="LOAD_SUPPLIER",e.LOAD_BRAND_INFO="LOAD_BRAND_INFO"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){return $("<div />").append(t.html).addClass("calendar-mask").css(t.offset).css({"-webkit-transform":"scale("+H+")",transform:"scale("+H+")"})}function r(){function t(t){var e=Math.min(t/V,1),n=m*Math.pow(e,2)+g*e+u,i=_*Math.pow(e,2)+x*e+d;return 1!==e&&{left:n,top:i}}function e(){var a=t(i),r=Math.max(H-i/V,B);a?(o.css(a).width(c*r).height(l*r).children().css({"-webkit-transform":"scale("+r+")",transform:"scale("+r+")"}),i+=F,setTimeout(e,F)):n()}function n(){o.remove(),y.calendarModule.enable(),b.dateModule.flash(),b.dateModule.update(),L=!1,M.length&&r()}var i=0,o=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,f=void 0,p=void 0,h=void 0,v=void 0,m=void 0,g=void 0,_=void 0,x=void 0;L||(s=M.shift(),s&&s.offset&&(o=a(s),o.appendTo("body"),c=o.width(),l=o.height(),J=R.offset(),u=s.offset.left,d=s.offset.top,h=J.left+70+c,v=J.top+12-l*G/2,f=(u+h)/2,p=Math.min(d,v)-100,m=u-2*f+h,g=2*(f-u),_=d-2*p+v,x=2*(p-d),L=!0,y.calendarModule.disable(),e()))}function o(t,e){var n=d.layer.open({type:1,title:!1,content:'<div class="dialog-error"><div class="dialog-close"></div><i class="icon"></i>'+t+"</div>",area:["400px","auto"],btn:!1,closeBtn:!1,success:function(t){t.on("click",".dialog-close",function(){d.layer.close(n)})},end:function(){e&&e()}})}function s(){var t=E.offset();if(!t)return!1;var e=E.height(),n=A.scrollTop(),i=A.height();return Object.assign({},t,{inView:t.top>=n&&t.top+e<=n+i})}function c(){var t=s();t&&(t.inView||A.scrollTop(t.top-50),b.dateModule.flash())}Object.defineProperty(e,"__esModule",{value:!0}),e.headModule=void 0;var l=n(298),u=n(310),d=n(311),f=n(312),p=n(303),h=i(p),v=n(314),m=n(315),y=n(316),g=n(321),b=n(325),_=n(328),x=n(333),w=i(x),j=n(341),k=i(j),I=n(342),T=n(343),C=n(344),D=n(347),S=void 0,M=[],O=void 0,E=void 0,P=void 0,A=$(window),N=$(document),L=!1,J=void 0,R=void 0,F=13,V=700,G=.5,H=.9,B=.5,U={init:function(){S=(0,l.getStore)();var t=S.getState("status");O=$("#J_Calendar"),R=$("#J_ResourceDate"),E=$("#J_ResourceDate"),P=$("#J_Form"),2!=t&&(this.initCalendar(),this.initCity(),this.initDate(),this.initTourist(),this.intDownpaymentTip(),this.initPriceTip(),C.favorModule.init({couponReceiveUrl:v.config.url.couponReceive}),1==S.getState("productType")&&w.init(S.getState("startDate"))),this.initGallery(),this.initPromotionTip(),this.initJourney(),this.initRecommend(),this.initFeature(),this.initQr(),this.initFavorite(),this.initService(),this.bind();var e={};2!=t&&1==S.getState("productType")&&(e.supplier=1,e.productId=S.getState("productId"),e.destGroupId=S.getState("destGroupId"),e.destGroupName=S.getState("destGroupName")),S.getState("brandId")&&(e.brand=1,e.brandId=S.getState("brandId")),k.fetch(v.config.url.aggregation,e)},bind:function(){S.subscribe(function(){if("calendar"===S.getState("departDateTarget")){var t=S.getState("departDate"),e=O.find('[data-date="'+t+'"]');M.push({date:t,offset:e.offset(),html:e.clone()}),r()}},"change:departDate"),S.subscribe(function(){var t=S.getState("calendar"),e=S.getState("allDepartCities");t&&t.length||S.dispatch({type:h.CHANGE_PRODUCT_STATUS,data:e&&e.length>1?3:2})},"change:calendar"),S.subscribe(function(){U.update()},"change:status"),$(".J_Submit").click(function(){return U.submit()}),$(".J_SubmitDetail").click(function(){return U.submit(!0)})},submit:function(t){function e(t,e){P.find("[name="+t+"]").val(e)}if(0!=S.getState("status"))return!1;var n=S.getState("departDate");if(!n)return t?(c(),b.dateModule.showDatePicker(),N.trigger("customclick","date")):o("请选择日期",c),!1;var i={begin_date:"departDate",user_num:"adult",child_count:"child"};for(var a in i)e(a,S.getState(i[a]));return 2==S.getState("proMode")&&(e("normalChildCount",S.getState("child")),e("freeChildCount",S.getState("freeChild"))),P.find("[name=from_url]").val(location.href),P.attr("action",v.config.url.submit({productId:S.getState("productId")})),P.submit(),!0},update:function(){var t=S.getState("status"),e=$("#J_ResourcePrice");3==t?(e.html('\n                <div class="resource-section-item resource-price-item resource-price-saleout">\n                    <div class="resource-price-empty"><strong>当前出发城市暂时无法销售~</strong></div>\n                    <div class="resource-price-other">看看其他出发城市吧</div>\n                </div>\n            '),$(".J_Submit").addClass("disabled")):2==t&&(e.html('\n                <div class="resource-section-item resource-price-item resource-price-saleout">\n                    <div class="resource-price-empty"><strong>当前线路暂时无法销售~</strong></div>\n                    <div class="resource-price-other">可以看看其他相似线路</div>\n                </div>\n            '),$(".J_Submit").addClass("disabled"))},initGallery:function(){new f.Gallery("#J_Gallery",{autoChange:!0})},initCalendar:function(){y.calendarModule.init({calendarUrl:v.config.url.calendar})},initCity:function(){g.cityModule.init({pageUrl:v.config.url.page})},initDate:function(){b.dateModule.init()},initTourist:function(){_.touristModule.init()},initPriceTip:function(){var t=$("#J_ResourcePriceTip"),e=$("#"+t.data("for")),n=$("#J_ResourcePromotionPriceTip"),i=$("#"+n.data("for"));new m.Tip(t,{content:$("<div />").append(e.removeClass("tip-content")).html(),dialog:{tipsOffset:[10,-27]}}),new m.Tip(n,{content:$("<div />").append(i.removeClass("tip-content")).html(),dialog:{area:["380px","auto"],tipsOffset:[10,-27]}})},intDownpaymentTip:function(){var t=u.template.compile(T.resourceDownpaymentTemplate);new m.Tip($("#J_ResourceDownpaymentTip"),{content:function(){return t({data:(S.getState("detail")||{}).firstPay||{}})},dialog:{tipsOffset:[10,-2]}})},initPromotionTip:function(){var t=(S.getState("detail")||{}).activity;t&&t.length&&new m.Tip($("#J_ResourcePromotionTip"),{type:"click",content:function(){return u.template.compile(I.resourcePromotionTemplate)({data:t})},dialog:{area:["290px","auto"],tipsOffset:[0,-20]}})},initRecommend:function(){var t=$("#J_ResourceRecommend"),e=t.find(".resource-section-content"),n=t.find(".resource-recommend-content-outer"),i=t.find(".resource-recommend-content-inner"),a=t.find(".resource-recommend-expand"),r=72,o=i.height(),s=!1;n.height()<o&&(t.addClass("fixed").height(r),n.height(r).css("max-height","none"),a.show(),e.hover(function(){n.height(o),t.addClass("expanded"),s=!0},function(){n.height(r),t.removeClass("expanded"),s=!1}))},initJourney:function(){var t=$("#J_ResourceJourney"),e=t.find(".resource-section-content"),n=t.find(".resource-section-content-inner"),i=n.children().toArray(),a=e.height(),r=n.height();if(a<r){n.clone().append('<a href="javascript:;" class="resource-journey-less">收起</a>').addClass("more").appendTo(e),n.addClass("less"),n.append('<a href="javascript:;" class="resource-journey-more" mm="点击_头部区_基本信息__行程概要_展开行程概要">...详细</a>');do $(i.pop()).remove();while(a<n.height());t.on("click",".resource-journey-less",function(){t.removeClass("expand")}).on("click",".resource-journey-more",function(){t.addClass("expand")})}},initFeature:function(){var t=$("#J_ResourceFeature"),e=t.find(".resource-feature-content-inner"),n=t.find(".resource-feature-list"),i=e.height(),a=n.height(),r=!1,o="收起<i></i>",s="更多<i></i>";i<a&&$("<div />").addClass("resource-feature-more").html(s).click(function(){r?(e.height(i),$(this).html(s).removeClass("expand"),r=!1):(e.height(a),$(this).html(o).addClass("expand"),r=!0)}).appendTo(e),e.find(".resource-feature-item").each(function(){var t=$(this),e=t.data("for"),n=void 0;e&&(n=$("#"+e),new m.Tip(t,{type:"click",content:$("<div />").append(n.removeClass("tip-content")).html(),dialog:{tipsOffset:[10,-27]}}))})},initQr:function(){$(".J_QR").hover(function(){$(this).addClass("expand")},function(){$(this).removeClass("expand")})},initFavorite:function(){D.favoriteModule.init({checkFavoriteStateUrl:v.config.url.checkFavoriteState,addFavoriteUrl:v.config.url.addFavorite,removeFavoriteUrl:v.config.url.removeFavorite})},initService:function(){function t(t){t&&t.url&&($(".J_Service").attr({href:t.url,target:"_blank"}).show(),window.showHeadTuniuChat?window.showHeadTuniuChat(t):window.showHeadTuniuChat=t)}window.getKefuData?window.getKefuData(t):(window.sidebarCallbacks=window.sidebarCallbacks||[],window.sidebarCallbacks.push(t))}};e.headModule=U},function(t,e){"use strict";
/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
function n(t){return t.replace(w,"").replace(j,",").replace(k,"").replace(I,"").replace(T,"").split(C)}function i(t){return"'"+t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(t,e){function a(t){return f+=t.split(/\n/).length-1,u&&(t=t.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),t&&(t=v[1]+i(t)+v[2]+"\n"),t}function r(t){var i=f;if(l?t=l(t,e):o&&(t=t.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===t.indexOf("=")){var a=d&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),a){var r=t.replace(/\s*\([^\)]+\)/,"");m[r]||/^(include|print)$/.test(r)||(t="$escape("+t+")")}else t="$string("+t+")";t=v[1]+t+v[2]}return o&&(t="$line="+i+";"+t),_(n(t),function(t){if(t&&!p[t]){var e;e="print"===t?b:"include"===t?x:m[t]?"$utils."+t:y[t]?"$helpers."+t:"$data."+t,w+=t+"="+e+",",p[t]=!0}}),t+"\n"}var o=e.debug,s=e.openTag,c=e.closeTag,l=e.parser,u=e.compress,d=e.escape,f=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,v=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],g=h?"$out+=text;return $out;":"$out.push(text);",b="function(){var text=''.concat.apply('',arguments);"+g+"}",x="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+g+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),j=v[0],k="return new String("+v[3]+");";_(t.split(s),function(t){t=t.split(c);var e=t[0],n=t[1];1===t.length?j+=a(e):(j+=r(e),n&&(j+=a(n)))});var I=w+j+k;o&&(I="try{"+I+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+i(t)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var T=new Function("$data","$filename",I);return T.prototype=m,T}catch(C){throw C.temp="function anonymous($data,$filename) {"+I+"}",C}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(t,e){return"string"==typeof e?b(e,{filename:t}):l(t,e)};o.version="3.0.0",o.config=function(t,e){s[t]=e};var s=o.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},c=o.cache={};o.render=function(t,e){return b(t,e)};var l=o.renderFile=function(t,e){var n=o.get(t)||g({filename:t,name:"Render Error",message:"Template not found"});return e?n(e):n};o.get=function(t){var e;if(c[t])e=c[t];else if("object"==("undefined"==typeof document?"undefined":r(document))){var n=document.getElementById(t);if(n){var i=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");e=b(i,{filename:t})}}return e};var u=function S(t,e){return"string"!=typeof t&&(e="undefined"==typeof t?"undefined":r(t),"number"===e?t+="":t="function"===e?S(t.call(t)):""),t},d={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},f=function(t){return d[t]},p=function(t){return u(t).replace(/&(?![\w#]+;)|[<>"']/g,f)},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},v=function(t,e){var n,i;if(h(t))for(n=0,i=t.length;i>n;n++)e.call(t,t[n],n,t);else for(n in t)e.call(t,t[n],n)},m=o.utils={$helpers:{},$include:l,$string:u,$escape:p,$each:v};o.helper=function(t,e){y[t]=e};var y=o.helpers=m.$helpers;o.onerror=function(t){var e="Template Error\n\n";for(var n in t)e+="<"+n+">\n"+t[n]+"\n\n";"object"==("undefined"==typeof console?"undefined":r(console))&&console.error(e)};var g=function(t){return o.onerror(t),function(){return"{Template Error}"}},b=o.compile=function(t,e){function n(n){try{return new o(n,r)+""}catch(i){return e.debug?g(i)():(e.debug=!0,b(t,e)(n))}}e=e||{};for(var i in s)void 0===e[i]&&(e[i]=s[i]);var r=e.filename;try{var o=a(t,e)}catch(l){return l.filename=r||"anonymous",l.name="Syntax Error",g(l)}return n.prototype=o.prototype,n.toString=function(){return o.toString()},r&&e.cache&&(c[r]=n),n},_=m.$each,x="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",w=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,j=/[^\w$]+/g,k=new RegExp(["\\b"+x.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),I=/^\d[^,]*|,\d[^,]*/g,T=/^,+|,+$/g,C=/^$|,+/,D=o;e.template=D},function(t,e){
/*!
 
  @Name：layer v2.4 弹层组件
  @Author：贤心
  @Site：http://layer.layui.com
  @License：LGPL
 
  */
"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r={getPath:function(){var t=document.scripts,e=t[t.length-1],n=e.src;if(!e.getAttribute("merge"))return n.substring(0,n.lastIndexOf("/")+1)}(),enter:function(t){13===t.keyCode&&t.preventDefault()},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]},o={v:"2.4",ie6:!!window.ActiveXObject&&!window.XMLHttpRequest,index:0,path:r.getPath,config:function(t,e){var i=0;return t=t||{},o.cache=r.config=n.extend(r.config,t),o.path=r.config.path||o.path,"string"==typeof t.extend&&(t.extend=[t.extend]),o.use("skin/layer.css",t.extend&&t.extend.length>0?function a(){var n=t.extend;o.use(n[n[i]?i:i-1],i<n.length?function(){return++i,a}():e)}():e),this},use:function(t,e,i){var a=n("head")[0],t=t.replace(/\s/g,""),r=/\.css$/.test(t),s=document.createElement(r?"link":"script"),c="layui_layer_"+t.replace(/\.|\//g,"");if(o.path)return r&&(s.rel="stylesheet"),s[r?"href":"src"]=/^http:\/\//.test(t)?t:o.path+t,s.id=c,n("#"+c)[0]||a.appendChild(s),function l(){(r?1989===parseInt(n("#"+c).css("width")):o[i||c])?function(){e&&e();try{r||a.removeChild(s)}catch(t){}}():setTimeout(l,100)}(),this},ready:function(t,e){var i="function"==typeof t;return i&&(e=t),o.config(n.extend(r.config,function(){return i?{}:{path:t}}()),e),this},alert:function(t,e,i){var a="function"==typeof e;return a&&(i=e),o.open(n.extend({content:t,yes:i},a?{}:e))},confirm:function(t,e,i,a){var s="function"==typeof e;return s&&(a=i,i=e),o.open(n.extend({content:t,btn:r.btn,yes:i,btn2:a},s?{}:e))},msg:function(t,e,i){var a="function"==typeof e,s=r.config.skin,l=(s?s+" "+s+"-msg":"")||"layui-layer-msg",u=c.anim.length-1;return a&&(i=e),o.open(n.extend({content:t,time:3e3,shade:!1,skin:l,title:!1,closeBtn:!1,btn:!1,end:i},a&&!r.config.skin?{skin:l+" layui-layer-hui",shift:u}:function(){return e=e||{},(e.icon===-1||void 0===e.icon&&!r.config.skin)&&(e.skin=l+" "+(e.skin||"layui-layer-hui")),e}()))},load:function(t,e){return o.open(n.extend({type:3,icon:t||0,shade:.01},e))},tips:function(t,e,i){return o.open(n.extend({type:4,content:[t,e],closeBtn:!1,time:3e3,shade:!1,fix:!1,maxWidth:210},i))}},s=function(t){var e=this;e.index=++o.index,e.config=n.extend({},e.config,r.config,t),e.creat()};s.pt=s.prototype;var c=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];c.anim=["layer-anim","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"],s.pt.config={type:0,shade:.3,fix:!0,move:c[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:!0,tips:2},s.pt.vessel=function(t,e){var n=this,i=n.index,o=n.config,s=o.zIndex+i,l="object"===a(o.title),u=o.maxmin&&(1===o.type||2===o.type),d=o.title?'<div class="layui-layer-title" style="'+(l?o.title[1]:"")+'">'+(l?o.title[0]:o.title)+"</div>":"";return o.zIndex=s,e([o.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+i+'" times="'+i+'" style="'+("z-index:"+(s-1)+"; background-color:"+(o.shade[1]||"#000")+"; opacity:"+(o.shade[0]||o.shade)+"; filter:alpha(opacity="+(100*o.shade[0]||100*o.shade)+");")+'"></div>':"",'<div class="'+c[0]+(" layui-layer-"+r.type[o.type])+(0!=o.type&&2!=o.type||o.shade?"":" layui-layer-border")+" "+(o.skin||"")+'" id="'+c[0]+i+'" type="'+r.type[o.type]+'" times="'+i+'" showtime="'+o.time+'" conType="'+(t?"object":"string")+'" style="z-index: '+s+"; width:"+o.area[0]+";height:"+o.area[1]+(o.fix?"":";position:absolute;")+'">'+(t&&2!=o.type?"":d)+'<div id="'+(o.id||"")+'" class="layui-layer-content'+(0==o.type&&o.icon!==-1?" layui-layer-padding":"")+(3==o.type?" layui-layer-loading"+o.icon:"")+'">'+(0==o.type&&o.icon!==-1?'<i class="layui-layer-ico layui-layer-ico'+o.icon+'"></i>':"")+(2==o.type||4==o.type||1==o.type&&t?"":o.content||"")+'</div><span class="layui-layer-setwin">'+function(){var t=u?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return o.closeBtn&&(t+='<a class="layui-layer-ico '+c[7]+" "+c[7]+(o.title?o.closeBtn:4==o.type?"1":"2")+'" href="javascript:;"></a>'),t}()+"</span>"+(o.btn?function(){var t="";"string"==typeof o.btn&&(o.btn=[o.btn]);for(var e=0,n=o.btn.length;e<n;e++)t+='<a class="'+c[6]+e+'">'+o.btn[e]+"</a>";return'<div class="'+c[6]+'">'+t+"</div>"}():"")+"</div>"],d),n},s.pt.creat=function(){var t=this,e=t.config,s=t.index,l=e.content,u="object"===("undefined"==typeof l?"undefined":a(l));if(!n("#"+e.id)[0]){switch("string"==typeof e.area&&(e.area="auto"===e.area?["",""]:[e.area,""]),e.type){case 0:e.btn="btn"in e?e.btn:r.btn[0],o.closeAll("dialog");break;case 2:var l=e.content=u?e.content:[e.content||"http://layer.layui.com","auto"];e.content='<iframe scrolling="'+(e.content[1]||"auto")+'" allowtransparency="true" id="'+c[4]+s+'" name="'+c[4]+s+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+e.content[0]+'"></iframe>';break;case 3:e.title=!1,e.closeBtn=!1,e.icon===-1&&0===e.icon,o.closeAll("loading");break;case 4:u||(e.content=[e.content,"body"]),e.follow=e.content[1],e.content=n("<div />").append(e.content[0],'<i class="layui-layer-TipsG"></i>')[0],e.title=!1,e.tips="object"===a(e.tips)?e.tips:[e.tips,!0],e.tipsMore||o.closeAll("tips")}t.vessel(u,function(i,a){n("body").append(i[0]),u?function(){2==e.type||4==e.type?function(){var t=n(i[1]);t.find(".layui-layer-content").append(e.content),n("body").append(t)}():function(){l.parents("."+c[0])[0]||(l.show().addClass("layui-layer-wrap").wrap(i[1]),n("#"+c[0]+s).find("."+c[5]).before(a))}()}():n("body").append(i[1]),t.layero=n("#"+c[0]+s),e.scrollbar||c.html.css("overflow","hidden").attr("layer-full",s)}).auto(s),2==e.type&&o.ie6&&t.layero.find("iframe").attr("src",l[0]),n(document).off("keydown",r.enter).on("keydown",r.enter),t.layero.on("keydown",function(t){n(document).off("keydown",r.enter)}),4==e.type?t.tips():t.offset(),e.fix&&i.on("resize",function(){t.offset(),(/^\d+%$/.test(e.area[0])||/^\d+%$/.test(e.area[1]))&&t.auto(s),4==e.type&&t.tips()}),e.time<=0||setTimeout(function(){o.close(t.index)},e.time),t.move().callback(),c.anim[e.shift]&&t.layero.addClass(c.anim[e.shift])}},s.pt.auto=function(t){function e(t){t=o.find(t),t.height(s[1]-l-u-2*(0|parseFloat(t.css("padding"))))}var a=this,r=a.config,o=n("#"+c[0]+t);""===r.area[0]&&r.maxWidth>0&&(/MSIE 7/.test(navigator.userAgent)&&r.btn&&o.width(o.innerWidth()),o.outerWidth()>r.maxWidth&&o.width(r.maxWidth));var s=[o.innerWidth(),o.innerHeight()],l=o.find(c[1]).outerHeight()||0,u=o.find("."+c[6]).outerHeight()||0;switch(r.type){case 2:e("iframe");break;default:""===r.area[1]?r.fix&&s[1]>=i.height()&&(s[1]=i.height(),e("."+c[5])):e("."+c[5])}return a},s.pt.offset=function(){var t=this,e=t.config,n=t.layero,r=[n.outerWidth(),n.outerHeight()],o="object"===a(e.offset);t.offsetTop=(i.height()-r[1])/2,t.offsetLeft=(i.width()-r[0])/2,o?(t.offsetTop=e.offset[0],t.offsetLeft=e.offset[1]||t.offsetLeft):"auto"!==e.offset&&(t.offsetTop=e.offset,"rb"===e.offset&&(t.offsetTop=i.height()-r[1],t.offsetLeft=i.width()-r[0])),e.fix||(t.offsetTop=/%$/.test(t.offsetTop)?i.height()*parseFloat(t.offsetTop)/100:parseFloat(t.offsetTop),t.offsetLeft=/%$/.test(t.offsetLeft)?i.width()*parseFloat(t.offsetLeft)/100:parseFloat(t.offsetLeft),t.offsetTop+=i.scrollTop(),t.offsetLeft+=i.scrollLeft()),n.css({top:t.offsetTop,left:t.offsetLeft})},s.pt.tips=function(){var t=this,e=t.config,a=t.layero,r=[a.outerWidth(),a.outerHeight()],o=n(e.follow);o[0]||(o=n("body"));var s={width:o.outerWidth(),height:o.outerHeight(),top:o.offset().top,left:o.offset().left},l=a.find(".layui-layer-TipsG"),u=e.tips[0];e.tips[1]||l.remove();var d=e.tipsOffset,f=e.arrowOffset||[0,0],p=10,h=10;d&&("number"==typeof d?p=d:d&&d.length&&(p=void 0===d[0]?p:d[0],h=void 0===d[1]?h:d[1])),s.autoLeft=function(){e.disableAutoLeft!==!0&&s.left+r[0]-i.width()>0?(s.tipLeft=s.left+s.width-r[0],l.css({right:12,left:"auto"})):s.tipLeft=s.left+h},s.where=[function(){s.autoLeft(),s.tipTop=s.top-r[1]-p,l.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",e.tips[1])},function(){s.tipLeft=s.left+s.width+h,s.tipTop=s.top,l.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",e.tips[1])},function(){s.autoLeft(),s.tipTop=s.top+s.height+p,l.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css({"border-right-color":e.tips[1],left:s.left+s.width/2-s.tipLeft+f[0]})},function(){s.tipLeft=s.left-r[0]-h,s.tipTop=s.top,l.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",e.tips[1])}],s.where[u-1](),a.find("."+c[5]).css({"background-color":e.tips[1],"padding-right":e.closeBtn?"30px":""}),a.css({left:s.tipLeft-(e.fix?i.scrollLeft():0),top:s.tipTop-(e.fix?i.scrollTop():0)})},s.pt.move=function(){var t=this,e=t.config,a={setY:0,moveLayer:function(){var t=a.layero,e=parseInt(t.css("margin-left")),n=parseInt(a.move.css("left"));0===e||(n-=e),"fixed"!==t.css("position")&&(n-=t.parent().offset().left,a.setY=0),t.css({left:n,top:parseInt(a.move.css("top"))-a.setY})}},r=t.layero.find(e.move);return e.move&&r.attr("move","ok"),r.css({cursor:e.move?"move":"auto"}),n(e.move).on("mousedown",function(t){if(t.preventDefault(),"ok"===n(this).attr("move")){a.ismove=!0,a.layero=n(this).parents("."+c[0]);var r=a.layero.offset().left,o=a.layero.offset().top,s=a.layero.outerWidth()-6,l=a.layero.outerHeight()-6;n("#layui-layer-moves")[0]||n("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+r+"px; top:"+o+"px; width:"+s+"px; height:"+l+'px; z-index:2147483584"></div>'),a.move=n("#layui-layer-moves"),e.moveType&&a.move.css({visibility:"hidden"}),a.moveX=t.pageX-a.move.position().left,a.moveY=t.pageY-a.move.position().top,"fixed"!==a.layero.css("position")||(a.setY=i.scrollTop())}}),n(document).mousemove(function(t){if(a.ismove){var n=t.pageX-a.moveX,r=t.pageY-a.moveY;if(t.preventDefault(),!e.moveOut){a.setY=i.scrollTop();var o=i.width()-a.move.outerWidth(),s=a.setY;n<0&&(n=0),n>o&&(n=o),r<s&&(r=s),r>i.height()-a.move.outerHeight()+a.setY&&(r=i.height()-a.move.outerHeight()+a.setY)}a.move.css({left:n,top:r}),e.moveType&&a.moveLayer(),n=r=o=s=null}}).mouseup(function(){try{a.ismove&&(a.moveLayer(),a.move.remove(),e.moveEnd&&e.moveEnd()),a.ismove=!1}catch(t){a.ismove=!1}}),t},s.pt.callback=function(){function t(){var t=a.cancel&&a.cancel(e.index,i);t===!1||o.close(e.index)}var e=this,i=e.layero,a=e.config;e.openLayer(),a.success&&(2==a.type?i.find("iframe").on("load",function(){a.success(i,e.index)}):a.success(i,e.index)),o.ie6&&e.IE6(i),i.find("."+c[6]).children("a").on("click",function(){var t=n(this).index();if(0===t)a.yes?a.yes(e.index,i):a.btn1?a.btn1(e.index,i):o.close(e.index);else{var r=a["btn"+(t+1)]&&a["btn"+(t+1)](e.index,i);r===!1||o.close(e.index)}}),i.find("."+c[7]).on("click",t),a.shadeClose&&n("#layui-layer-shade"+e.index).on("click",function(){o.close(e.index)}),i.find(".layui-layer-min").on("click",function(){var t=a.min&&a.min(i);t===!1||o.min(e.index,a)}),i.find(".layui-layer-max").on("click",function(){n(this).hasClass("layui-layer-maxmin")?(o.restore(e.index),a.restore&&a.restore(i)):(o.full(e.index,a),setTimeout(function(){a.full&&a.full(i)},100))}),a.end&&(r.end[e.index]=a.end)},r.reselect=function(){n.each(n("select"),function(t,e){var i=n(this);i.parents("."+c[0])[0]||1==i.attr("layer")&&n("."+c[0]).length<1&&i.removeAttr("layer").show(),i=null})},s.pt.IE6=function(t){function e(){t.css({top:r+(a.config.fix?i.scrollTop():0)})}var a=this,r=t.offset().top;e(),i.scroll(e),n("select").each(function(t,e){var i=n(this);i.parents("."+c[0])[0]||"none"===i.css("display")||i.attr({layer:"1"}).hide(),i=null})},s.pt.openLayer=function(){var t=this;o.zIndex=t.config.zIndex,o.setTop=function(t){var e=function(){o.zIndex++,t.css("z-index",o.zIndex+1)};return o.zIndex=parseInt(t[0].style.zIndex),t.on("mousedown",e),o.zIndex}},r.record=function(t){var e=[t.width(),t.height(),t.position().top,t.position().left+parseFloat(t.css("margin-left"))];t.find(".layui-layer-max").addClass("layui-layer-maxmin"),t.attr({area:e})},r.rescollbar=function(t){c.html.attr("layer-full")==t&&(c.html[0].style.removeProperty?c.html[0].style.removeProperty("overflow"):c.html[0].style.removeAttribute("overflow"),c.html.removeAttr("layer-full"))},window.layer=o,o.getChildFrame=function(t,e){return e=e||n("."+c[4]).attr("times"),n("#"+c[0]+e).find("iframe").contents().find(t)},o.getFrameIndex=function(t){return n("#"+t).parents("."+c[4]).attr("times")},o.iframeAuto=function(t){if(t){var e=o.getChildFrame("html",t).outerHeight(),i=n("#"+c[0]+t),a=i.find(c[1]).outerHeight()||0,r=i.find("."+c[6]).outerHeight()||0;i.css({height:e+a+r}),i.find("iframe").css({height:e})}},o.iframeSrc=function(t,e){n("#"+c[0]+t).find("iframe").attr("src",e)},o.style=function(t,e){var i=n("#"+c[0]+t),a=i.attr("type"),o=i.find(c[1]).outerHeight()||0,s=i.find("."+c[6]).outerHeight()||0;a!==r.type[1]&&a!==r.type[2]||(i.css(e),a===r.type[2]&&i.find("iframe").css({height:parseFloat(e.height)-o-s}))},o.min=function(t,e){var i=n("#"+c[0]+t),a=i.find(c[1]).outerHeight()||0;r.record(i),o.style(t,{width:180,height:a,overflow:"hidden"}),i.find(".layui-layer-min").hide(),"page"===i.attr("type")&&i.find(c[4]).hide(),r.rescollbar(t)},o.restore=function(t){var e=n("#"+c[0]+t),i=e.attr("area").split(",");e.attr("type");o.style(t,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),overflow:"visible"}),e.find(".layui-layer-max").removeClass("layui-layer-maxmin"),e.find(".layui-layer-min").show(),"page"===e.attr("type")&&e.find(c[4]).show(),r.rescollbar(t)},o.full=function(t){var e,a=n("#"+c[0]+t);r.record(a),c.html.attr("layer-full")||c.html.css("overflow","hidden").attr("layer-full",t),clearTimeout(e),e=setTimeout(function(){var e="fixed"===a.css("position");o.style(t,{top:e?0:i.scrollTop(),left:e?0:i.scrollLeft(),width:i.width(),height:i.height()}),a.find(".layui-layer-min").hide()},100)},o.title=function(t,e){var i=n("#"+c[0]+(e||o.index)).find(c[1]);i.html(t)},o.close=function(t){var e=n("#"+c[0]+t),i=e.attr("type");if(e[0]){if(i===r.type[1]&&"object"===e.attr("conType")){e.children(":not(."+c[5]+")").remove();for(var a=0;a<2;a++)e.find(".layui-layer-wrap").unwrap().hide()}else{if(i===r.type[2])try{var s=n("#"+c[4]+t)[0];s.contentWindow.document.write(""),s.contentWindow.close(),e.find("."+c[5])[0].removeChild(s)}catch(l){}e[0].innerHTML="",e.remove()}n("#layui-layer-moves, #layui-layer-shade"+t).remove(),o.ie6&&r.reselect(),r.rescollbar(t),n(document).off("keydown",r.enter),"function"==typeof r.end[t]&&r.end[t](),delete r.end[t]}},o.closeAll=function(t){n.each(n("."+c[0]),function(){var e=n(this),i=t?e.attr("type")===t:1;i&&o.close(e.attr("times")),i=null})};var l=o.cache||{},u=function(t){return l.skin?" "+l.skin+" "+l.skin+"-"+t:""};o.prompt=function(t,e){t=t||{},"function"==typeof t&&(e=t);var i,a=2==t.formType?'<textarea class="layui-layer-input">'+(t.value||"")+"</textarea>":function(){return'<input type="'+(1==t.formType?"password":"text")+'" class="layui-layer-input" value="'+(t.value||"")+'">'}();return o.open(n.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:a,skin:"layui-layer-prompt"+u("prompt"),success:function(t){i=t.find(".layui-layer-input"),i.focus()},yes:function(n){var a=i.val();""===a?i.focus():a.length>(t.maxlength||500)?o.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(t.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",i,{tips:1}):e&&e(a,n,i)}},t))},o.tab=function(t){t=t||{};var e=t.tab||{};return o.open(n.extend({type:1,skin:"layui-layer-tab"+u("tab"),title:function(){var t=e.length,n=1,i="";if(t>0)for(i='<span class="layui-layer-tabnow">'+e[0].title+"</span>";n<t;n++)i+="<span>"+e[n].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var t=e.length,n=1,i="";if(t>0)for(i='<li class="layui-layer-tabli xubox_tab_layer">'+(e[0].content||"no content")+"</li>";n<t;n++)i+='<li class="layui-layer-tabli">'+(e[n].content||"no  content")+"</li>";return i}()+"</ul>",success:function(e){var i=e.find(".layui-layer-title").children(),a=e.find(".layui-layer-tabmain").children();i.on("mousedown",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var i=n(this),r=i.index();i.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),a.eq(r).show().siblings().hide(),"function"==typeof t.change&&t.change(r)})}},t))},o.photos=function(t,e,i){function a(t,e,n){var i=new Image;return i.src=t,i.complete?e(i):(i.onload=function(){i.onload=null,e(i)},void(i.onerror=function(t){i.onerror=null,n(t)}))}var r={};if(t=t||{},t.photos){var s=t.photos.constructor===Object,c=s?t.photos:{},l=c.data||[],d=c.start||0;if(r.imgIndex=(0|d)+1,t.img=t.img||"img",s){if(0===l.length)return o.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var f=n(t.photos),p=function(){l=[],f.find(t.img).each(function(t){var e=n(this);e.attr("layer-index",t),l.push({alt:e.attr("alt"),pid:e.attr("layer-pid"),src:e.attr("layer-src")||e.attr("src"),thumb:e.attr("src")})})};if(p(),0===l.length)return;if(e||f.on("click",t.img,function(){var e=n(this),i=e.attr("layer-index");o.photos(n.extend(t,{photos:{start:i,data:l,tab:t.tab},full:t.full}),!0),p()}),!e)return}r.imgprev=function(t){r.imgIndex--,r.imgIndex<1&&(r.imgIndex=l.length),r.tabimg(t)},r.imgnext=function(t,e){r.imgIndex++,r.imgIndex>l.length&&(r.imgIndex=1,e)||r.tabimg(t)},r.keyup=function(t){if(!r.end){var e=t.keyCode;t.preventDefault(),37===e?r.imgprev(!0):39===e?r.imgnext(!0):27===e&&o.close(r.index)}},r.tabimg=function(e){l.length<=1||(c.start=r.imgIndex-1,o.close(r.index),o.photos(t,!0,e))},r.event=function(){r.bigimg.hover(function(){r.imgsee.show()},function(){r.imgsee.hide()}),r.bigimg.find(".layui-layer-imgprev").on("click",function(t){t.preventDefault(),r.imgprev()}),r.bigimg.find(".layui-layer-imgnext").on("click",function(t){t.preventDefault(),r.imgnext()}),n(document).on("keyup",r.keyup)},r.loadi=o.load(1,{shade:!("shade"in t)&&.9,scrollbar:!1}),a(l[d].src,function(e){o.close(r.loadi),r.index=o.open(n.extend({type:1,area:function(){var i=[e.width,e.height],a=[n(window).width()-50,n(window).height()-50];return!t.full&&i[0]>a[0]&&(i[0]=a[0],i[1]=i[0]*e.height/e.width),[i[0]+"px",i[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+u("photos"),content:'<div class="layui-layer-phimg"><img src="'+l[d].src+'" alt="'+(l[d].alt||"")+'" layer-pid="'+l[d].pid+'"><div class="layui-layer-imgsee">'+(l.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(i?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(l[d].alt||"")+"</a><em>"+r.imgIndex+"/"+l.length+"</em></span></div></div></div>",success:function(e,n){r.bigimg=e.find(".layui-layer-phimg"),r.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar"),r.event(e),t.tab&&t.tab(l[d],e)},end:function(){r.end=!0,n(document).off("keyup",r.keyup)}},t))},function(){o.close(r.loadi),o.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){l.length>1&&r.imgnext(!0,!0)}})})}},r.run=function(){n=jQuery,i=n(window),c.html=n("html"),o.open=function(t){var e=new s(t);return e.index}},r.run(),e.layer=o},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){u.push(t)}function o(t){var e=u.indexOf(t);~e&&u.splice(e,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gallery=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(313),l=1,u=[],d={showNav:!0,direction:l,navDirection:l,thumbWidth:108,thumbHeight:50,galleryWidth:500,galleryHeight:282,navOffset:4,navAmountInView:4,navMinLimit:1},f=5e3,p=700,h=".gallery-display-box",v=".gallery-photo",m=".gallery-video-cover",y=".gallery-video-button",g=".gallery-nav",b=".gallery-prev",_=".gallery-next",x=".gallery-mask",w=".gallery-nav-list",j="gallery-photo-active",k=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];a(this,t),this.option=Object.assign({},d,n),this.container=$(e),0!==this.container.length&&(this.option.pictures?this.pictures=this.option.pictures.slice():this.pictures=this.collectPictures(),this.length=this.pictures.length,this.length<=1||(this.containerWidth=this.option.galleryWidth,this.containerHeight=this.option.galleryHeight,this.currentIndex=0,this.nextIndex=0,this.timer=null,this.navVisible=!1,this.navChanging=!1,this.displayChanging=!1,this.changing=!1,this.hovering=!1,this.videoPlaying=!1,this.option.direction==l?(this.positionProperty="left",this.displayChangeStep=this.option.galleryWidth):(this.positionProperty="top",this.displayChangeStep=this.option.galleryHeight),this.option.navDirection==l?(this.navPositionProperty="left",this.thumbChangeStep=this.option.thumbWidth):(this.navPositionProperty="top",this.thumbChangeStep=this.option.thumbHeight),this.initialize(),this.initializeDisplay(),this.length>this.option.navMinLimit&&this.option.showNav&&this.initializeNav(),this.option.autoChange&&this.startAutoChange(),r(this)))}return s(t,[{key:"initialize",value:function(){var t=this;this.container.hover(function(){t.hovering=!0,t.stopAutoChange()},function(){t.hovering=!1,t.startAutoChange()})}},{key:"collectPictures",value:function(){return this.container.find(v).map(function(){var t=$(this);return{picture:t.data("src"),thumb:t.data("thumb"),type:t.data("type"),video:t.data("video"),loaded:!1,element:t}}).toArray()}},{key:"getPicture",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.pictures[t]}},{key:"getNextIndex",value:function(){return(this.currentIndex+1)%this.length}},{key:"getPrevIndex",value:function(){return(this.length+this.currentIndex-1)%this.length}},{key:"startAutoChange",value:function(){this.stopAutoChange(),this.autoChange()}},{key:"stopAutoChange",value:function(){clearTimeout(this.timer)}},{key:"autoChange",value:function(){var t=this;this.videoPlaying||(this.timer=setTimeout(function(){t.change(t.getNextIndex())},f))}},{key:"change",value:function(t,e){this.changing||t==this.currentIndex||(e||(e=t<this.currentIndex?-1:1),this.nextIndex=t,this.changing=!0,this.videoPlaying=!1,this.changeDisplay(e),this.option.showNav&&this.changeNav(),this.currentIndex=this.nextIndex)}},{key:"endChange",value:function(){this.displayChanging||this.navChanging||(this.changing=!1,this.hovering||this.startAutoChange())}},{key:"initializeNav",value:function(){var t,e,n=this,i=this;this.container.find(g).length&&(t=this.container.find(w),e=t.children(),this.option.navDirection==l?t.width(this.length*this.option.thumbWidth):t.height(this.length*this.option.thumbHeight),this.pictures.forEach(function(t,i){e.eq(i).click(function(){this.change(i)}.bind(n))}),this.container.find(b).click(function(){i.change(i.getPrevIndex(),-1)}),this.container.find(_).click(function(){i.change(i.getNextIndex(),1)}))}},{key:"changeNav",value:function(){var t,e,n=this,a=this.container.find(w),r=this.container.find(x);t=Math.max(0,this.nextIndex-this.option.navAmountInView+1)*this.thumbChangeStep,e=this.thumbChangeStep*this.nextIndex-t,n.navChanging=!0,r.animate(i({},this.navPositionProperty,e+this.option.navOffset),p),a.animate(i({},this.navPositionProperty,-t),p,function(){n.navChanging=!1,n.endChange()})}},{key:"initializeDisplay",value:function(){var t=this,e=this,n=this.currentIndex,i=this.containerWidth;this.container.find(v).each(function(t){$(this).css(e.positionProperty,n==t?0:-i)}),this.pictures.forEach(function(e){switch(e.type){case"video":t.initializeVideo(e)}})}},{key:"createVideo",value:function(t,e,n){return $("<iframe />").attr({frameborder:0,scrolling:"no",width:e,height:n,src:t})}},{key:"initializeVideo",value:function(t){function e(){o.resetVideo(t)}var n={f:t.video,c:0,b:1,p:1,i:t.picture,e:0,loaded:"ckLoadedHandler"},i=this.option.galleryWidth,a=this.option.galleryHeight,r=[t.video],o=this,s=t.element.find(m),l=t.element.find(y),u=$("<div />").width(i).height(a);u.hide().appendTo(t.element),t.videoContainer=u,t.videoCover=s,window.playerstop=e,l.click(function(){t.videoObject||(c.CKobject.embed(cdnConfig.url+"/site/static/js/plugins/ckplayer/6.8/ckplayer.swf",u[0],"J_Player",i,a,!1,n,r),t.videoObject=c.CKobject.getObjectById("J_Player")),s.hide(),u.show(),$.isPlainObject(t.videoObject)&&t.videoObject.videoPlay(),o.videoPlaying=!0,o.stopAutoChange()})}},{key:"resetVideo",value:function(t){t.videoCover.show(),t.videoContainer.hide(),$.isPlainObject(t.videoObject)?(t.videoObject.videoPause(),t.videoObject.videoSeek(0)):t.videoObject=null}},{key:"changeDisplay",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=this,n=this.positionProperty,a=this.getPicture(this.currentIndex),r=this.getPicture(this.nextIndex);this.displayChanging=!0,r.element.css(n,t*this.containerWidth),"video"===a.type&&this.resetVideo(a),a.element.addClass(j),r.element.addClass(j),this.container.find(h).stop(!0,!0).animate(i({},n,-this.containerWidth*t),p,function(){$(this).css(n,0),r.element.css(n,0),a.element.css(n,-e.containerWidth).removeClass(j),e.displayChanging=!1,e.endChange()})}},{key:"destroy",value:function(){o(this)}}]),t}();k.create=function(){return new(Function.prototype.bind.apply(k.apply,[null].concat(Array.prototype.slice.call(arguments))))},e.Gallery=k},function(module,exports){"use strict";function ckcpt(){var t="";return t}function ckstyle(){var t={cpath:"",language:"",flashvars:"",setup:"1,1,1,1,1,2,0,1,2,0,0,1,200,0,2,1,0,1,1,1,1,10,3,0,1,2,3000,0,0,0,0,1,1,1,1,1,1,250,0,90,0,0,0",pm_bg:"0x000000,100,230,180",mylogo:"logo.swf",pm_mylogo:"1,1,-100,-55",logo:"cklogo.png",pm_logo:"2,0,-100,20",control_rel:"related.swf,ckplayer/related.xml,0",control_pv:"Preview.swf,105,2000",pm_repc:"",pm_spac:"|",pm_fpac:"file->f",pm_advtime:"2,0,-110,10,0,300,0",pm_advstatus:"1,2,2,-200,-40",pm_advjp:"1,1,2,2,-100,-40",pm_padvc:"2,0,-13,-13",pm_advms:"2,2,-46,-67",pm_zip:"1,1,-20,-8,1,0,0",pm_advmarquee:"1,2,50,-70,50,20,0,0x000000,50,0,20,1,30,2000",pm_glowfilter:"1,0x01485d, 100, 6, 3, 10, 1, 0, 0",advmarquee:escape('{a href="http://www.ckplayer.com"}{font color="#FFFFFF" size="12" face="Microsoft YaHei"}这里可以放文字广告，播放器默认使用这里设置的广告内容，如果不想在这里使用可以清空这里的内容，如果想在页面中实时定义滚动文字广告内容，可以清空这里的内容，然后在页面中设置广告函数。{/font}{/a}'),mainfuntion:"",flashplayer:"",calljs:"ckplayer_status,ckadjump,playerstop,ckmarqueeadv",myweb:escape(""),cpt_lights:"1",cpt_share:"ckplayer/share.xml",cpt_list:ckcpt()};return t}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},CKobject={_K_:function(t){return"string"==typeof t?document.getElementById(t):t},_T_:!1,_M_:!1,_G_:!1,_Y_:!1,_I_:null,_J_:0,_O_:{},uaMatch:function(t,e,n,i,a,r,o,s,c){var l=e.exec(t);return null!=l?{b:"IE",v:l[2]||"0"}:(l=n.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:(l=i.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:(l=a.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:(l=r.exec(t),null!=l?{b:l[2]||"",v:l[1]||"0"}:(l=o.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:(l=s.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:(l=c.exec(t),null!=l?{b:l[1]||"",v:l[2]||"0"}:{b:"unknown",v:"0"})))))))},browser:function(){var t=navigator.userAgent,e=/(msie\s|trident.*rv:)([\w.]+)/,n=/(firefox)\/([\w.]+)/,i=/(opera).+version\/([\w.]+)/,a=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,o=/(safari)\/([\w.]+)/,s=/(mozilla)\/([\w.]+)/,c=/(mobile)\/([\w.]+)/,l=t.toLowerCase(),u=this.uaMatch(l,e,n,i,a,r,o,s,c);if(u.b)var d=u.b,f=u.v;return{B:d,V:f}},Platform:function(){var t="",e=navigator.userAgent,n=(navigator.appVersion,{iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,webKit:e.indexOf("AppleWebKit")>-1,trident:e.indexOf("Trident")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,presto:e.indexOf("Presto")>-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),webApp:e.indexOf("Safari")==-1});for(var i in n)if(n[i]){t=i;break}return t},isHTML5:function(){return!!document.createElement("video").canPlayType},getType:function(){return this._T_},getVideo:function(){var t="",e=this._E_.v;if(e&&e.length>1)for(var n=0;n<e.length;n++){var i=e[n].split("->");i.length>=1&&""!=i[0]&&(t+='<source src="'+i[0]+'"'),i.length>=2&&""!=i[1]&&(t+=' type="'+i[1]+'"'),t+=">"}return t},getVars:function(t){var e=this._A_;return"undefined"==typeof e?null:t in e?e[t]:null},getParams:function(){var t="";return this._A_&&(1==parseInt(this.getVars("p"))&&(t+=' autoplay="autoplay"'),1==parseInt(this.getVars("e"))&&(t+=' loop="loop"'),2==parseInt(this.getVars("p"))&&(t+=' preload="metadata"'),this.getVars("i")&&(t+=' poster="'+this.getVars("i")+'"')),t},getpath:function(t){var e="CDEFGHIJKLMNOPQRSTUVWXYZcdefghijklmnopqrstuvwxyz",n=t.substr(0,1);if(e.indexOf(n)>-1&&(t.substr(0,4)==n+"://"||t.substr(0,4)==n+":\\"))return t;var i=unescape(window.location.href).replace("file:///",""),a=parseInt(document.location.port),r=document.location.protocol+"//"+document.location.hostname,o="",s="",c="",l=0,u=unescape(t).split("//");u.length>0&&(o=u[0]+"//");var d="http|https|ftp|rtsp|mms|ftp|rtmp|file",f=d.split("|");80!=a&&a&&(r+=":"+a);for(var p=0;p<f.length;p++)if(f[p]+"://"==o){l=1;break}if(0==l)if("/"==t.substr(0,1))c=r+t;else{s=i.substring(0,i.lastIndexOf("/")+1).replace("\\","/");var n=t.replace("../","./"),r=n.split("./"),h=r.length,u=n.replace("./",""),v=s.split("/"),m=v.length-h;for(p=0;p<m;p++)c+=v[p]+"/";c+=u}else c=t;return c},getXhr:function(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t},getX:function getX(){var f="ckstyle()";this.getVars("x")&&1!=parseInt(this.getVars("c"))&&(f=this.getVars("x")+"()");try{"object"==_typeof(eval(f))&&(this._X_=eval(f))}catch(e){try{"object"==_typeof(eval(ckstyle))&&(this._X_=ckstyle())}catch(e){this._X_=ckstyle()}}},getSn:function(t,e){return e>=0?this._X_[t].split(",")[e]:this._X_[t]},getUrl:function(t,e){var n=this,i=["get","utf-8"];if(t&&2==t.length){var a=t[0],r=t[1].split("/");r.length>=2&&(i[0]=r[1]),r.length>=3&&(i[1]=r[2]),this.ajax(i[0],i[1],a,function(t){if(t&&"error"!=t){var i="",a=t;if(t.indexOf("}")>-1){for(var r=t.split("}"),o=0;o<r.length-1;o++){i+=r[o]+"}";var s=r[o].replace("{","").split("->");2==s.length&&(n._A_[s[0]]=s[1])}a=r[r.length-1]}n._E_.v=a.split(","),e?n.showHtml5():(n.changeParams(i),n.newAdr())}})}},getflashvars:function(t){var e="",n=0;if(t)for(var i in t)n>0&&(e+="&"),"f"==i&&t[i]&&!this.getSn("pm_repc",-1)&&(t[i]=this.getpath(t[i]),t[i].indexOf("&")>-1&&(t[i]=encodeURIComponent(t[i]))),"y"==i&&t[i]&&(t[i]=this.getpath(t[i])),e+=i+"="+t[i],n++;return e},getparam:function(t){var e="",n="",i={allowScriptAccess:"always",allowFullScreen:!0,quality:"high",bgcolor:"#000"};if(t)for(var a in t)i[a]=t[a];for(var r in i)e+=r+'="'+i[r]+'" ',n+='<param name="'+r+'" value="'+i[r]+'" />';return e=e.replace("movie=","src="),{w:e,v:n}},getObjectById:function(t){var e=this;if(e._T_)return e._V_=e._K_(t),e;var n=null,i=e._K_(t),a="embed";if(i&&"OBJECT"==i.nodeName)if("undefined"!=typeof i.SetVariable)n=i;else{var r=i.getElementsByTagName(a)[0];r&&(n=r)}return n},ajax:function(t,e,n,i){var a=this.getXhr(),r=[],o="";"get"==t?(o=n.indexOf("?")>-1?n+"&t="+(new Date).getTime():n+"?t="+(new Date).getTime(),a.open("get",o)):(r=n.split("?"),n=r[0],o=r[1],a.open("post",n,!0)),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("charset",e),"post"==t?a.send(o):a.send(null),a.onreadystatechange=function(){if(4==a.readyState){var t=a.responseText;i(""!=t?t:null)}}},addListener:function addListener(e,f){var o=this._V_;switch(e){case"time":e="timeupdate",this.AT=f,f=this.addListenerTime;break;case"totaltime":return void(this.ATAll=f)}if("string"==typeof f&&(f=eval(f)),o.addEventListener)try{o.addEventListener(e,f,!1)}catch(e){this.getNot()}else if(o.attachEvent)try{o.attachEvent("on"+e,f)}catch(e){this.getNot()}else o["on"+e]=f},removeListener:function removeListener(e,f){var o=this._V_;switch(e){case"time":e="timeupdate",this.AT=null;break;case"totaltime":return void(this.ATAll=null)}if("string"==typeof f&&(f=eval(f)),o.removeEventListener)try{o.removeEventListener(e,f,!1)}catch(e){this.getNot()}else if(o.detachEvent)try{o.detachEvent("on"+e,f)}catch(e){this.getNot()}else o["on"+e]=null},Flash:function(){var t=!1,e=0;if(document.all||this.browser().B.toLowerCase().indexOf("ie")>-1)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t=!0;var i=n.GetVariable("$version");e=parseInt(i.split(" ")[1].split(",")[0])}catch(a){}else if(navigator.plugins&&navigator.plugins.length>0){var n=navigator.plugins["Shockwave Flash"];if(n){t=!0;for(var r=n.description.split(" "),o=0;o<r.length;++o)isNaN(parseInt(r[o]))||(e=parseInt(r[o]))}}return{f:t,v:e}},embed:function(t,e,n,i,a,r,o,s,c,l){var u=["all"];r?this.isHTML5()?this.embedHTML5(e,n,i,a,s,o,u,l):this.embedSWF(t,e,n,i,a,o,c):this.Flash().f&&parseInt(this.Flash().v)>10?this.embedSWF(t,e,n,i,a,o,c):this.isHTML5()?this.embedHTML5(e,n,i,a,s,o,u,l):this.embedSWF(t,e,n,i,a,o,c)},embedSWF:function(t,e,n,i,a,r,o){n||(n="ckplayer_a1"),o||(o={bgcolor:"#FFF",allowFullScreen:!0,allowScriptAccess:"always",wmode:"transparent"}),this._A_=r,this.getX();var s="undefined",c=!1,l=document,u="http://www.macromedia.com/go/getflashplayer",f='<a href="'+u+'" target="_blank">请点击此处下载安装最新的flash插件</a>',p={w:"您的网页不符合w3c标准，无法显示播放器",f:"您没有安装flash插件，无法播放视频，"+f,v:"您的flash插件版本过低，无法播放视频，"+f},h=_typeof(l.getElementById)!=s&&_typeof(l.getElementsByTagName)!=s&&_typeof(l.createElement)!=s,v='id="'+n+'" name="'+n+'" ',m="",y="";o.movie=t,o.flashvars=this.getflashvars(r),i==-1&&(d=!0,this._K_(e).style.width="100%",i="100%"),m+='<object pluginspage="http://www.macromedia.com/go/getflashplayer" ',m+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ',m+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=11,3,0,0" ',m+='width="'+i+'" ',m+='height="'+a+'" ',m+=v,m+='align="middle">',m+=this.getparam(o).v,m+="<embed ",m+=this.getparam(o).w,m+=' width="'+i+'" height="'+a+'" name="'+n+'" id="'+n+'" align="middle" '+v,m+='type="application/x-shockwave-flash" pluginspage="'+u+'" />',m+="</object>",h?this.Flash().f?this.Flash().v<11?(y=p.v,c=!0):(y=m,this._T_=!1):(y=p.f,c=!0):(y=p.w,c=!0),y&&(this._K_(e).innerHTML=y),c&&(this._K_(e).style.color="#0066cc",this._K_(e).style.lineHeight=this._K_(e).style.height,this._K_(e).style.textAlign="center")},embedHTML5:function(t,e,n,i,a,r,o,s){this._E_={c:t,p:e,w:n,h:i,v:a,s:o,j:!(void 0!=s&&!s)},this._A_=r,this.getX();var c=this.browser().B,l=this.browser().V,u=l.split("."),d=u[0],f=c+l,p=c+d,h="",v=!1,m=this.Flash().f,y=!1;o||(o=["iPad","iPhone","ios"]);for(var g=0;g<o.length;g++){if(h=o[g],"all"==h.toLowerCase()){v=!0;break}if("all+false"==h.toLowerCase()&&!m){v=!0;break}if(h.indexOf("+")>-1?(h=h.split("+")[0],y=!0):y=!1,this.Platform()==h||f==h||p==h||c==h){if(!y){v=!0;break}if(!m){v=!0;break}}}if(v){if(a){var b=a[0].split("->");if(b&&2==b.length&&b[1].indexOf("ajax")>-1)return void this.getUrl(b,!0)}this.showHtml5()}},status:function status(){this._H_=parseInt(this.getSn("setup",20));var f="ckplayer_status";""!=this.getSn("calljs",0)&&(f=this.getSn("calljs",0));try{if("function"==typeof eval(f))return this._L_=eval(f),this._M_=!0,!0}catch(e){try{if("function"==typeof eval(ckplayer_status))return this._L_=ckplayer_status,this._M_=!0,!0}catch(e){return!1}}return!1},showHtml5:function showHtml5(){var C=this,p=C._E_.p,a=C._E_.v,c=C._E_.c,j="",b=!1,s=this._E_.v,w=C._E_.w,h=C._E_.h,d=!1,r="";1==s.length&&(r=' src="'+s[0].split("->")[0]+'"'),w==-1&&(d=!0,C._K_(c).style.width="100%",w="100%"),w.toString().indexOf("%")>-1&&(w="100%"),h.toString().indexOf("%")>-1&&(h="100%"),C._E_.j&&(j=' controls="controls"');var v="<video"+j+r+' id="'+p+'" width="'+w+'" height="'+h+'"'+C.getParams()+" webkit-playsinline>"+C.getVideo()+"</video>";if(C._K_(c).innerHTML=v,C._K_(c).style.backgroundColor="#000",C._V_=C._K_(p),d||(C._K_(c).style.width=C._E_.w.toString().indexOf("%")>-1?C._K_(c).offsetWidth*parseInt(C._E_.w)*.01+"px":C._V_.width+"px",C._K_(c).style.height=C._E_.h.toString().indexOf("%")>-1?C._K_(c).offsetHeight*parseInt(C._E_.h)*.01+"px":C._V_.height+"px"),C._P_=!1,C._T_=!0,""!=C.getVars("loaded")){var f=C.getVars("loaded")+"()";try{"function"==typeof eval(f)&&eval(f)}catch(e){try{"function"==typeof eval(loadedHandler)&&loadedHandler()}catch(e){}}}C.status(),C.addListener("play",C.playHandler),C.addListener("pause",C.playHandler),C.addListener("error",C.errorHandler),C.addListener("emptied",C.errorHandler),C.addListener("loadedmetadata",C.loadedMetadataHandler),C.addListener("ended",C.endedHandler),C.addListener("volumechange",C.volumeChangeHandler),(""!=C.getVars("m")&&null!=C.getVars("m")||parseInt(C.getSn("setup",0))>0)&&(C._K_(c).style.cursor="pointer"),(""!=C.getVars("m")&&null!=C.getVars("m")||1==parseInt(C.getSn("setup",1)))&&C.addListener("click",C.html5Click)},addListenerTime:function(){var t=CKobject;t.AT&&t.AT(t._V_.currentTime)},videoPlay:function(){this._T_&&this._V_.play()},videoPause:function(){this._T_&&this._V_.pause()},playOrPause:function(){this._T_&&(this._V_.paused?this._V_.play():this._V_.pause())},fastNext:function(){this._T_&&(this._V_.currentTime=this._V_.currentTime+10)},fastBack:function(){this._T_&&(this._V_.currentTime=this._V_.currentTime-10)},changeVolume:function(t){t<0||t>100||this._T_&&(this._V_.volume=.01*t)},videoSeek:function(t){this._T_&&(this._V_.currentTime=t)},newAddress:function(t){var e=[];if(t&&(e=this.isHtml5New(t),e&&this._T_)){this.changeParams(t);var n=e[0].split("->");if(n&&2==n.length&&n[1].indexOf("ajax")>-1)return void this.getUrl(n,!1);this._E_.v=e,this.newAdr()}},quitFullScreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},changeStatus:function(t){this._H_=t},newAdr:function(){var t=this._E_.v;this._V_.pause(),1==t.length?this._V_.src=t[0].split("->")[0]:this._V_.innerHTML=this.getVideo(),this._V_.load()},isHtml5New:function(t){if(t.indexOf("html5")==-1)return!1;for(var e=t.replace(/{/g,""),n=e.split("}"),i="",a=0;a<n.length;a++)if(n[a].indexOf("html5")>-1){i=n[a].replace("html5->","").split(",");break}return i},changeParams:function(t){if(t)for(var e=t.replace(/{/g,""),n=e.split("}"),i=0;i<n.length;i++){var a=n[i].split("->");if(2==a.length)switch(a[0]){case"p":1==parseInt(a[1])?this._V_.autoplay=!0:2==parseInt(a[1])?this._V_.preload="metadata":(this._V_.autoplay=!1,null!=this._I_&&(clearInterval(this._I_),this._I_=null));break;case"e":1==parseInt(a[1])?this._V_.loop=!0:this._V_.loop=!1;break;case"i":this._V_.poster=a[1]}}},frontAdPause:function(t){this.getNot()},frontAdUnload:function(){this.getNot()},changeFace:function(t){this.getNot()},plugin:function(t,e,n,i,a,r,o){this.getNot()},videoClear:function(){this.getNot()},videoBrightness:function(t){this.getNot()},videoContrast:function(t){this.getNot()},videoSaturation:function(t){this.getNot()},videoSetHue:function(t){this.getNot()},videoWAndH:function(t,e){this.getNot()},videoWHXY:function(t,e,n,i){this.getNot()},changeFlashvars:function(t){this.getNot()},changeMyObject:function(t,e){this.getNot()},getMyObject:function(t,e){this.getNot()},changeeFace:function(){this.getNot()},changeStyle:function(t,e){this.getNot()},promptLoad:function(){this.getNot()},promptUnload:function(){this.getNot()},marqueeLoad:function(t,e){this.getNot()},marqueeClose:function(t){this.getNot()},videoError:function(t){this.getNot()},formatUrl:function(t){this.getNot()},sendJS:function(t){this.getNot()},plugAttribute:function(t){this.getNot()},errorTextShow:function(t){this.getNot()},openUrl:function(t){window.open(t)},jsonParse:function(t){this.getNot()},promptShow:function(t,e,n){this.getNot()},screenShot:function(t,e,n,i,a){this.getNot()},fullScreen:function(){this.getNot()},allowFull:function(){this.getNot()},loadButton:function(){this.getNot()},getFile:function(){this.getNot()},textBoxShow:function(){this.getNot()},loadElement:function(){this.getNot()},textBoxClose:function(){this.getNot()},textBoxTween:function(){this.getNot()},getNot:function(){var t="The ckplayer's API for HTML5 does not exist";return t},volumeChangeHandler:function(){var t=CKobject;t._V_.muted?(t.returnStatus("volumechange:0",1),t._O_.volume=0,t._O_.mute=!0):(t._O_.mute=!1,t._O_.volume=100*t._V_.volume,t.returnStatus("volumechange:"+100*t._V_.volume,1))},endedHandler:function endedHandler(){var C=CKobject,e=parseInt(C.getVars("e"));if(C.returnStatus("ended",1),C._I_&&(clearInterval(C._I_),C._I_=null),0==e||4==e||6==e){6==e&&this.quitFullScreen();var f="playerstop()";""!=C.getSn("calljs",2)&&(f=C.getSn("calljs",2)+"()");try{if("function"==typeof eval(f))return void eval(f)}catch(e){try{if("function"==typeof eval(playerstop))return void playerstop()}catch(e){return}}}},loadedMetadataHandler:function(){var t=CKobject;t.returnStatus("loadedmetadata",1),t._O_.totalTime=t._V_.duration,t._O_.width=t._V_.width,t._O_.height=t._V_.height,t._O_.awidth=t._V_.videoWidth,t._O_.aheight=t._V_.videoHeight,t._V_.defaultMuted?(t.returnStatus("volumechange:0",1),t._O_.mute=!0,t._O_.volume=0):(t._O_.mute=!1,t._O_.volume=100*t._V_.volume,t.returnStatus("volumechange:"+100*t._V_.volume,1)),1==parseInt(t.getVars("p"))&&t.playHandler(),t.ATAll&&t.ATAll(t._V_.duration)},errorHandler:function(){CKobject.returnStatus("error",1)},playHandler:function(){var t=CKobject;if(t._V_.paused)t.returnStatus("pause",1),t.addO("play",!1),null!=t._I_&&(clearInterval(t._I_),t._I_=null);else{if(t.returnStatus("play",1),t.addO("play",!0),t._P_||(t.returnStatus("play",1),t._P_=!0),t._I_=setInterval(t.playTime,parseInt(t.getSn("setup",37))),!t._G_){t._G_=!0;for(var e in t._A_)if("g"==e&&t._A_[e]){var n=parseInt(t._A_[e]);t.videoSeek(n)}}if(!t._Y_){t._Y_=!0;for(var e in t._A_)if("j"==e&&t._A_[e]){var i=parseInt(t._A_[e]);i>0?t._J_=i:t._J_=parseInt(t._O_.totalTime)+i}}}},html5Click:function(){var t=CKobject;""!=t.getVars("m")&&null!=t.getVars("m")&&window.open(t.getVars("m"))},returnStatus:function(t,e){var n=t;3==this._H_&&(n=this._E_.p+"->"+n),this._M_&&e<=this._H_&&this._L_(n)},addO:function(t,e){this._O_[t]=e},getStatus:function(){return this._O_},playTime:function(){var t=CKobject,e=t._V_.currentTime;t._O_.time=e,t._J_>0&&e>t._J_&&(t._J_=0,t.videoSeek(t._O_.totaltime)),t.returnStatus("time:"+e,1)}};exports.CKobject=CKobject},function(t,e){"use strict";function n(){var t=location.href,e=/\brefresh\b/.test(t);return!e&&window.pageData&&(e=!!window.pageData.refresh),e}function i(t){return n()&&(t+=t.indexOf("?")===-1?"?":"&",t+=a),t}Object.defineProperty(e,"__esModule",{value:!0});var a="refresh=1",r=window.siteHost||"http://www.tuniu.com";e.config={host:r,url:{submit:function(t){return r+"/tours/"+t.productId+"/book/step1"},calendar:function(t){var e=["/papi/product/calendar"];return["productId","bookCityCode","departCityCode","backCityCode"].every(function(n){if(t[n])return e.push("/"+t[n]),!0}),i(e.join(""))},visa:function(t){var e=["/papi/product/visa"];return["productId","bookCityCode","departCityCode"].every(function(n){if(t[n])return e.push("/"+t[n]),!0}),i(e.join(""))},upgrade:function(t){var e=["/papi/product/upgrade"];return["productId","bookCityCode","departCityCode"].every(function(n){if(t[n])return e.push("/"+t[n]),!0}),i(e.join(""))},visaSend:function(){return i("/papi/product/visaSend")},visaPrint:function(t){var e=Object.keys(t).map(function(e){var n=t[e];return!!n&&(Array.isArray(n)?e+"="+n.map(function(t){return t.id+":"+t.name}).join(","):e+"="+n)}).filter(function(t){return t}).join("&");return r+"/tn?r=visa/VisaDetail/ShowEmailTemplate&"+e},couponReceive:function(t){return i("/papi/product/couponReceive/"+t.couponId)},remarkStatus:function(){return i("/papi/product/remarkStatus")},remarkList:function(){return i("/papi/product/remarkList")},guide:function(t){return i(["/papi/product/guide",t.productId].join("/"))},retail:function(t){return i(["/papi/product/retail",t.bookCode].join("/"))},login:function(){return"http://www.tuniu.com/u/login"},loginDialog:function(){var t=location.host,e=t.split(".")[0];return"https://passport.tuniu.com/login/iframe?origin="+encodeURIComponent("http://www.tuniu.com/ssoConnect/Iframe?reload=detail&domain="+e)},ask:function(t){return i(["/papi/product/ask",t.productId].join("/"))},checkName:function(t){return i(["/papi/product/checkName",t.identify].join("/"))},addAsk:function(){return i("/papi/product/addAsk")},qa:function(){return i("/papi/product/qa")},related:function(){return i("/papi/product/related")},checkFavoriteState:function(){return i("/papi/product/checkFavoriteState")},addFavorite:function(){return i("/papi/product/addFavorite")},removeFavorite:function(){return i("/papi/product/removeFavorite")},supplier:function(){return i("/papi/product/supplier")},aggregation:function(){return i("/papi/product/aggregation")},page:function(t){var e=["/tour",t.productId,t.bookCity,t.departCity,t.backCity].join("/");return i(e)},getJourneyById:function(){return i("/papi/product/getJourney")}}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){}Object.defineProperty(e,"__esModule",{value:!0}),e.createTip=e.Tip=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(311),s=function(){function t(e,n){i(this,t),this._id=(new Date).getTime()+""+Math.random(),this.$target=e,this.options=Object.assign({delay:100,type:"hover"},n),this.dialogOptions=Object.assign({type:4,tips:3,shift:0,shade:!1,fix:!1,closeBtn:!1,skin:"layui-layer-rim",area:["300px","auto"],tipsOffset:[10,-27]},this.options.dialog),this.dialogOptions.content=[this.getContent(),this.$target],this.options.delay&&this.options.hoverIncludeTip&&(this.dialogOptions.success=function(t){var e=this;t.hover(function(){clearTimeout(e.timer)},this.close.bind(this))}.bind(this)),"click"===this.options.type&&(this.dialogOptions.success=function(t){t.click(function(t){t.stopPropagation()})}),this.dialog=null,this.timer=null,this.visible=!1,this.bind()}return r(t,[{key:"bind",value:function(){switch(this.options.type){case"click":this.$target.click(this.toggle.bind(this)).click(function(t){$(document).trigger("customclick",this._id),t.stopPropagation()}.bind(this)),$(document).click(this.close.bind(this)).on("customclick",function(t,e){e!==this._id&&this.close()}.bind(this));break;case"hover":default:this.$target.hover(this.open.bind(this),this.close.bind(this))}}},{key:"getContent",value:function(){return"function"==typeof this.options.content?this.options.content():this.options.content}},{key:"toggle",value:function(){this.visible?this.close():this.open()}},{key:"open",value:function(){var t=this;$.isFunction(this.options.width)&&(this.dialogOptions.area[0]=this.options.width()+"px"),this.options.delay&&"click"!==this.options.type?(clearTimeout(this.timer),this.timer=setTimeout(function(){t.visible||(t.dialog=o.layer.open(t.dialogOptions),t.visible=!0)},this.options.delay)):(this.dialog=o.layer.open(this.dialogOptions),this.$target.addClass("expand"),this.visible=!0)}},{key:"close",value:function(){var t=this;this.options.delay&&this.options.hoverIncludeTip?(clearTimeout(this.timer),this.timer=setTimeout(function(){o.layer.close(t.dialog),t.visible=!1},this.options.delay)):(o.layer.close(this.dialog),this.$target.removeClass("expand"),clearTimeout(this.timer),this.visible=!1)}}]),t}();e.Tip=s,e.createTip=a},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){return U.lastIndex=0,U.exec(String(t))}function r(t){return z.lastIndex=0,z.exec(String(t))}function o(t){var e=W.getState("calendar");return e.some(function(e){return e.departDate===t})}function s(t){return String(t).replace(/\-/g,"/")}function c(t){var e=arguments.length<=1||void 0===arguments[1]?2:arguments[1];t=String(t);for(var n=Math.max(e-t.length,0);n>0;n--)t="0"+t;return t}function l(t){return[t.getFullYear(),c(t.getMonth()+1),c(t.getDate())].join(J)}function u(t){return"string"==typeof t&&(t=new Date(s(t))),[t.getFullYear(),c(t.getMonth()+1)].join(J)}function d(){var t=W.getState("departDate"),e=f();return t<=e.end&&t>=e.start}function f(){var t={},e=[],n=s(X+"-01"),i=new Date(n),a=new Date(n),r=void 0,o=void 0;for(i.setDate(i.getDate()-i.getDay()),a=new Date(i.getTime()),a.setDate(a.getDate()+R-1),t.start=l(i),t.end=l(a),r=new Date(s(t.start));r<=a;)o=l(r),e.push({fullDate:o,year:r.getFullYear(),month:r.getMonth(),date:r.getDate(),isInCurrentMonth:~o.indexOf(X)}),r.setDate(r.getDate()+1);return t.all=e,t}function p(){var t=f(),e={};return W.getState("calendar").filter(function(e){return e.departDate>=t.start&&e.departDate<=t.end}).forEach(function(t){e[t.departDate]=t}),{all:t.all,date:e}}function h(){var t=W.getState("calendar");return Y={},t&&t.forEach(function(t){var e=u(t.departDate);t.isRealTimePrice?Y[e]||(Y[e]=1/0):Y[e]=Math.min(t.tuniuPrice,Y[e]||1/0)}),Y}function v(){var t=W.getState("calendar");if(t&&t.length)return u(t[0].departDate)}function m(){var t,e,n=[],i=new Date(s(q+"-01"));for(e=0;e<V;e++)t=u(i),t>=Z&&t<=Q&&n.push({month:t,price:Y[t]}),i.setMonth(i.getMonth()+1);return n}function y(t){var e=new Date(s(q+"-01"));return e.setMonth(e.getMonth()+t),u(e)}function g(t,e){var n=a(t),i=a(e),r=n[1],o=n[2],s=i[1],c=i[2];return 12*(r-s)+(o-c)}function b(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=new Date(s(t+"-01"));return n.setMonth(n.getMonth()+e),u(n)}function _(t){var e=g(t,K),n=Math.floor(e/V),i=new Date(s(K+"-01"));return i.setMonth(i.getMonth()+n*V),u(i)}function x(t){var e=W.getState("calendar"),n=null;return e&&e.length&&e.some(function(e){if(e.departDate===t)return n=e,!0}),n}function w(){var t=W.getState("calendar")[0];return t?u(t.departDate):null}function j(){var t=W.getState("calendar"),e=t[t.length-1];return e?u(e.departDate):b(Z,3)}function k(t){return!!(a(t)&&t>=Z&&t<=Q)&&(X=t,!0)}function I(){et.removeClass("loading").find(".calendar-loading-mask").remove()}function T(t){return t&&t.forEach(function(t){var e=t.strategyIndex,n=(t.strategyDtos||[])[e]||{};t.isPromotion=(n.promotionDtos||[]).some(function(t){return 14===t.promotionTypeId}),t.promotionPrice=n.coupon}),t}function C(t){return tt.filter(function(e){return!e.planDate||(e.planDate||[]).some(function(e){return e==t})})}Object.defineProperty(e,"__esModule",{value:!0}),e.calendarModule=void 0;var D=n(298),S=n(310),M=n(311),O=n(303),E=i(O),P=n(317),A=n(318),N=n(319),L=n(320),J="-",R=42,F=l(new Date),V=4,G=S.template.compile(N.calendarDetailTemplate),H=200,B=void 0,U=/^(\d{4})\-(\d{2})$/,z=/^(\d{4})\-(\d{2})\-(\d{2})$/,W=void 0,Y=void 0,K=void 0,q=void 0,X=void 0,Z=void 0,Q=void 0,tt=[],et=void 0,nt=void 0,it=void 0,at=!1,rt={init:function(t){var e=this;B=t,et=$("#J_Calendar"),W=(0,D.getStore)(),W.subscribe(function(){e.load()},"change:calendar"),W.subscribe(function(){d()||(X=u(new Date(s(W.getState("departDate")))),q=_(X)),e.render()},"change:departDate"),K=u(new Date),this.fetch()},bind:function(){et.on("click",".calendar-date-enabled",function(t){rt.changeDepart($(this).data("date")),(0,L.record)("点击_头部区_价格日历_团期日历_选择团期",t)}).on("mouseenter",".calendar-date-enabled",function(){var t=$(this),e=t.data("date");clearTimeout(it),it=setTimeout(function(){rt.showDateDetail(e,t)},H)}).on("mouseleave",".calendar-date-enabled",function(){clearTimeout(it),rt.hideDateDetail($(this).data("date"))}).on("click",".calendar-month",function(t){rt.changeMonth($(this).data("month")),(0,L.record)("点击_头部区_价格日历_团期月份_切换月份",t)}).on("click",".calendar-prev",function(){rt.goNextMonth(-1)}).on("click",".calendar-next",function(){rt.goNextMonth()}),g(Q,Z)<=3?et.find(".calendar-prev, .calendar-next").remove():et.find(".calendar-prev, .calendar-next").show()},fetch:function(t){t=t||0,$.ajax({dataType:"json",url:B.calendarUrl({productId:W.getState("productId"),bookCityCode:W.getState("bookCityCode")||void 0,departCityCode:W.getState("departCityCode")||void 0,backCityCode:W.getState("backCityCode")||void 0})}).done(function(t){var e={};t&&t.success&&t.data&&(e=t.data),tt=e.promotion||[],W.dispatch({type:E.LOAD_CALENDAR_ROOM_BUDGET,data:e.roomAddBudget||{}}),W.dispatch({type:E.LOAD_CALENDAR,data:T(e.calendar)||[]})}).fail(function(){t<=5?this.fetch(t+1):W.dispatch({type:E.LOAD_CALENDAR,data:[]})}.bind(this))},load:function(){X=v()||K,q=_(X),Y=h(),Z=w()||K,Q=j()||K,q=q<Z?Z:q,et.removeClass("loading"),this.bind(),this.render(),I(),window.PERFORMANCE&&window.d&&(window.PERFORMANCE.r=(new Date).getTime()-window.d.getTime())},changeMonth:function(t){k(t)&&this.render()},goNextMonth:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];k(b(X,t))&&(this.changeMonthGroup(t),this.render())},changeMonthGroup:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=g(X,q),n=void 0;e<4&&e>=0||(n=y(t),n<Z&&(n=Z),n>Q&&(n=Q),q=n)},changeDepart:function(t){!at&&r(t)&&o(t)&&(W.dispatch({type:E.CHANGE_DEPART_DATE_TARGET,data:"calendar"}),W.dispatch({type:E.CHANGE_DEPART_DATE,data:t}))},render:function(){this.renderMonth(),this.renderDate()},renderMonth:function(){X<=Z?et.find(".calendar-prev").addClass("calendar-prev-disabled"):et.find(".calendar-prev").removeClass("calendar-prev-disabled"),X>=Q?et.find(".calendar-next").addClass("calendar-next-disabled"):et.find(".calendar-next").removeClass("calendar-next-disabled"),et.find(".calendar-months").html(S.template.compile(P.calendarMonthTemplate)({list:m(),current:X,nonEmptyMonth:Y,infinity:1/0}))},renderDate:function(){var t=p();t.current=W.getState("departDate"),t.today=F,et.find(".calendar-dates").html(S.template.compile(A.calendarDateTemplate)(t))},hideDateDetail:function(){M.layer.close(nt)},showDateDetail:function(t,e){var n=x(t);n&&(n.roomBudget=W.getState("roomBudget")[t],rt.openDateDetail(n,e))},openDateDetail:function(t,e){nt=M.layer.open({type:4,skin:"layui-layer-rim",area:["auto","auto"],content:[G(Object.assign({},t,{promotions:C(t.departDate)})),e],tips:3,shade:!1,fix:!1,closeBtn:!1,tipsOffset:[-1,-1]})},disable:function(){at=!0},enable:function(){at=!1}};e.calendarModule=rt},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calendarMonthTemplate='\n<ul>\n    <% for (var i = 0; i < list.length; i++) { %>\n        <% var item = list[i] %>\n        <li data-month="<%= item.month %>"\n            class="calendar-month\n            <% if (item.month === current) { %>calendar-month-active<% } %>\n            <% if (!item.price) { %>calendar-month-empty<% } %>">\n            <div class="calendar-month-date"><%= item.month.replace(\'-\', \'年\') + \'月\' %></div>\n            <% if (item.price) { %>\n                <% if (item.price < infinity) { %>\n                    <div class="calendar-month-price">&yen;<%= item.price %>起</div>\n                <% } else { %>\n                    <div class="calendar-month-price">实时计价</div>\n                <% } %>\n            <% } else { %>\n                <div class="calendar-month-none-price">无团期</div>\n            <% } %>\n        </li>\n    <% } %>\n</ul>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calendarDateTemplate="\n    <ul>\n        <% var weeks = ['sun', 'mon', 'tue', 'mon', 'thu', 'fri', 'sat']; %>\n        <% for(var i = 0; i < all.length; i++) { %>\n            <%\n                var currentDateObj = all[i];\n                var currentDate = currentDateObj.fullDate;\n                var dateObj = date[currentDate];\n            %>\n            <li data-date=\"<%= currentDate %>\"\n                class=\"calendar-date\n                    calendar-date-<%= weeks[i % 7] %>\n                    <%= (dateObj && currentDateObj.isInCurrentMonth) ? 'calendar-date-enabled' : ''%>\n                    <%= (currentDate === current && currentDateObj.isInCurrentMonth) ? 'calendar-date-active' : ''%>\n                    <%= currentDateObj.isInCurrentMonth ? '' : 'calendar-date-other'%>\">\n                <span class=\"calendar-date-number\">\n                    <%\n                    if (currentDate == today) {\n                        %>今天<%\n                    } else if (currentDate == backDate) {\n                        %>归来<%\n                    } else { %>\n                        <%= currentDateObj.date %>\n                    <% } %>\n                </span>\n                <% if (currentDateObj.isInCurrentMonth) { %>\n                    <div class=\"calendar-date-tag\">\n                        <% if (dateObj && dateObj.isPromotion) { %>\n                            <span class=\"calendar-date-tag-item calendar-date-tag-promotion\"></span>\n                        <% } %>\n                        <% if (dateObj && dateObj.setGroupFlag) { %>\n                            <span class=\"calendar-date-tag-item calendar-date-tag-tie\"></span>\n                        <% } %>\n                    </div>\n\n                    <div class=\"calendar-date-content\">\n                        <% if (dateObj) { %>\n                            <div class=\"calendar-date-rest\">\n                                <% if (dateObj.flightTicketType == 2) { %>\n                                    <% if (dateObj.isRealTimePrice != 1) { %>\n                                        实时\n                                    <% } else { %>\n                                        &nbsp;\n                                    <% } %>\n                                <% } else if (dateObj.stockInfo && dateObj.stockInfo.stockNum > 0) { %>\n                                    <% if(dateObj.flightTicketType == 1) { %>\n                                        位置有\n                                    <% } else if (dateObj.stockInfo.stockNum <= 9) { %>\n                                        余<%= dateObj.stockInfo.stockNum %>\n                                    <% } else { %>\n                                        充足\n                                    <% } %>\n                                <% } else { %>\n                                    &nbsp;\n                                <% } %>\n                            </div>\n                            <% if (dateObj.isRealTimePrice == 1) { %>\n                                <div class=\"calendar-date-price\">实时计价</div>\n                            <% } else {%>\n                                <div class=\"calendar-date-price\">&yen;<%= dateObj.tuniuPrice %>起</div>\n                            <% } %>\n                        <% } %>\n                    </div>\n                <% } %>\n            </li>\n        <% } %>\n\n    </ul>\n"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calendarDetailTemplate='\n<div class="calendar-detail">\n    <div class="calendar-detail-price">\n        <% if (isRealTimePrice) { %>\n            实时计价\n        <% } else { %>\n            <% if (tuniuPrice) { %>\n                <span>成人价：<strong>&yen;<%= tuniuPrice %></strong></span>\n            <% } %>\n\n            <% if(excludeChildFlag) { %>\n                <span>不支持儿童预订</span>\n            <% } else if(tuniuChildPrice) { %>\n                <span>儿童价：<strong>&yen;<%= tuniuChildPrice %></strong></span>\n            <% } %>\n\n            <% if (roomBudget) { %>\n                <span>单房差：<strong>&yen;<%= roomBudget %></strong></span>\n            <% } %>\n        <% } %>\n\n    </div>\n\n    <% if (isRealTimePrice != 1 && startPrice != tuniuPrice) { %>\n        <div class="calendar-detail-favor">\n            *最低优惠价 <strong>&yen;<%= startPrice %></strong> = 途牛成人价 &yen;<%= tuniuPrice %> - 最大优惠金额 &yen;<%= tuniuPrice - startPrice %>\n        </div>\n    <% } %>\n\n    <% if (isRealTimePrice != 1 && flightTicketType == 2) { %>\n        <div class="calendar-detail-real">\n            本起价对应的机票为实时机票，预订过程中可能会发生价格或位置的变更，请以占位价格为准。\n        </div>\n    <% } %>\n\n    <% if (isRealTimePrice == 1) { %>\n        <div class="calendar-detail-real">\n            当前团期为实时计价团期，预订过程中会根据您所选择的出游项目和优惠活动实时计算价格。\n        </div>\n    <% } %>\n\n    <% if (promotions && promotions.length) { %>\n        <div class="calendar-detail-activity">\n            <div class="calendar-detail-activity-title">团期可选优惠活动：</div>\n            <div class="calendar-detail-activity-list">\n                <% for (var i = 0; i < promotions.length; i++) { %>\n                    <div class="calendar-detail-activity-item"><span><%= promotions[i].name %></span></div>\n                <% } %>\n            </div>\n        </div>\n    <% } %>\n    <% if (deadLineTime) { %>\n        <div class="calendar-detail-deadline">\n            本团期报名截止时间：<%= deadLineTime %>前\n        </div>\n    <% } %>\n    <% if (setGroupFlag) { %>\n        <div class="calendar-detail-tip">\n        *本团期铁定成团，不发团有赔偿\n        </div>\n    <% } %>\n</div>\n'},function(t,e){"use strict";function n(t,e){return}Object.defineProperty(e,"__esModule",{value:!0}),e.record=n},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t=j.getState("departCity"),e=j.getState("allBackCities")||{},n=e[t.code];return n||[]}function o(){window.location=k.pageUrl({productId:j.getState("productId"),bookCity:j.getState("bookCityCode"),departCity:j.getState("departCity").code,backCity:j.getState("backCity").code})}function s(t,e){var n=void 0;return e&&(n=e.filter(function(e){return e.code==t}).map(function(t){return Object.assign({},t)}),n=n[0]),n||null}function c(t,e){var n=!1;return t&&e&&e.pinyin&&(n=~t.indexOf(e.pinyin.slice(0,1).toUpperCase())),!!n}Object.defineProperty(e,"__esModule",{value:!0}),e.cityModule=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(298),d=n(310),f=n(303),p=i(f),h=n(315),v=n(322),m=n(323),y=n(324),g=n(320),b=["ABCDEFG","HIJKL","MNOPQRST","UVWXYZ"],_=d.template.compile(v.resourceCityTabTemplate),x=d.template.compile(m.resourceCityDropTemplate),w=d.template.compile(y.resourceCityCombineTemplate),j=void 0,k=void 0,I={init:function(t){var e=$("#J_ResourceDepartCity"),n=$("#J_ResourceBackCity"),i=$("#J_ResourceBackCityRow"),a=$("#J_ResourceCombine"),s=void 0,c=void 0,l=void 0;k=t,j=(0,u.getStore)(),e.length&&(s=new T(e,{selected:j.getState("departCity"),data:function(){return j.getState("allDepartCities")},hotData:function(){return j.getState("hotDepartCities")},onchange:function(t){j.dispatch({type:p.CHANGE_DEPART_CITY,data:t}),(0,g.record)("点击_头部区_人数/日期/城市区_出发城市_切换出发城市")}})),n.length&&(c=new T(n,{type:"back",data:function(){return r()},onchange:function(t){j.dispatch({type:p.CHANGE_BACK_CITY,data:t}),(0,g.record)("点击_头部区_人数/日期/城市区_出发城市_切换归来城市")}})),l=j.getState("connection"),l&&1==l.isSupportConnection&&!l.needReplace&&new h.Tip(a,{type:"click",content:function(){return w({connection:j.getState("connection")||{}})},dialog:{area:["500px","auto"],tipsOffset:[10,-265],arrowOffset:[-75,0],disableAutoLeft:!0}}),j.subscribe(function(){var t=r();s&&s.set(j.getState("departCity")),t&&t.length&&(1===t.length?(j.dispatch({type:p.CHANGE_BACK_CITY,data:t[0]}),i.hide()):(c.updateTotal(t.length),c.reload(),i.show()))},"change:departCity"),j.subscribe(function(){o()},"change:backCity");var d=r();d&&d.length>1&&(c.updateTotal(d.length),c.reload(),j.getState("backCity")&&c.set(j.getState("backCity")),i.show())}},T=function(){function t(e,n){a(this,t),this.options=n||{},this.$container=$(e),this.$drop=this.$container.find(".resource-city-drop"),this.$selected=this.$container.find(".resource-city-more-selected"),this.$dropTab=this.$drop.find(".resource-city-drop-head"),this.$dropList=this.$drop.find(".resource-city-drop-list"),this.dropInited=!1,this.currentTab=this.getDefaultTab(),this.value=n.selected?Object.assign({},n.selected):null,this.bind()}return l(t,[{key:"bind",value:function(){var t=this,e=$(document);e.click(function(){t.hideDrop()}).on("customclick",function(e,n){"city"!==n&&t.hideDrop()}),this.$container.on("click",function(t){e.trigger("customclick","city"),t.stopPropagation()}).hover(function(){},function(){}).on("click",".resource-city-more-label",function(){t.toggleDrop()}).on("click",".resource-city-drop-tab-item",function(){t.changeTab($(this).data("tab"))}).on("click",".resource-city-drop-city-item",function(){t.change($(this).data("code")),t.hideDrop()})}},{key:"set",value:function(t){t&&t.code&&t.name&&(this.value=Object.assign({},t),this.update())}},{key:"reload",value:function(){this.value=null,this.currentTab=this.getDefaultTab(),this.update(),this.render()}},{key:"getCityList",value:function(){return this.options.data&&this.options.data()||[]}},{key:"getHotList",value:function(){return this.options.hotData&&this.options.hotData()||[]}},{key:"getCityName",value:function(){return this.value?this.value.name:"请选择"}},{key:"getCurrentGroupData",value:function(){var t=this,e=void 0;return e="hot"===this.currentTab?this.getHotList():this.getCityList().filter(function(e){return c(t.currentTab,e)}).sort(function(t,e){return t.pinyin>e.pinyin?1:-1})}},{key:"render",value:function(){this.renderTab(),this.renderCity()}},{key:"getAllTabs",value:function(){var t={},e=this.getCityList(),n=this.getHotList();e&&e.forEach(function(e){b.some(function(n){if(c(n,e))return t[n]=(t[n]||0)+1,!0})});var i=b.filter(function(e){return t[e]});return n&&n.length&&(i=["hot"].concat(i)),i}},{key:"getDefaultTab",value:function(){return this.getAllTabs()[0]}},{key:"renderTab",value:function(){var t=this.getAllTabs();this.$dropTab.html(_({list:t,current:this.currentTab||t[0]}))}},{key:"renderCity",value:function(){this.$dropList.html(x({list:this.getCurrentGroupData(),current:this.value||{code:-1}}))}},{key:"changeTab",value:function(t){this.currentTab=t,this.render()}},{key:"change",value:function(t){this.options&&this.options.onchange&&this.options.onchange(s(t,this.getCityList()))}},{key:"update",value:function(){this.$selected.html(this.getCityName())}},{key:"updateTotal",value:function(t){this.$container.find(".resource-city-more-total").text(t)}},{key:"toggleDrop",value:function(){this.$container.hasClass("expand")?this.hideDrop():this.showDrop()}},{key:"showDrop",value:function(){this.render(),this.dropInited=!0,this.$container.addClass("expand")}},{key:"hideDrop",value:function(){this.$container.removeClass("expand")}}]),t}();e.cityModule=I},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.resourceCityTabTemplate="\n<ul class=\"resource-city-drop-tab\">\n    <% for (var i = 0; i < list.length; i++) { %>\n        <li class=\"resource-city-drop-tab-item <%= current == list[i] ? 'active' : ''%>\" data-tab=\"<%= list[i] %>\"><%= list[i] == 'hot' ? '推荐城市' : list[i] %></li>\n    <% } %>\n</ul>\n"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.resourceCityDropTemplate='\n<ul class="resource-city-drop-city-city">\n<% for (var i = 0; i < list.length; i++) {%>\n    <% var item = list[i]%>\n    <li class="resource-city-drop-city-item <%= current.code == item.code ? \'selected\' : \'\'%>" data-code="<%= item.code %>">\n        <div class="resource-city-drop-city-name"><%= item.name %></div>\n        <div class="resource-city-drop-city-price"><strong>&yen;<%= item.price %></strong>起</div>\n    </li>\n<%}%>\n</ul>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.resourceCityCombineTemplate='\n<div class="resource-combine-detail">\n    <% if (connection.connectDesc) { %>\n        <div class="resource-combine-detail-head"><%= connection.connectDesc %>：</div>\n    <% } %>\n    <div class="resource-combine-detail-body">\n        <dl class="resource-combine-detail-cities">\n            <% var areaList = connection.connectCityList || [] %>\n            <% for (var areaIndex = 0, areaLength = areaList.length; areaIndex < areaLength; areaIndex++) { %>\n                <% var areaData = areaList[areaIndex] %>\n                <% if (areaData && areaData.cityList && areaData.cityList.length) { %>\n                    <dt><%= areaData.areaName %>：</dt>\n                    <dd>\n                        <% for (var cityIndex = 0; cityIndex < areaData.cityList.length; cityIndex++) { %>\n                            <span><%= areaData.cityList[cityIndex] %></span>\n                        <% } %>\n                    </dd>\n                <% } %>\n            <% } %>\n        </dl>\n        <% if (connection.connectIntroduction) { %>\n            <div class="resouce-combine-detail-tip">\n                <%= connection.connectIntroduction %>。\n            </div>\n        <% } %>\n        <% if (connection.connectTips) { %>\n            <div class="resouce-combine-detail-tip">\n                * <%= connection.connectTips %>。\n            </div>\n        <% } %>\n    </div>\n</div>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){var t=C.offset(),e=(C.width(),I.width());return t.top+=C.height()+10,t.arrowLeft=28,t.left+650>e&&(t.arrowLeft=t.arrowLeft+t.left+650-e,t.left=t.left-(t.left+650-e)),t}function r(){var t={};return w.getState("calendar").forEach(function(e){t[e.departDate]=!0}),t}function o(){return(w.getState("calendar")[0]||{}).departDate}function s(t){var e=w.getState("calendar"),n=null;return e&&e.length&&e.some(function(e){if(e.departDate===t)return n=e,!0}),n}function c(t){if(w.getState("isSupportMultipleJourney")){var e=(w.getState("multiTab")||[]).filter(function(e){return(e.applyDateList||[]).indexOf(t)!==-1})[0];return e?e.days:0}return w.getState("journeyDays")}function l(t){var e=w.getState("multiTab");return(e||[]).filter(function(e){return(e.applyDateList||[]).indexOf(t)!==-1})[0]}Object.defineProperty(e,"__esModule",{value:!0}),e.dateModule=void 0;var u=n(298),d=(n(310),n(303)),f=i(d),p=n(305),h=i(p),v=n(326),m=i(v),y=n(327),g=n(320),b=m.getYMDDate(new Date),_=4,x=200,w=void 0,j=!1,k=void 0,I=$(window),T=void 0,C=void 0,D=void 0,S=void 0,M={init:function(){w=(0,u.getStore)(),C=$("#J_ResourceDate"),T=$("#J_ResourceApplication"),D=C.find(".resource-date-selected"),S=(0,y.createDatePanel)(),w.subscribe(function(){M.bind(),M.update()},"change:calendar")},bind:function(){var t=$(document);t.click(function(){M.hideDatePicker()}).on("customclick",function(t,e){"date"!==e&&M.hideDatePicker()}),C.click(function(e){M.toggleDatePicker(),t.trigger("customclick","date"),e.stopPropagation()}),T.find("[data-role=button]").click(function(){if(k){w.dispatch({type:h.CHANG_DETAIL_JOURNEY,data:k.journeyId});var t=$("#J_DetailMultiRoute").offset();t&&I.scrollTop(t.top)}})},change:function(t){w.dispatch({type:f.CHANGE_DEPART_DATE_TARGET,data:"date"}),w.dispatch({type:f.CHANGE_DEPART_DATE,data:t}),M.update(),(0,g.record)("点击_头部区_人数/日期/城市区_出游日期_选择出游日期")},update:function(){var t=s(w.getState("departDate"));if(t){var e=t.departDate,n=m.getNextDate(e,c(e));D.html([m.formateDate(e,"MM/DD")," ",m.getWeek(e),"出发"," -- ",m.formateDate(n,"MM/DD")," ",m.getWeek(n),"返回"].join("")),w.getState("isSupportMultipleJourney")&&(k=l(e),k?T.show().find("[data-role=label]").text(["行程",k.index,"-",k.name].join("")):T.hide().find("[data-role=label]").text(""))}},toggleDatePicker:function(){j?M.hideDatePicker():M.showDatePicker()},showDatePicker:function(){var t=w.getState("departDate")||o()||b,e=new Date(m.justifyDate(t));S.open({type:2,year:e.getFullYear(),month:e.getMonth(),current:w.getState("departDate"),dateList:r(),min:m.getNowDate(),onChange:function(t){M.change(t)}},a()),j=!0},hideDatePicker:function(){S.close(),j=!1},flash:function(){function t(){n%2?C.addClass("flashed"):C.removeClass("flashed"),(n%2!==0||n<_)&&(n++,e())}function e(){setTimeout(t,x)}var n=1;t()}};e.dateModule=M},function(t,e){"use strict";function n(t){return String(t).replace(/\-/g,"/")}function i(t){var e=arguments.length<=1||void 0===arguments[1]?2:arguments[1];t=String(t);for(var n=Math.max(e-t.length,0);n>0;n--)t="0"+t;return t}function a(t){return[t.getFullYear(),i(t.getMonth()+1),i(t.getDate())].join(p)}function r(t){return"string"==typeof t&&(t=new Date(n(t))),[t.getFullYear(),i(t.getMonth()+1)].join(p)}function o(){return a(new Date)}function s(t){var e=arguments.length<=1||void 0===arguments[1]?"周":arguments[1];return"string"==typeof t&&(t=new Date(n(t))),e+h[t.getDay()]}function c(t){var e=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];return"string"==typeof t&&(t=new Date(n(t))),e.replace(/YYYY/g,t.getFullYear()).replace(/MM/g,i(t.getMonth()+1)).replace(/DD/g,i(t.getDate()))}function l(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return"string"==typeof t&&(t=new Date(n(t))),t.setDate(t.getDate()+e-1),a(t)}function u(t){var e=void 0;return e="string"==typeof t?new Date(n(t)):t}function d(t,e){var n={};return t=u(t),e=u(e),v.reduce(function(t,e){return n[e.property]=t%e.unit,parseInt(t/e.unit,10)},t-e||0),n}function f(t){var e=/(?=^.{5,255}$)(^([\w\!\#\$\%\&\'\*\+\-\.\/\?\^\_\`\{\|\}\~]+)@([a-zA-Z0-9\-]+\.)+([a-zA-Z0-9\-]+)$)/;return e.test(String(t))}Object.defineProperty(e,"__esModule",{value:!0});var p="-",h=["日","一","二","三","四","五","六"],v=[{unit:1e3,property:"millsecond"},{unit:60,property:"second"},{unit:60,property:"minute"},{unit:24,property:"hour"},{unit:1,property:"day"}];e.str2Date=u,e.justifyDate=n,e.justifyNumber=i,e.getYMDate=r,e.getYMDDate=a,e.getNowDate=o,e.getWeek=s,e.formateDate=c,e.getNextDate=l,e.getDeltaDate=d,e.checkEmail=f},function(t,e){"use strict";function n(t){return"function"==typeof t}function i(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}function a(t){return"string"==typeof t?new Date(t.replace(/\-/g,"/")):t}function r(t,e){for(e=e||2,t=parseInt(t)+"";t.length<e;)t="0"+t;return t}function o(t){return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())}function s(t,e){return"string"==typeof t&&(t=a(t)),"string"==typeof e&&(e=a(e)),Math.floor((e-t)/864e5)}function c(t,e){var n=new Date(t,e,1),i=n.getDay();return 0!==i?n.setDate(1-i):n.setDate(-6),o(n)}function l(t,e,n){var i=new Date(t,e+1,0),a=i.getDay();return 6!==a&&i.setDate(i.getDate()+6-a),s(n,i)<41&&i.setDate(i.getDate()+7),o(i)}function u(t,e){var n=new Date(t,e,1);return o(n)}function d(t,e){var n=new Date(t,e+1,0);return o(n)}function f(){return o(new Date)}function p(){this.init()}function h(t,e){var n,i=a(e.current||new Date);this.config={},this.set($.extend({},b,e)),this.__fullDate=o(i),this.__year=i.getFullYear(),this.__month=i.getMonth(),this.__date=i.getDate(),e.dateList&&$.isArray(e.dateList)&&(n={},$.each(e.dateList,function(t,e){n[e]=!0}),this.__dateList=n),this.set("min",e.min||o(new Date)),this.set("max",e.max),this.__panel=_(),this.__target=$(t),this.init()}function v(t,e){return new h(t,e||{})}Object.defineProperty(e,"__esModule",{value:!0});var m='<div class="dp-panel"><span class="dp-arrow"><i></i></span><div class="dp-btns"><div class="dp-btn dp-prev">&lt;</div><div class="dp-btn dp-next">&gt;</div></div><div class="dp-wrap"></div></div>',y='<div class="dp-box"><div class="dp-month">{month}</div><div class="dp-days"><div class="dp-weeks"><div class="dp-week dp-weekend">日</div><div class="dp-week">一</div><div class="dp-week">二</div><div class="dp-week">三</div><div class="dp-week">四</div><div class="dp-week">五</div><div class="dp-week dp-weekend">六</div></div><div class="dp-cale">{cale}</div></div></div>',g={type:1,year:2015,month:6};p.prototype={init:function(){var t=this,e=$(m);this.hovered=!1,this.prevBtn=e.find(".dp-prev"),this.nextBtn=e.find(".dp-next"),this.monthTit=e.find(".dp-month"),this.caleWrap=e.find(".dp-wrap"),this.wrap=e,this.config={type:1,year:2015,month:6},e.on("click",".dp-date-item",function(e){t.select($(e.currentTarget).data("date")),t.hovered=!1,t.wrap.hide()}),e.on("mousedown",function(t){t.stopPropagation(),t.preventDefault()}).hover(function(){t.hovered=!0},function(){t.hovered=!1}),this.nextBtn.click(function(){t.nextMonth()}),this.prevBtn.click(function(){t.prevMonth()}),e.appendTo("body")},open:function(t,e){this.set(t),this.render(),this.show(e)},show:function(t){var e=0;this.wrap.css({left:t.left,top:t.top}).show(),this.wrap.find(".dp-arrow").css({left:t.arrowLeft}),this.caleWrap.find(".dp-box").each(function(t){e+=$(this).width()}),this.caleWrap.width(e)},close:function(){this.hovered||this.wrap.hide()},select:function(t){var e,i,r,o;e=a(t),i=e.getMonth(),r=this.get("month"),o=this.get("onChange"),this.set("current",t),o&&n(o)&&o(t),i<r||i>r+this.get("type")-1?this.goMonth(e.getFullYear(),e.getMonth()):this.updateView()},goMonth:function(t,e){this.set("year",t),this.set("month",e),this.render()},prevMonth:function(){var t=new Date(this.get("year"),this.get("month")-this.get("type"),1);this.goMonth(t.getFullYear(),t.getMonth())},nextMonth:function(){var t=new Date(this.get("year"),this.get("month")+this.get("type"),1);this.goMonth(t.getFullYear(),t.getMonth())},set:function(t,e){"string"==typeof t&&void 0!==e?this.config[t]=e:this.config=$.extend({},g,t)},get:function(t){return this.config[t]},render:function(){switch(this.get("type")){case 1:this.renderSingleBox();break;default:this.renderMultiBox()}},getMonthTit:function(t,e){return(t||this.get("year"))+"年"+((void 0===e?this.get("month"):e)+1)+"月"},renderSingleBox:function(){var t=this.get("year"),e=this.get("month"),n=c(t,e),i=l(t,e,n),a=this.buildSingleView(n,i);this.caleWrap.removeClass("dp-multi").html(a)},buildSingleView:function(t,e){var n=a(t),i=f(),r=t,s=this.get("min"),c=this.get("max"),l=this.get("current"),u=this.get("dateList"),d=[],p=1,h=y;for(d.push('<div class="dp-dates">');r<=e;)d.push('<div class="dp-date '),r===i&&d.push(" dp-now"),r===l&&d.push(" dp-selected"),d.push('">'),r<s||e&&r>e||c&&r>c||u&&!u[r]?d.push('<span class="dp-date-disabled"><i>'+(r==i?"今天":n.getDate())+"</i></span>"):d.push('<a class="dp-date-item" data-date="'+r+'" href="javascript:;"><i>'+(r==i?"今天":n.getDate())+"</i></a>"),d.push("</div>"),n.setDate(n.getDate()+1),r=o(n),p++;return d.push("</div>"),h.replace(/\{month\}/,this.getMonthTit()).replace(/\{cale\}/,d.join(""))},renderMultiBox:function(){var t=this.get("type");this.caleWrap.empty();for(var e=0;e<t;e++)this.caleWrap.append(this.buildMultiSingleView(this.get("year"),this.get("month")+e));this.caleWrap.addClass("dp-multi").children().first().addClass("dp-box-l").end().last().addClass("dp-box-r")},buildMultiSingleView:function(t,e){var n,i,r=c(t,e),s=l(t,e,r),p=u(t,e),h=d(t,e),v=a(p),m=v.getFullYear(),g=v.getMonth(),b=this.get("current"),_=this.get("min"),x=this.get("max"),w=this.get("dateList"),j=a(r),k=f(),I=r,T=[],C=1,D=y;for(T.push('<div class="dp-dates">');I<=s;)n=I<_||s&&I>s||x&&I>x||w&&!w[I],i=I>=p&&I<=h,T.push('<div class="dp-date'),I===k&&T.push(" dp-now"),I===b&&I>=p&&I<=h&&T.push(" dp-selected"),n?T.push(" dp-disabled"):T.push(" dp-enabled"),i||T.push(" dp-other"),T.push('">'),i?n?T.push('<span class="dp-date-disabled"><i>'+(I==k?"今天":j.getDate())+"</i></span>"):T.push('<a class="dp-date-item" data-date="'+I+'" href="javascript:;"><i>'+(I==k?"今天":j.getDate())+"</i></a>"):T.push('<span class="dp-date-disabled"></span>'),T.push("</div>"),j.setDate(j.getDate()+1),I=o(j),C++;return T.push("</div>"),D.replace(/\{month\}/,this.getMonthTit(m,g)).replace(/\{cale\}/,T.join(""))},updateView:function(){this.caleWrap.find(".dp-selected").removeClass("dp-selected").end().find("[data-date="+this.get("current")+"]").parent().addClass("dp-selected")}};var b={type:2};h.prototype={init:function(){var t=this;this.__target.on("focus",function(){t.open()}).on("blur",function(){t.close()}).on("change",function(){t.__fullDate=this.value}).prop({readonly:!0})},open:function(){var t=this,e=this.__target.offset(),n=(this.get("onChange")||function(){},this.get("min")),i=this.get("max");e.top=e.top+this.__target.outerHeight(),this.getSelected(),this.__panel.open({type:this.config.type,year:this.__year,month:this.__month,current:this.__fullDate,dateList:this.__dateList,min:$.isFunction(n)?n():n,max:$.isFunction(i)?i():i,onChange:function(e){t.select(e)}},e)},close:function(){this.__panel.close()},getSelected:function(){var t=this.__target.val()||this.__fullDate,e=a(t);this.__fullDate=t,this.__year=e.getFullYear(),this.__month=e.getMonth(),this.__date=e.getDate()},select:function(t){var e=a(t),n=this.get("onChange")||function(){};e!==this.__fullDate&&(this.__fullDate=t,this.__year=e.getFullYear(),this.__month=e.getMonth(),this.__date=e.getDate(),this.__target.val(t).trigger("change"),n(t)),this.__target.blur(),this.close()},set:function(t,e){"string"==typeof t?e&&(this.config[t]=e):this.config=$.extend({},b,t)},get:function(t){return this.config[t]}};var _=i(function(){return new p});$.fn.datePicker=function(){var t=arguments;return this.each(function(){var e,n=t[0];"string"==typeof n?(e=$(this).data("datePicker"),e&&$.isFunction(e[n])&&e[n].apply(e,Array.prototype.slice.call(t,1))):$(this).data("datePicker",v($(this),n))})},e.createDatePicker=v,e.createDatePanel=_},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){function t(t){var e=t||{},n=e.costInclude||{};return n.childStdInfo||""}var e=w.getState("journey"),n="",i=void 0;if(1==w.getState("isSupportMultipleJourney")){var a=(w.getState("multiTab")||[])[0];a&&(i=a.journeyId)&&Object.keys(e||{}).some(function(a){if(a==i)return n=t(e[a]),!0})}else n=t(e);return n}function r(t){return $(D(t)).appendTo(j.find(".resource-section-content"))}function o(){return $(S()).appendTo(j.find(".resource-section-content"))}function s(){var t=w.getState("departDate");return w.getState("calendar").filter(function(e){return e.departDate===t})[0]}function c(t){var e=w.getState("adult"),n=w.getState("child"),i=0;switch(t){case"adult":i=d()?e+n>1?0:e:1;break;case"child":i=d()?e+n>1?0:n:0;break;case"freeChild":i=0}return i}function l(t){var e=0;switch(t){case"adult":e=99;break;case"child":e=u()?4*w.getState("adult"):20;break;case"freeChild":e=u()?1*w.getState("adult"):0}return e}function u(){return 2==w.getState("proMode")}function d(){return 11==w.getState("tagType")}Object.defineProperty(e,"__esModule",{value:!0}),e.touristModule=void 0;var f=n(298),p=n(310),h=n(311),v=n(303),m=i(v),y=n(329),g=n(320),b=n(330),_=n(331),x=n(332),w=void 0,j=void 0,k=void 0,I=void 0,T=void 0,C=void 0,D=p.template.compile(b.touristTemplate),S=p.template.compile(_.touristChildNotSupportedTemplate),M=p.template.compile(x.touristChildTipTemplate),O={init:function(){w=(0,f.getStore)(),j=$("#J_ResourceTourist"),k=$("#J_ResourceCustom"),w.subscribe(function(){this.initSelect()}.bind(this),"change:calendar"),w.subscribe(function(){this.initSelect()}.bind(this),"change:departDate"),w.subscribe(function(){I&&I.set(w.getState("adult")),this.toggleCustom(),this.updateRelation()}.bind(this),"change:adult"),w.subscribe(function(){T&&T.set(w.getState("child")),this.updateRelation()}.bind(this),"change:child"),w.subscribe(function(){C&&C.set(w.getState("freeChild")),this.updateRelation()}.bind(this),"change:freeChild"),w.getState("calendar")&&this.initSelect()},initSelect:function(){this.initAdult(),this.initChild(),this.initFreeChild()},initAdult:function(){I&&I.remove(),j.find(".resource-tourist-adult").remove();var t=s(),e=r({type:"adult",price:t&&t.tuniuPrice,isReal:t&&t.isRealTimePrice});I=(0,y.createNumberSelect)(e.find(".number-select"),{min:c("adult"),max:l("adult"),autoSet:!1,defaultValue:w.getState("adult"),onchange:this.changeAdult.bind(this)})},initChild:function(){T&&T.remove(),j.find(".resource-tourist-child").remove();var t=s(),e=void 0;t&&t.excludeChildFlag?(e=o(),T=null):(e=r({type:"child",price:t&&t.tuniuChildPrice,isTrain:u(),isReal:t&&t.isRealTimePrice,childTip:a()}),T=(0,y.createNumberSelect)(e.find(".number-select"),{min:c("child"),max:l("child"),autoSet:!1,defaultValue:w.getState("child"),onchange:this.changeChild.bind(this)})),e&&!function(){var t=e.find(".J_ResourceChildTip"),n=void 0;t.hover(function(){n=h.layer.open({type:4,skin:"layui-layer-rim",area:["200px","auto"],content:[M({content:t.data("tip")}),t],tips:3,shade:!1,fix:!1,closeBtn:!1,tipsOffset:[10,-27]})},function(){h.layer.close(n)})}()},initFreeChild:function(){if(C&&C.remove(),j.find(".resource-tourist-freechild").remove(),u()){var t=(s(),r({type:"freeChild",price:0}));C=(0,y.createNumberSelect)(t.find(".number-select"),{min:c("freeChild"),max:l("freeChild"),autoSet:!1,defaultValue:w.getState("freeChild"),onchange:this.changeFreeChild.bind(this)}),t&&!function(){var e=t.find(".J_ResourceFreeChildTip"),n=void 0;e.hover(function(){n=h.layer.open({type:4,skin:"layui-layer-rim",area:["200px","auto"],content:[M({content:e.data("tip")}),e],tips:3,shade:!1,fix:!1,closeBtn:!1,tipsOffset:[10,-27]})},function(){h.layer.close(n)})}()}},changeAdult:function(t){w.dispatch({type:m.CHANGE_ADULT,data:t}),(0,g.record)("点击_头部区_人数/日期/城市区_出游人数_选择成人数")},changeChild:function(t){w.dispatch({type:m.CHANGE_CHILD,data:t}),(0,g.record)("点击_头部区_人数/日期/城市区_出游人数_选择儿童数")},changeFreeChild:function(t){w.dispatch({type:m.CHANGE_FREE_CHILD,data:t}),(0,g.record)("点击_头部区_人数/日期/城市区_出游人数_选择免票儿童数")},updateRelation:function(){d()&&(I&&I.config({min:c("adult")}),T&&T.config({min:c("child")})),u()&&(T&&T.config({max:l("child")}),C&&C.config({max:l("freeChild")}))},toggleCustom:function(){w.getState("adult")>=10?this.showCustom():this.hideCustom()},showCustom:function(){k.show()},hideCustom:function(){k.hide()}};e.touristModule=O},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return new s(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r={min:-(1/0),max:1/0,minus:!0,plus:!0,defaultValue:1,autoSet:!0,selectors:{minus:".number-select-minus",plus:".number-select-plus"}},o="disabled",s=function(){function t(e,i){n(this,t),this.container=$(e),this.options=Object.assign({},r,i),this.value=this.options.defaultValue,this.minusDisabled=!1,this.plusDisabled=!1,this.bind(),this.update(),this.updateView()}return a(t,[{key:"bind",value:function(){this.container.on("click",this.options.selectors.minus,this.minus.bind(this)).on("click",this.options.selectors.plus,this.plus.bind(this)).on("change","input",function(t){this.change(t.target.value)}.bind(this))}},{key:"set",value:function(t){this.value=t,this.update(),this.updateView()}},{key:"changeNumber",value:function(t){try{this.options.onchange&&this.options.onchange(t)}catch(e){}this.options.autoSet&&this.set(t)}},{key:"config",value:function(t,e){var n={};e?n[t]=e:n=t,this.options=Object.assign({},this.options,n),this.update(),this.updateView()}},{key:"plus",value:function(){this.plusDisabled||this.changeNumber(this.value+1)}},{key:"minus",value:function(){this.minusDisabled||this.changeNumber(this.value-1)}},{key:"change",value:function(t){t=parseInt(t,10),!isNaN(t)&&t!==this.value&&t>=this.options.min&&t<=this.options.max?this.changeNumber(t):this.updateView()}},{key:"update",value:function(){this.minusDisabled=this.value<=this.options.min,this.plusDisabled=this.value>=this.options.max,this.value<this.options.min&&(this.value=this.options.min),this.value>this.options.max&&(this.value=this.options.max)}},{key:"updateView",value:function(){this.container.find(this.options.selectors.minus)[this.minusDisabled?"addClass":"removeClass"](o).end().find(this.options.selectors.plus)[this.plusDisabled?"addClass":"removeClass"](o).end().find("input").val(this.value)}},{key:"remove",value:function(){this.container&&(this.container.remove(),this.container=null),this.options=null}}]),t}();e.NumberSelect=s,e.createNumberSelect=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.touristTemplate='\n<div class="resource-tourist-item resource-tourist-<%= type.toLowerCase() %>">\n    <div class="number-select">\n        <div class="number-select-button number-select-minus">\n            <i class="number-select-button-line-horizital"></i>\n        </div>\n        <div class="number-select-button number-select-plus">\n            <i class="number-select-button-line-vertical"></i>\n            <i class="number-select-button-line-horizital"></i>\n        </div>\n        <div class="number-select-input">\n            <input type="text" name="number-select" value="<%= number %>">\n        </div>\n    </div>\n    <% if (type === \'adult\') { %>\n        <div class="resource-tourist-price">\n            <% if (isReal) { %><span><strong>实时计价</strong></span>/<% } else if (price) { %><span>&yen;<strong><%= price %></strong></span>/<% } %>成人\n        </div>\n    <% } %>\n\n    <% if (type === \'child\') { %>\n        <div class="resource-tourist-price">\n            <% if (isReal) { %><span><strong>实时计价</strong></span>/<% } else if (price) { %><span>&yen;<strong><%= price %></strong></span>/<% } %>\n            <% if (isTrain) { %>\n                儿童 <i class="J_ResourceChildTip" data-tip="身高标准1.2-1.5米，含儿童价火车票，含当地旅游车位费和导游服务费，不占床，不含住宿费和门票；身高标准0.8-1.19米，免火车票，含当地旅游车位费和导游服务费，不占床，不含住宿费和门票。">儿童标准</i>\n            <% } else { %>\n                儿童 <i class="J_ResourceChildTip" data-tip="<%= childTip %>">儿童标准</i>\n            <% } %>\n        </div>\n    <% } %>\n\n    <% if (type === \'freeChild\') { %>\n        <div class="resource-tourist-price">\n            免票儿童<i class="J_ResourceFreeChildTip" data-tip="身高标准1.2-1.5米，含儿童价火车票，含当地旅游车位费和导游服务费，不占床，不含住宿费和门票；身高标准0.8-1.19米，免火车票，含当地旅游车位费和导游服务费，不占床，不含住宿费和门票。">（1.2米以下免车票）</i>\n        </div>\n    <% } %>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.touristChildNotSupportedTemplate='\n<div class="resource-tourist-item resource-tourist-child">\n    <div class="resource-tourist-price">\n        <i class="J_ResourceChildTip" data-tip="儿童标准：身高0.8~1.2米（含），不占床，只包含座位费，其余产生费用自理。">此团期不支持儿童出游</i>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.touristChildTipTemplate='\n<div class="resource-tourist-child-tip">\n    <%= content %>\n</div>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e=p.getState("supplier"),n=void 0,i=t||p.getState("departDate");return n=(e||[]).filter(function(t){return~(t.departureDates||[]).indexOf(i)})[0],1==p.getState("isSupportMultipleJourney")||n||(n=(e||[])[0]),n&&n.statis||(n=null),n}function r(t){var e=a(t);if(e){var n=b(Object.assign({destName:p.getState("destGroupName")},e));v.html(n),h.show(),d.isNeedReception()&&e.groundOperatorsName&&(y.html("接待服务由<strong>"+(e.groundOperatorsName||"")+"</strong>提供"),m.show())}else h.hide(),m.hide();g.trigger("resize")}function o(t){p=(0,s.getStore)(),p.subscribe(function(){r(t)},"change:supplier"),1==p.getState("isSupportMultipleJourney")&&p.subscribe(r,"change:departDate")}Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var s=n(298),c=n(334),l=i(c),u=n(339),d=i(u),f=n(340),p=void 0,h=$("#J_ResourceSupplier"),v=$("#J_ResourceSupplierContent"),m=$("#J_ResourceReception"),y=$("#J_ResourceReceptionContent"),g=$(window),b=l.compile(f.supplierTemplate,{client:!0,compileDebug:!1});e.init=o},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,n){var i;if("/"==t.charAt(0))i=e.resolveInclude(t.replace(/^\/*/,""),n.root||"/",!0);else{if(!n.filename)throw new Error("`include` use relative path requires the 'filename' option.");i=e.resolveInclude(t,n.filename)}return i}function r(t,n){var i,a=t.filename,r=arguments.length>1;if(t.cache){if(!a)throw new Error("cache option requires a filename");if(i=e.cache.get(a))return i;r||(n=y.readFileSync(a).toString().replace(I,""))}else if(!r){if(!a)throw new Error("Internal EJS error: no file name or template provided");n=y.readFileSync(a).toString().replace(I,"")}return i=e.compile(n,t),t.cache&&e.cache.set(a,i),i}function o(t,e){var n=h.shallowCopy({},e);return n.filename=a(t,n),r(n)}function s(t,e){var n,i,r=h.shallowCopy({},e);n=a(t,r),i=y.readFileSync(n).toString().replace(I,""),r.filename=n;var o=new u(i,r);return o.generateSource(),{source:o.source,filename:n,template:i}}function c(t,e,n,i){var a=e.split("\n"),r=Math.max(i-3,0),o=Math.min(a.length,i+3),s=a.slice(r,o).map(function(t,e){var n=e+r+1;return(n==i?" >> ":"    ")+n+"| "+t}).join("\n");throw t.path=n,t.message=(n||"ejs")+":"+i+"\n"+s+"\n\n"+t.message,t}function l(t,e){j.forEach(function(n){"undefined"!=typeof t[n]&&(e[n]=t[n])})}function u(t,n){n=n||{};var i={};this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],i.client=n.client||!1,i.escapeFunction=n.escape||h.escapeXML,i.compileDebug=n.compileDebug!==!1,i.debug=!!n.debug,i.filename=n.filename,i.delimiter=n.delimiter||e.delimiter||_,i.strict=n.strict||!1,i.context=n.context,i.cache=n.cache||!1,i.rmWhitespace=n.rmWhitespace,i.root=n.root,i.localsName=n.localsName||e.localsName||x,i.strict?i._with=!1:i._with="undefined"==typeof n._with||n._with,this.opts=i,this.regex=this.createRegex()}
var d=n(335),f=i(d),p=n(337),h=i(p),v=n(338),m=i(v),y={},g=!1,b=m.version,_="%",x="locals",w="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",j=["cache","filename","delimiter","scope","context","debug","compileDebug","client","_with","root","rmWhitespace","strict","localsName"],k=/;\s*$/,I=/^\uFEFF/;e.cache=h.cache,e.localsName=x,e.resolveInclude=function(t,e,n){var i=f.dirname,a=f.extname,r=f.resolve,o=r(n?e:i(e),t),s=a(t);return s||(o+=".ejs"),o},e.compile=function(t,e){var n;return e&&e.scope&&(g||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),g=!0),e.context||(e.context=e.scope),delete e.scope),n=new u(t,e),n.compile()},e.render=function(t,e,n){var i=e||{},a=n||{};return 2==arguments.length&&l(i,a),r(a,t)(i)},e.renderFile=function(){var t,e=Array.prototype.slice.call(arguments),n=e.shift(),i=e.pop(),a=e.shift()||{},o=e.pop()||{};o=h.shallowCopy({},o),3==arguments.length&&(a.settings&&a.settings["view options"]?l(a.settings["view options"],o):l(a,o)),o.filename=n;try{t=r(o)(a)}catch(s){return i(s)}return i(null,t)},e.clearCache=function(){e.cache.reset()},u.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},u.prototype={createRegex:function(){var t=w,e=h.escapeRegExpChars(this.opts.delimiter);return t=t.replace(/%/g,e),new RegExp(t)},compile:function(){var t,e,n=this.opts,i="",a="",r=n.escapeFunction;this.source||(this.generateSource(),i+="  var __output = [], __append = __output.push.bind(__output);\n",n._with!==!1&&(i+="  with ("+n.localsName+" || {}) {\n",a+="  }\n"),a+='  return __output.join("");\n',this.source=i+this.source+a),t=n.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(n.filename?JSON.stringify(n.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line);\n}\n":this.source,n.debug&&console.log(t),n.client&&(t="escape = escape || "+r.toString()+";\n"+t,n.compileDebug&&(t="rethrow = rethrow || "+c.toString()+";\n"+t)),n.strict&&(t='"use strict";\n'+t);try{e=new Function(n.localsName+", escape, include, rethrow",t)}catch(s){throw s instanceof SyntaxError&&(n.filename&&(s.message+=" in "+n.filename),s.message+=" while compiling ejs"),s}if(n.client)return e.dependencies=this.dependencies,e;var l=function(t){var i=function(e,i){var a=h.shallowCopy({},t);return i&&(a=h.shallowCopy(a,i)),o(e,n)(a)};return e.apply(n.context,[t||{},r,i,c])};return l.dependencies=this.dependencies,l},generateSource:function(){var t=this.opts;t.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var n=this,i=this.parseTemplateText(),a=this.opts.delimiter;i&&i.length&&i.forEach(function(t,r){var o,c,l,u,d,f;if(0===t.indexOf("<"+a)&&0!==t.indexOf("<"+a+a)&&(c=i[r+2],c!=a+">"&&c!="-"+a+">"&&c!="_"+a+">"))throw new Error('Could not find matching close tag for "'+t+'".');return(l=t.match(/^\s*include\s+(\S+)/))&&(o=i[r-1],o&&(o=="<"+a||o=="<"+a+"-"||o=="<"+a+"_"))?(u=h.shallowCopy({},n.opts),d=s(l[1],u),f=n.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(d.template)+"\n      , __filename = "+JSON.stringify(d.filename)+";\n      try {\n"+d.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+d.source+"    ; }).call(this)\n",n.source+=f,void n.dependencies.push(e.resolveInclude(l[1],u.filename))):void n.scanLine(t)})},parseTemplateText:function(){for(var t,e=this.templateText,n=this.regex,i=n.exec(e),a=[];i;)t=i.index,0!==t&&(a.push(e.substring(0,t)),e=e.slice(t)),a.push(i[0]),e=e.slice(i[0].length),i=n.exec(e);return e&&a.push(e),a},scanLine:function(t){function e(){n.truncate?(t=t.replace(/^(?:\r\n|\r|\n)/,""),n.truncate=!1):n.opts.rmWhitespace&&(t=t.replace(/^\n/,"")),t&&(t=t.replace(/\\/g,"\\\\"),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace(/"/g,'\\"'),n.source+='    ; __append("'+t+'")\n')}var n=this,i=this.opts.delimiter,a=0;switch(a=t.split("\n").length-1,t){case"<"+i:case"<"+i+"_":this.mode=u.modes.EVAL;break;case"<"+i+"=":this.mode=u.modes.ESCAPED;break;case"<"+i+"-":this.mode=u.modes.RAW;break;case"<"+i+"#":this.mode=u.modes.COMMENT;break;case"<"+i+i:this.mode=u.modes.LITERAL,this.source+='    ; __append("'+t.replace("<"+i+i,"<"+i)+'")\n';break;case i+i+">":this.mode=u.modes.LITERAL,this.source+='    ; __append("'+t.replace(i+i+">",i+">")+'")\n';break;case i+">":case"-"+i+">":case"_"+i+">":this.mode==u.modes.LITERAL&&e(),this.mode=null,this.truncate=0===t.indexOf("-")||0===t.indexOf("_");break;default:if(this.mode){switch(this.mode){case u.modes.EVAL:case u.modes.ESCAPED:case u.modes.RAW:t.lastIndexOf("//")>t.lastIndexOf("\n")&&(t+="\n")}switch(this.mode){case u.modes.EVAL:this.source+="    ; "+t+"\n";break;case u.modes.ESCAPED:this.source+="    ; __append(escape("+t.replace(k,"").trim()+"))\n";break;case u.modes.RAW:this.source+="    ; __append("+t.replace(k,"").trim()+")\n";break;case u.modes.COMMENT:break;case u.modes.LITERAL:e()}}else e()}n.opts.compileDebug&&a&&(this.currentLine+=a,this.source+="    ; __line = "+this.currentLine+"\n")}},e.escapeXML=h.escapeXML,e.__express=e.renderFile,e.VERSION=b},function(t,e,n){"use strict";function i(t,e){for(var n=0,i=t.length-1;i>=0;i--){var a=t[i];"."===a?t.splice(i,1):".."===a?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function a(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=n(336),o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return o.exec(t).slice(1)};e.resolve=function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var o=n>=0?arguments[n]:r.process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o.charAt(0))}return t=i(a(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},e.normalize=function(t){var n=e.isAbsolute(t),r="/"===c(t,-1);return t=i(a(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(a(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var a=i(t.split("/")),r=i(n.split("/")),o=Math.min(a.length,r.length),s=o,c=0;c<o;c++)if(a[c]!==r[c]){s=c;break}for(var l=[],c=s;c<a.length;c++)l.push("..");return l=l.concat(r.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=s(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},e.basename=function(t,e){var n=s(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return s(t)[3]};var c="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}},function(t,e){"use strict";function n(){if(!o){o=!0;for(var t,e=r.length;e;){t=r,r=[];for(var n=-1;++n<e;)t[n]();e=r.length}o=!1}}function i(){}var a=t.exports={},r=[],o=!1;a.nextTick=function(t){r.push(t),o||setTimeout(n,0)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(t){return t?String(t).replace(n,"\\$&"):""};var i='var _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n';e.escapeXML=new Function("markup","\n    return markup == undefined\n    ? ''\n    : String(markup).replace(_MATCH_HTML, encode_char);\n"),e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+";\n"+i},e.shallowCopy=function(t,e){e=e||{};for(var n in e)t[n]=e[n];return t},e.cache={_data:{},set:function(t,e){this._data[t]=e},get:function(t){return this._data[t]},reset:function(){this._data={}}}},function(t,e){"use strict";t.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.2",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2",rimraf:"^2.2.8","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"rimraf out && jsdoc -c jsdoc.json lib/* docs/jsdoc/*",devdoc:"rimraf out && jsdoc -p -c jsdoc.json lib/* docs/jsdoc/*"}}},function(t,e,n){"use strict";function i(){var t={1:"A",2:"D"};return t[(0,o.getStore)().getState("adType")]}function a(){return 2===(0,o.getStore)().getState("brandId")}function r(){return"D"===i()||"A"===i()&&a()}Object.defineProperty(e,"__esModule",{value:!0}),e.getProductStockType=i,e.isNiuZhuan=a,e.isNeedReception=r;var o=n(298);n(314)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.supplierTemplate="\n<div class=\"resource-supplier-content\">\n    <div class=\"resource-supplier-name\">\n        <strong><%= aggregationCompanyName %></strong>\n    </div>\n    <div class=\"resource-supplier-statis\">\n        该品牌在<%= displayDestGroupName %>目的地满意度 <strong><%= statis %>%</strong>\n        <% if (delta != 0) { %>\n            <i>⎜</i>\n            <%= deltaSign > 0 ? '高' : (deltaSign < 0 ? '低' : '等') %>于<%= displayDestGroupName %>平均满意度 <span><%= delta %>%</span>\n        <% } %>\n    </div>\n</div>\n"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e=t.displayDestGroupName||"该类";return t.rows.map(function(t){var n=(t.satisfactionInfo||[])[0];return n&&(t.statis=Math.round(100*(n.satisfactionNum||0)),t.deltaSign=0==n.satisfactionDifference?0:n.satisfactionDifference/Math.abs(n.satisfactionDifference),t.delta=Math.round(Math.abs(1e3*n.satisfactionDifference)||0)/10,t.adType=n.adType,t.displayDestGroupName=e),t}).filter(function(t){return t.statis})}function r(t,e){$.ajax({url:t(),data:e,success:function(t){t&&t.success&&t.data&&(t.data.brand&&(0,o.getStore)().dispatch({type:c.LOAD_BRAND_INFO,data:t.data.brand}),t.data.supplier&&(0,o.getStore)().dispatch({type:c.LOAD_SUPPLIER,data:a(t.data.supplier)}))}})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetch=r;var o=n(298),s=n(308),c=i(s)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.resourcePromotionTemplate='\n<div class="resource-promotion-detail">\n    <div class="resource-promotion-detail-list">\n        <% for (var i = 0; i < data.length; i++) { %>\n            <div class="resource-promotion-detail-item"><%= data[i].name %></div>\n        <% } %>\n    </div>\n    <div class="resource-promotion-detail-rule">\n        <a href="#activity">查看详细优惠规则&gt;</a>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.resourceDownpaymentTemplate='\n<div class="resource-downpayment-detail">\n    <h4 class="resource-downpayment-detail-title">可选期数</h4>\n    <div class="resource-downpayment-detail-list">\n    <% var period; %>\n    <% if (data.periods) { %>\n        <% for (var i = 0; i < data.periods.length && (period = data.periods[i]); i++) { %>\n            <div class="resource-downpayment-detail-item">\n                <div class="resource-downpayment-detail-label"><%= period.desc[0] %></div>\n                <div class="resource-downpayment-detail-plan"><%= period.desc[1] %></div>\n                <div class="resource-downpayment-detail-fee"><%= period.desc[2] %></div>\n            </div>\n        <% } %>\n    <% } %>\n    </div>\n    <div class="resource-downpayment-detail-tip">*您可以在下单付款时选择首付出发，适用的分期方案（如有）以付款时收银台显示为准</div>\n</div>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e=x.getState("coupon")||[];return e.filter(function(e){return e.id==t})[0]}function r(t){var e=a(t);e&&(e.selected=!0)}function o(t){w=m.layer.open({type:1,title:!1,closeBtn:!1,content:j({data:x.getState("coupon")}),area:["960px","auto"],btn:!1,success:function(e){c(e,t)}})}function s(){m.layer.close(w)}function c(t,e){k=t,t.on("click",".dialog-close",s).find(".J_CouponItem").each(function(t){var e=$(this),n=e.data("id");e.find(".coupon-more");e.on("click",".coupon-button",function(){l(n)})});var n=t.find(".J_CouponMore"),i=t.find(".J_CouponDetail");$(document).click(function(){n.removeClass("expand"),i.hide()}),i.click(function(t){t.stopPropagation()}),n.click(function(t){t.stopPropagation();var e=$(this).data("id"),a=i.filter("[data-id="+e+"]");a.is(":visible")?($(this).removeClass("expand"),a.hide()):(n.removeClass("expand"),$(this).addClass("expand"),i.hide(),a.show())}),e&&l(e)}function l(t){var e=a(t);e&&(b.isLogin()?u(t):(s(),b.open(function(){o(t)})))}function u(t){$.ajax({url:_.couponReceiveUrl({couponId:t}),dataType:"json",success:function(e){e&&e.success?(f(),d(t)):p(e&&e.message)},error:function(t){p(t&&t.message)}})}function d(t){k&&t&&(r(t),k.find(".J_CouponItem[data-id="+t+"]").addClass("selected"))}function f(t){var e=m.layer.open({type:1,title:!1,time:1500,content:'<div class="dialog-success"><div class="dialog-close"></div><i class="icon"></i>'+(t||"优惠券发放并绑定成功")+"</div>",area:["400px","auto"],btn:!1,closeBtn:!1,success:function(t){t.on("click",".dialog-close",function(){m.layer.close(e)})}})}function p(t){var e=m.layer.open({type:1,title:!1,time:1500,content:'<div class="dialog-error"><div class="dialog-close"></div><i class="icon"></i>'+(t||"优惠券领取失败，请稍后重试。")+"</div>",area:["400px","auto"],btn:!1,closeBtn:!1,success:function(t){t.on("click",".dialog-close",function(){m.layer.close(e)})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.favorModule=void 0;var h=n(298),v=n(310),m=n(311),y=(n(315),n(345)),g=n(346),b=i(g),_=void 0,x=($(window),void 0),w=void 0,j=v.template.compile(y.detailFavorDialogTemplate),k=void 0,I={init:function(t){_=t,x=(0,h.getStore)(),$(".J_DetailCouponItem").click(o)}};e.favorModule=I},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailFavorDialogTemplate='\n<div class="dialog dialog-favor">\n    <div class="dialog-close"></div>\n    <div class="dialog-head">领取优惠券</div>\n    <div class="dialog-body">\n\n        <% var prev %>\n        <div class="coupon-list">\n            <% for (var couponIndex = 0, couponLength = data.length; couponIndex < couponLength; couponIndex++) { %>\n                <% var coupon = data[couponIndex] %>\n\n                <div class="J_CouponItem coupon-item<%= coupon.selected ? \' selected\' : \'\' %>"\n                    <% if (!coupon.selected) { %>data-id="<%= coupon.id %>"<% } %>>\n                    <div class="coupon-box">\n                        <div class="coupon-row coupon-name" title="<%= coupon.translatedRule.join(\'；\') %>">\n                            <strong class="coupon-type"><%= coupon.translatedFaceValue.value %><span><%= coupon.translatedFaceValue.unit %></span></strong>\n                            <%= coupon.translatedRule.join(\'；\') %>\n                        </div>\n                        <div class="coupon-row coupon-desc" title="<%= coupon.name %>">\n                            <%= coupon.name %>\n                        </div>\n                        <div class="coupon-row">\n                        <span class="J_CouponMore coupon-more" data-id="<%= coupon.id %>" mm="点击_头部区_优惠区_优惠券_优惠券列表_查看使用规则">详细规则<i class="icon"></i></span>\n                            <span class="coupon-date"><%= coupon.beginDate %> - <%= coupon.endDate %></span>\n                            <span class="icon icon-select"></span>\n                        </div>\n                        <div class="coupon-button" mm="点击_头部区_优惠区_优惠券_优惠券列表_领取优惠券">立即领取</div>\n                    </div>\n                </div>\n\n                <% if (couponIndex % 2 === 0 && couponIndex != couponLength - 1) { %>\n                    <% prev = coupon %>\n                <% } else { %>\n\n                    <% if (couponIndex % 2 === 0 && couponIndex == couponLength - 1) { %>\n                        <% prev = coupon; coupon = null; %>\n                    <% } %>\n\n                    <% var details = [prev, coupon] %>\n\n                    <% for (var detailIndex = 0; detailIndex < details.length; detailIndex++) { %>\n                        <% var detail = details[detailIndex] %>\n                        <% if (detail) { %>\n                            <div class="J_CouponDetail coupon-detail coupon-detail-<%= detailIndex % 2 === 0 ? \'left\' : \'right\' %>" data-id="<%= detail.id %>">\n                                <i class="coupon-detail-arrow"></i>\n                                <div class="coupon-detail-inner">\n                                    <% if (detail.themeName) { %>\n                                        <div class="coupon-detail-group">\n                                            <div class="coupon-detail-title">活动主题：</div>\n                                            <div class="coupon-detail-content">\n                                                <%= detail.themeName %>\n                                            </div>\n                                        </div>\n                                    <% } %>\n                                    <div class="coupon-detail-group">\n                                        <div class="coupon-detail-title">适用团期：</div>\n                                        <div class="coupon-detail-content">\n                                            <% if (detail.planDate && detail.planDate.length) { %>\n                                                <%= detail.planDate.join(\'、\') %>\n                                            <% } else { %>\n                                                团期不限\n                                            <% }%>\n                                        </div>\n                                    </div>\n                                    <div class="coupon-detail-group">\n                                        <div class="coupon-detail-title">活动规则：</div>\n                                        <div class="coupon-detail-content">\n                                            <%=# detail.webHtml %>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        <% } %>\n                    <% } %>\n\n                    <% prev = null %>\n                <% } %>\n\n\n\n            <% } %>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){var t=location.host,e=t.split(".")[0];return"https://passport.tuniu.com/login/iframe?origin="+encodeURIComponent("http://www.tuniu.com/ssoConnect/Iframe?reload=detail&domain="+e)}function r(){var t=(0,c.getStore)();return!!t.getState("isLogin")}function o(t){r()?t():s(t)}function s(t){window.detailLoginCallback=function(){window.detailLoginCallback=null,(0,c.getStore)().dispatch({type:d.CHANGE_LOGIN_STATUS,data:!0}),t(),l.layer.close(e)};var e=l.layer.open({type:2,title:!1,content:[a(),"no"],area:["375px","350px"],btn:!1});return e}Object.defineProperty(e,"__esModule",{value:!0}),e.open=e.login=e.isLogin=void 0;var c=n(298),l=n(311),u=n(301),d=i(u);e.isLogin=r,e.login=o,e.open=s},function(t,e,n){"use strict";function i(){return{productId:m.getState("productId"),productType:m.getState("productType"),bookCityCode:m.getState("bookCityCode")}}function a(t){$.ajax({url:t.url,data:i(),success:t.success,error:t.error})}function r(){a({url:v.checkFavoriteStateUrl(),success:function(t){t&&t.data&&t.data.isCollected?c():l()},error:function(){l()}})}function o(){a({url:v.addFavoriteUrl(),success:function(t){t&&t.data&&t.data.isSuccess?(c(),u({msg:"添加收藏成功"})):u({type:"error",msg:"添加收藏失败，请重试"})},error:function(){u({type:"error",msg:"添加收藏失败，请重试"})}})}function s(){a({url:v.removeFavoriteUrl(),success:function(t){t&&t.data&&t.data.isSuccess?(l(),u({msg:"删除收藏成功"})):u({type:"error",msg:"删除收藏失败，请重试"})},error:function(){u({type:"error",msg:"删除收藏失败，请重试"})}})}function c(){g=!0,y.addClass("active").find(".J_FavoriteLabel").text("已收藏")}function l(){g=!1,y.removeClass("active").find(".J_FavoriteLabel").text("收藏")}function u(t){var e=h.layer.open({type:1,title:!1,time:void 0===t.time?1500:t.time,content:'<div class="dialog-'+(t.type||"success")+'"><div class="dialog-close"></div><i class="icon"></i>'+t.msg+"</div>",area:["400px","auto"],btn:!1,closeBtn:!1,success:function(t){t.on("click",".dialog-close",function(){h.layer.close(e)})}})}function d(){u({msg:'请先<a class="dialog-login-button" href="https://passport.tuniu.com/login?origin='+encodeURIComponent(location.href)+'">登录</a><br>没有途牛账户？<a class="dialog-login-button" href="https://passport.tuniu.com/register" target="_blank">立即注册</a>',time:0})}function f(){y.click(function(){m.getState("isLogin")?g?s():o():d()});var t=$(".weixin_dialog");$(".resource-button-weixin").click(function(e){e.stopPropagation(),t.toggleClass("active")}),t.on("click",function(t){t.stopPropagation()}),$(document).click(function(){t.removeClass("active")})}Object.defineProperty(e,"__esModule",{value:!0}),e.favoriteModule=void 0;var p=n(298),h=n(311),v=void 0,m=($(window),void 0),y=void 0,g=!1,b={init:function(t){v=t,m=(0,p.getStore)(),y=$(".J_Favorite"),m.getState("isLogin")&&r(),f()}};e.favoriteModule=b},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.detailModule=void 0;var a=n(298),r=n(349),o=n(350),s=n(351),c=i(s),l=n(308),u=(i(l),n(339)),d=i(u),f=n(352),p=n(354),h=n(383),v=n(388),m=n(392),y=n(395),g=n(314),b=n(382),_=n(376),x=n(379),w=$(window),j={init:function(){var t=$("#J_DetailTab"),e=t.height();(0,r.createFixer)(t,{range:{bottom:$("#J_Detail")}}),(0,o.createScrollTaber)(t,{offset:e}),this.initFavor(),this.initRoute(),this.initUpgrade(),0==(0,a.getStore)().getState("isSupportMultipleJourney")&&(this.initVisa(),this.initGuide()),this.initBrand(),h.policyModule.init({retailUrl:g.config.url.retail}),v.commentModule.init({remarkListUrl:g.config.url.remarkList,remarkStatusUrl:g.config.url.remarkStatus}),m.advisoryModule.init({qaUrl:g.config.url.qa}),y.relativeModule.init({relatedUrl:g.config.url.related,mainHost:g.config.host})},initFavor:function(){$(".J_DetailFavorItem").each(function(){var t=$(this);t.on("click",".detail-favor-more",function(){t.addClass("expand")}).on("click",".detail-favor-less",function(){t.removeClass("expand")})}),$(".J_DetailFeature").find("img").each(function(){var t=$(this),e=t.data("src");c.on(t,function(){var n=new Image;n.onload=function(){t.prop("src",e).parent().addClass("loaded"),c.off(t),w.trigger("resize")},n.src=e,n.onerror=function(){t.parent().addClass("loaded"),c.off(t),w.trigger("resize")}})}),$(".J_DetailFeatureDeadline").each(function(){var t=$(this),e=t.parent(),n=e.find(".detail-feature-deadline"),i=e.find(".detail-feature-deadline-arrow");t.click(function(a){if(a.stopPropagation(),e.hasClass("expand"))e.removeClass("expand");else{var r=t.position()||{left:0,top:0};n.css({top:r.top+e.height()+7}),i.css({left:r.left+t.width()/2}),e.addClass("expand")}}),n.click(function(t){t.stopPropagation()}),$(document).click(function(){e.removeClass("expand")})})},initRoute:function(){p.routeModule.init({isNeedReception:d.isNeedReception,getJourneyUrl:g.config.url.getJourneyById,guideUrl:g.config.url.guide,visaUrl:g.config.url.visa})},initUpgrade:function(){f.upgradeModule.init({upgradeUrl:g.config.url.upgrade})},initVisa:function(){var t=$(".J_DetailVisa");c.on(t,function(){c.off(t);var e=new _.Visa({$el:t});(0,b.fetchVisa)(function(t){e.load(t),e.render()},function(){e.remove()})})},initGuide:function(){var t=$(".J_Guide");c.on(t,function(){c.off(t);var e=new x.Guide({$el:t});(0,b.fetchGuide)(function(t){e.load(t),e.render()},function(){e.remove()})})},initBrand:function(){function t(){var t=e.getState("brandInfo");if(t){var n='<div class="banner-niuzhuan">';n+=t.url?'<a class="banner-niuzhuan-box" style="background-image: url('+t.img+')" href="'+t.url+'" target="_blank"></a>':'<span class="banner-niuzhuan-box" style="background-image: url('+t.img+')"></span>',n+="</div>",$(".J_DetailFavor").prepend(n),$(window).trigger("resize")}}var e=(0,a.getStore)();e.getState("brandInfo")?t():e.subscribe(t,"change:brandInfo")}};e.detailModule=j},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=t.offset()||{left:0,top:0},n=t.width()||0,i=t.height()||0;return{left:e.left,right:e.left+n,top:e.top,bottom:e.top+i,width:n,height:i}}function a(t,e){var n=new h(t,e);return p.push(n),n}function r(t){t&&t instanceof h?t.update():p.forEach(function(t){t.update()})}function o(){clearTimeout(v),v=setTimeout(s,150)}function s(){p.forEach(function(t){t.update()})}function c(){clearTimeout(m),m=setTimeout(l,10)}function l(){var t=d.scrollTop(),e=d.scrollLeft();p.forEach(function(n){n.position(t,e)})}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=({range:{left:"",right:"",top:self,bottom:""},offset:{left:0,right:0,top:0,bottom:0}},$(window)),f=$("body"),p=[],h=function(){function t(e){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n(this,t),e=$(e),this.fixed=!1,this.inited=!1,this.disabled=!1,this.range=null,this.$element=e,this.$target=e.children(":first-child"),this.originPosition=i(e),this.originStyle={position:this.$target.css("position"),left:this.$target.css("left"),top:this.$target.css("top")},this.rangeRef=Object.assign({left:e,right:e,top:e,bottom:e},a.range),this.ctx=a.ctx||f,this.offset=a.offset||{},this.rangeOffset=a.rangeOffset||{},void 0===this.offset.left&&(this.offset.left=this.originPosition.left-i(this.rangeRef.left).left),this.offset=Object.assign({left:0,right:0,top:0,bottom:0},this.offset),this.rangeOffset=Object.assign({left:0,right:0,top:0,bottom:0},this.rangeOffset),e.is(":visible")&&this.position()}return u(t,[{key:"_updateOriginPosition",value:function(){this.originPosition=i(this.$element)}},{key:"_updateRange",value:function(){var t=this,e={};return["left","right","top","bottom"].forEach(function(n){e[n]=i(t.rangeRef[n])[n]+t.rangeOffset[n]}),this.range=e,e}},{key:"_update",value:function(){this._updateOriginPosition(),this._updateRange(),this.inited=!0}},{key:"update",value:function(){this._update(),this.position()}},{key:"position",value:function(t,e){if(!this.disabled){this.inited===!1&&this._update(),t=void 0===t?d.scrollTop():t,e=void 0===e?d.scrollLeft():e;var n=this.originPosition,i=this.range,a=this.offset.top;t+=a,t>i.top&&t<=i.bottom?this.$target.css({position:"fixed",left:i.left+this.offset.left-e,top:Math.min(a,i.bottom-(t-a+n.height))}).addClass("fixed"):this.fixed||(this.fixed=!1,this.$target.css(this.originStyle).removeClass("fixed"))}}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}}]),t}(),v=void 0,m=void 0;d.on("resize",function(t,e){"FIXER"!==e&&o()}).on("scroll",function(t,e){"FIXER"!==e&&c()}),e.createFixer=a,e.updateFixer=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=new l(t,e);return c.push(n),n}function a(t){instance&&instance instanceof Fixer?instance.update():c.forEach(function(t){t.update()})}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=$(window),s=$("body"),c=[],l=function(){function t(e,i){n(this,t),e=$(e),this.inited=!1,this.disabled=!1,this.visible=!1,this.options=Object.assign({offset:0,ctx:s,attr:"data-rel",firstDefault:!0},i),this.firstDefault=this.options.firstDefault,this.$element=e;var a=this.options.ctx,r=this.options.attr;this.tabs=e.find("["+r+"]").toArray().map(function(t){return t=$(t),{$tab:t,$target:a.find(t.attr(r)),offset:{left:0,top:0,width:0,height:0}}}).filter(function(t){return!!t.$target.length||void t.$tab.remove()}),this.update(),this.bind()}return r(t,[{key:"bind",value:function(){var t=this.options.offset;this.tabs.forEach(function(e){e.$tab.click(function(){e.active||o.scrollTop(e.offset.top-t)})})}},{key:"isAvailable",value:function(){return!this.disabled&&this.visible}},{key:"_updateVisibility",value:function(){this.visible=this.$element.is(":visible")}},{key:"_updateTabs",value:function(){this.isAvailable()&&(this.tabs=this.tabs.filter(function(t){return!(!t.$target||!t.$target[0].parentNode)||(t.$tab.remove(),!1)}))}},{key:"_update",value:function(){this.isAvailable()&&(this.tabs.forEach(function(t){Object.assign(t.offset,t.$target.offset()),t.offset.width=t.$target.outerWidth(),t.offset.height=t.$target.outerHeight(),t.offset.right=t.offset.left+t.offset.width,t.offset.bottom=t.offset.top+t.offset.height}),this.tabs.sort(function(t,e){return t.offset.top-e.offset.top}),this.inited=!0)}},{key:"_position",value:function(t){var e=this;if(this.isAvailable()){var n=this.options.offset;t=void 0===t?o.scrollTop():t;var i=this.tabs.reduce(function(i,a){return i===!0||(i=i||a.offset.top,t+n>i&&t+n<=a.offset.bottom?(e.active(a),!0):a.offset.bottom)},0);i!==!0&&(this.firstDefault?this.active(this.tabs[0]):this.deactive())}}},{key:"update",value:function(){this._updateVisibility(),this._updateTabs(),this._update(),this._position()}},{key:"position",value:function(t){this.inited===!1&&(this._updateVisibility(),this._updateTabs(),this._update()),this._position(t)}},{key:"active",value:function(t){t&&this.tabs.forEach(function(e){t===e?(e.$tab.addClass("active"),e.active=!0):(e.$tab.removeClass("active"),e.active=!1)})}},{key:"deactive",value:function(){this.tabs.forEach(function(t){t.$tab.removeClass("active"),t.active=!1})}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}}]),t}();o.on("resize",function(){c.forEach(function(t){t.update()})}).on("scroll resize",function(){var t=o.scrollTop();c.forEach(function(e){e.position(t);})}),e.createScrollTaber=i,e.updateScrollTaber=a},function(t,e){"use strict";function n(t,e){f.push({target:t,callback:e}),u&&(u=!1,l.on("resize",a).on("resize scroll",o),a(),o())}function i(t){var e=-1;f.some(function(n,i){if(n.target===t)return e=i,!0}),e!==-1&&f.splice(e,1),0===f.length&&(u=!0,l.off("resize",a).off("resize scroll",o))}function a(){clearTimeout(p),p=setTimeout(r,c)}function r(){d=l.height(),f.forEach(function(t){t.visible=t.target.is(":visible"),t.offset=t.target.offset(),t.width=t.target.width(),t.height=t.target.height()})}function o(){clearTimeout(h),h=setTimeout(s,c)}function s(){var t=l.scrollTop(),e=!1;f.filter(function(n){return!!(n.visible&&n.offset&&n.offset.top<d+t&&n.offset.top+n.height>t)&&(e=!0,!0)}).forEach(function(t){t.callback&&t.callback()}),e&&l.trigger("resize")}Object.defineProperty(e,"__esModule",{value:!0});var c=150,l=$(window),u=!0,d=void 0,f=[],p=void 0,h=void 0;e.bind=n,e.unbind=i,e.on=n,e.off=i},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){y.forEach(function(t){f.off(t)}),r()}function r(){$.ajax({dataType:"json",url:v.upgradeUrl({productId:g.getState("productId"),bookCityCode:g.getState("bookCityCode")||void 0,departCityCode:g.getState("departCityCode")||void 0})}).done(function(t){t&&t.success&&t.data?o(t.data):c()}).fail(function(){c()}.bind(this))}function o(t){var e=u.template.compile(h.detailUpgradeTemplate);y.forEach(function(n){var i=n.data("id"),a=t[i];a?n.append(e({data:a,journeyId:i})).removeClass("section-loading"):n.remove()}),s(),m.trigger("resize")}function s(){y.forEach(function(t){t.find(".J_UpgradeItem").each(function(){var t=$(this),e=t.parent(),n=t.siblings(".J_UpgradeDetail");n.length&&(n.remove().show(),new p.Tip(t,{type:"click",content:$("<div />").append(n[0]).html(),dialog:{tipsOffset:[0,-20]},width:function(){return e.outerWidth()}}))})})}function c(){y.forEach(function(t){return t.remove()}),m.trigger("resize")}Object.defineProperty(e,"__esModule",{value:!0}),e.upgradeModule=void 0;var l=n(298),u=n(310),d=n(351),f=i(d),p=n(315),h=n(353),v=void 0,m=$(window),y=void 0,g=void 0,b={init:function(t){v=t,g=(0,l.getStore)(),y=$(".J_DetailUpgrade").toArray().map(function(t){return $(t)}),y.forEach(function(t){f.on(t,a)})}};e.upgradeModule=b},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailUpgradeTemplate='\n<% var upgrades = data %>\n<div class="section-box detail-upgrade">\n    <div class="section-box-head">\n        <h2>产品升级</h2>\n    </div>\n    <div class="section-box-body">\n        <div class="detail-upgrade-title">下单时选择您需要的升级方案：</div>\n        <div class="section-box-content detail-upgrade-list">\n            <table>\n                <thead>\n                    <tr>\n                        <th class="detail-upgrade-col-1">方案</th>\n                        <th class="detail-upgrade-col-2">项目</th>\n                        <th class="detail-upgrade-col-3">说明</th>\n                        <th class="detail-upgrade-col-4">价格</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <% for (var upgradeIndex = 0; upgradeIndex < upgrades.length; upgradeIndex++) { %>\n                        <% var upgrade = upgrades[upgradeIndex] %>\n                        <tr<%= upgradeIndex % 2 == 1 ? \'class="even"\' : \'\'%>>\n                            <td>方案<%= upgradeIndex + 1 %></td>\n                            <td><%= upgrade.type %></td>\n                            <td><%= upgrade.remark %></td>\n                            <td>\n                                <div class="J_UpgradeItem detail-upgrade-price">\n                                    <% var first = upgrade.datePrices[0] %>\n                                    <span class="detail-upgrade-price-selected">&yen;<%= first.price %>/成人 <% if (first.excludeChildFlag != 1) { %>&yen;<%= first.childPrice %>/儿童<% } else { %>&nbsp;不支持儿童<% } %></span>\n                                    <i class="icon"></i>\n                                </div>\n                                    <div class="J_UpgradeDetail detail-upgrade-price-list">\n                                    <% for (var priceIndex = 0; priceIndex < upgrade.datePrices.length; priceIndex++) { %>\n                                        <% var price = upgrade.datePrices[priceIndex] %>\n                                        <div class="detail-upgrade-price-item"><span><%= price.departDate %></span> &yen;<%= price.price %>/成人<% if (price.excludeChildFlag != 1) { %>   &yen;<%= price.childPrice %>/儿童  <% } else { %>&nbsp;&nbsp;不支持儿童<% } %></div>\n                                    <% } %>\n                                </div>\n                            </td>\n                        </tr>\n                    <% } %>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){J=!0,M.addClass("expand")}function r(){J=!1,M.removeClass("expand")}function o(){J?r():a()}function s(){k.click(r),M.click(function(t){t.stopPropagation()}).on("click",".journey-nav-select",o).on("click",".journey-nav-item",r);var t=C.find(".journey-tab-item");t.length>7&&(t.filter(":gt(5)").addClass("more"),C.addClass("more").on("click",".J_JourneyTabMore",function(){L?(C.removeClass("expand"),L=!1):(C.addClass("expand"),L=!0),j.trigger("resize")}))}function c(t){t.find("img").each(function(){var t=$(this),e=t.data("src");y.on(t,function(){var n=new Image;n.onload=function(){t.prop("src",e).parent().addClass("loaded"),y.off(t),j.trigger("resize")},n.onerror=function(){t.parent().addClass("loaded"),y.off(t),j.trigger("resize")},n.src=e,t.src=e})})}function l(t){t.find(".item-label-fixed").each(function(){var t=$(this),e=t.find(".item-label-inner"),n=t.height(),i=e.height();n<i&&(e.height(n),t.addClass("fold"),t.on("click",".item-label-more",function(){t.addClass("expand"),e.height(i),j.trigger("resize")}).on("click",".item-label-less",function(){t.removeClass("expand"),e.height(n),j.trigger("resize")}))}),j.trigger("resize")}function u(t){var e=t.find(".J_Journey3RouteTab");(0,b.createTaber)(e,{ctx:t})}function d(t){var e=F,n=I.getState("isSupportMultipleJourney");return 1==n?e[Object.keys(e).filter(function(e){return t==e})[0]]:e}function f(){if(!T.isNeedReception()){var t=I.getState("supplier");$(".J_DetailSupplier:not(.loaded-supplier)").each(function(){var e=$(this),n=e.data("id");if(n){var i=(t||[]).filter(function(t){return t.resId==n})[0];if(i){var a="<strong>"+i.aggregationCompanyName+"</strong>";a+="（该品牌在"+i.displayDestGroupName+"目的地满意度<strong>"+i.statis+"%</strong>",0!=i.delta&&(a+="，",a+=i.deltaSign>0?"高":i.deltaSign<0?"低":"等",a+="于"+i.displayDestGroupName+"平均满意度 <span>"+i.delta+"%</span>"),a+="）",e.find(".J_DetailSupplierContent").html(a),e.show()}}e.addClass("loaded-supplier")})}}function p(){if(T.isNeedReception()){var t=I.getState("supplier");$(".J_DetailReception:not(.loaded-reception)").each(function(){var e=$(this),n=e.data("id");if(n){var i=(t||[]).filter(function(t){return t.resId==n})[0];if(i&&i.groundOperatorsName){var a="接待服务由 <strong>"+(i.groundOperatorsName||"")+"</strong> 提供";e.find(".J_DetailReceptionContent").html(a),e.show()}}e.addClass("loaded-reception")})}}Object.defineProperty(e,"__esModule",{value:!0}),e.routeModule=void 0;var h=n(298),v=n(305),m=(i(v),n(351)),y=i(m),g=n(349),b=n(355),_=n(350),x=n(356),w=n(362),j=$(window),k=$(document),I=void 0,T=void 0,C=void 0,D=void 0,S=void 0,M=void 0,O=void 0,E=void 0,P=void 0,A=void 0,N=void 0,L=!1,J=!1,R=[],F=void 0,V={init:function(t){T=t,I=(0,h.getStore)(),C=$("#J_MultiJourneyTab"),D=C.find(".journey-tab-list"),S=$("#J_DetailMultiRoute"),M=$("#J_MultiJourneyNav"),O=M.find("[data-rel]"),E=$("#J_MultiJourneySelect"),P=C.height(),A=D.height(),N=$("#J_DetailTab").height(),F=I.getState("journey"),s(),I.getState("isSupportMultipleJourney")?this.initMulti():this.initSingle()},initSingle:function(){var t=$(".J_DetailRoute"),e=t.data("id"),n=d(e);if(n&&3==n.isNewJson)x.journey4Module.init(t,n.journeyDescJson,{tabHeight:N}).init();else{var i=$(".J_DetailRoute"),a=$(".J_DetailJourney"),r=i.find(".J_JourneyNav"),o=i.find(".J_JourneyTab");(0,_.createScrollTaber)(r,{offset:N}),(0,b.createTaber)(o),(0,g.createFixer)(r,{range:{top:a,bottom:a,left:i,right:i},offset:{top:N+10},ctx:i});l($("#J_Detail")),u(i),c(i)}},initMulti:function(){D.find("[data-rel]").toArray().forEach(function(t,e){t=$(t);var n=t.data("id"),i=d(n),a=new w.Journey(Object.assign({},T,{journeyId:n,data:i}));R.push(a);var r=function(){$(this);a.activate(),R.forEach(function(t){t.isRendered()&&t.journeyId!=n&&t.hide()})};t.click(r),O.filter('[data-rel="'+t.data("rel")+'"]').click(function(){j.scrollTop($(".J_multiContainer").offset().top-N+5),r.call(this)}),a.isLoaded()&&a.bind(0==e)}),I.subscribe(function(){var t=I.getState("currentJourney");R.forEach(function(e){e.journeyId==t?e.activate():e.isRendered()&&e.hide()})},"change:currentJourney"),I.getState("supplier")?(f(),p()):I.subscribe(function(){f(),p(),j.trigger("resize")},"change:supplier")}};e.routeModule=V},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=new c(t,e);return r.push(n),n}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=[],o=$("body"),s=$(window),c=function(){function t(e,i){n(this,t),e=$(e),this.disabled=!1,this.options=Object.assign({selectFirst:!0,ctx:o},i);var a=this.options.ctx;this.$element=e,this.tabs=e.find("[data-rel]").toArray().map(function(t){return t=$(t),{$tab:t,$target:a.find(t.data("rel"))}}).filter(function(t){return t.$target.length}),this.options.selectFirst&&this.active(this.tabs[0]),this.bind()}return a(t,[{key:"bind",value:function(){var t=this;this.tabs.forEach(function(e){e.$tab.click(function(){e.active||this.active(e)}.bind(t))})}},{key:"active",value:function(t){t&&(this.tabs.forEach(function(e){t===e?(e.$tab.addClass("active"),e.$target.addClass("active"),e.active=!0):(e.$tab.removeClass("active"),e.$target.removeClass("active"),e.active=!1)}),$.isFunction(this.options.onactive)&&this.options.onactive(t),s.trigger("resize"))}}]),t}();e.createTaber=i},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){I||(window.initializeMapModule=function(){if(I=!0,window.initializeMapModule=null,k.length)for(;k.length;){var t=k.pop();t.callback(o(t.$element))}if(k.length)for(;k.length;){var e=k.pop();e.callback(o(e.$element))}},$('<script src="http://maps.google.cn/maps/api/js?sensor=false&callback=initializeMapModule" defer sync></script>').appendTo("head"))}function o(t,e){return I?t&&t[0]?new _.Map(t[0]):void 0:(k.push({$element:t,callback:e}),r(),null)}function s(t){for(var e=k.length-1;e>=0;e--)k[e]&&k[e].$element===t&&k.splice(e,1)}function c(t){var e=[];return 1==t.scheduleType&&(t.detail||[]).reduce(function(t,e){var n=(e.data||[]).reduce(function(t,e){return 1==e.moduleTypeValue&&(e.data||[]).reduce(function(t,e){return e.latitude&&e.longitude&&t.push(e),t},t),t},[]);return t.push({day:e.day,cid:e.cid,list:n}),t},e),e.filter(function(t){return t.list.length})}Object.defineProperty(e,"__esModule",{value:!0}),e.journey4Module=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=n(334),f=i(d),p=n(311),h=n(312),v=n(351),m=i(v),y=n(349),g=n(355),b=n(350),_=n(357),x=n(359),w=n(361),j=$(window),k=($(document),[]),I=!1,T=f.compile(w.spotDetailTemplate,{client:!0,compileDebug:!1}),C=function(){function t(e,n,i){a(this,t),this.valid=!(!n||"object"!==("undefined"==typeof n?"undefined":l(n))),this.$element=e,this.data=n||{},this.options=Object.assign({tabHeight:0},i),this.isResourceType=2==this.data.scheduleType,this.currentDayId=null,this.inited=!1,this.resList=null}return u(t,[{key:"init",value:function(){if(this.valid){this.inited=!0,this.resList=(this.data.detail||[]).reduce(function(t,e){return t[e.cid]=e,(e.data||[]).forEach(function(e){t[e.cid]=e,(e.data||[]).forEach(function(e){t[e.cid]=e})}),t},{}),this.smallMapData=c(this.data);var t=this.$element.find(".J_JourneyNav"),e=this.$element.find(".J_DetailJourney");(0,b.createScrollTaber)(t,Object.assign({ctx:this.$element,offset:this.options.tabHeight},this.options.scrollTaber));if(!this.isResourceType){(0,b.createScrollTaber)(t,{ctx:this.$element,offset:this.options.tabHeight,attr:"data-sub-rel"})}(0,y.createFixer)(t,Object.assign({range:{top:e,bottom:e,left:this.$element,right:this.$element},offset:{top:this.options.tabHeight+32},ctx:this.$element},this.options.fixer));if(!this.isResourceType){var n=this.$element.find(".J_Journey4RouteTab");n.length&&(0,g.createTaber)(n,{ctx:this.$element});var i=this.$element.find(".J_DetailRouteBrief"),a=i.find(".J_DetailRouteBriefBox"),r=i.find(".J_DetailRouteBriefInner"),s=a.height(),l=r.height();this.initDownToolbar(),s<l&&i.addClass("fold"),s>l&&a.height(l),this.briefMinHeight=s,this.briefMaxHeight=l,this.$brief=i,this.$briefBox=a,this.$briefInner=r,this.smallMapData&&this.smallMapData.length&&(this.$mapDay=this.$element.find(".J_DetailJourneyMapDay"),this.$mapSmall=this.$element.find(".J_DetailJourneyMapSmall"),this.$mapSmall.length&&this.setSmallMap(o(this.$mapSmall,this.setSmallMap.bind(this))))}this.$element.find("img").each(function(){var t=$(this),e=t.data("src");e&&m.on(t,function(){var n=new Image;n.onload=function(){t.prop("src",e).parent().addClass("loaded"),m.off(t),j.trigger("resize")},n.onerror=function(){t.parent().addClass("loaded"),m.off(t),j.trigger("resize")},n.src=e,t.src=e})}),this.bind()}}},{key:"bind",value:function(){var t=this;this.$element.on("click",".J_ViewMap",function(){}).on("click",".J_ViewDetail",function(e){var n=$(e.currentTarget).data("id");if(n){var i=t.getResDataByCid(n);i&&t.openDetailDialog(i)}}).on("click",".J_DetailRouteBriefMore",function(){t.$briefBox.height(t.briefMaxHeight),t.$brief.addClass("expand"),j.trigger("resize")}).on("click",".J_DetailRouteBriefLess",function(){t.$briefBox.height(t.briefMinHeight),t.$brief.removeClass("expand"),j.trigger("resize")}).on("click",".J_DetailJourneyMapPrev",function(){t.prevMapDay()}).on("click",".J_DetailJourneyMapNext",function(){t.nextMapDay()}).on("click",".J_DetailJourneyMapView",function(){I&&(0,x.openBigMap)(t.data,t.resList,t.currentDayId)})}},{key:"initDownToolbar",value:function(){function t(){var t=i.offset();t&&t.top<j.scrollTop()?a.show():a.hide()}function e(){clearTimeout(n),n=setTimeout(t,10)}var n=void 0,i=this.$element.find(".J_DetailRouteBrief"),a=this.$element.find(".J_SideDownload, .J_SidePrint");a.hide(),j.on("scroll",e)}},{key:"setSmallMap",value:function(t){t&&(this.$mapSmall.removeClass("loading"),this.map=t,this.loadMap())}},{key:"loadMap",value:function(t){if(t=t||this.getCurrentDay()){var e=this.getDayResForMap(t);this.currentDayId=t.cid,this.map.load(e),this.updateMapTab(t)}}},{key:"getResDataByCid",value:function(t){var e=null;return this.resList&&(e=this.resList[t]||null),e}},{key:"getDayResForMap",value:function(t){return t&&t.list?t.list.map(function(t){return{moduleType:"spot",title:t.title,latitude:t.latitude,longitude:t.longitude}}):[]}},{key:"getCurrentDay",value:function(t){var e=void 0;return t=t||this.currentDayId,e=t?this.smallMapData.filter(function(e){return e.cid==t})[0]:this.smallMapData[0]}},{key:"getCurrentDayIndex",value:function(){var t=this,e=0;return this.currentDayId&&this.smallMapData.some(function(n,i){if(n.cid===t.currentDayId)return e=i,!0}),e}},{key:"getDayDataByIndex",value:function(t){return this.smallMapData[t||0]}},{key:"updateMapTab",value:function(t){t=t||this.getCurrentDay(),this.$mapDay.text("第"+t.day+"天")}},{key:"prevMapDay",value:function(){var t=this.getCurrentDayIndex();if(!(t<=0)){var e=this.getDayDataByIndex(t-1);e&&this.loadMap(e)}}},{key:"nextMapDay",value:function(){var t=this.getCurrentDayIndex();if(!(t>=this.smallMapData.length-1)){var e=this.getDayDataByIndex(t+1);e&&this.loadMap(e)}}},{key:"enable",value:function(){this.inited?this.isResourceType||this.map||this.setSmallMap(o(this.$mapSmall,this.setSmallMap.bind(this))):this.init()}},{key:"disable",value:function(){this.isResourceType||this.map||s(this.$mapSmall)}},{key:"openDetailDialog",value:function(t){var e=p.layer.open({title:!1,type:1,content:T({data:t}),closeBtn:!1,btns:0,btn:!1,area:["830px","440px"],success:function(t){setTimeout(function(){new h.Gallery(t.find(".J_DialogGallery"),{autoChange:!0})},1),t.find(".J_DialogClose").click(function(){p.layer.close(e)})}})}}]),t}(),D={init:function(t,e,n){return new C(t,e,n)}};e.journey4Module=D},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(358),o="latitude",s="longitude",c=function(){function t(e,n){i(this,t),this.element=e,this.map=null,this.visible=!1,this.activedMarker=null,this.markers=[],this.option=n||{}}return a(t,[{key:"createMap",value:function(){return new google.maps.Map(this.element,{zoom:1,maxZoom:16,minZoom:1,mapTypeControl:!1,streetViewControl:!1,scaleControl:!0})}},{key:"getMap",value:function(){return this.map||(this.map=this.createMap()),this.map}},{key:"getBound",value:function(){var t=this.resList,e=0,n=90,i=-180,a=180;if(t&&t)return t.forEach(function(t){e=Math.max(t[o],e),n=Math.min(t[o],n),a=Math.min(t[s],a),i=Math.max(t[s],i)}),new google.maps.LatLngBounds(new google.maps.LatLng(n,a),new google.maps.LatLng(e,i))}},{key:"resize",value:function(){var t=this.getBound();google.maps.event.trigger(this.map,"resize"),this.map.setCenter(t.getCenter()),this.map.fitBounds(t)}},{key:"renderMarker",value:function(t){var e=(0,r.createMarker)({serial:1,type:t.moduleType,name:t.title,latitude:t.latitude,longitude:t.longitude});return e.id=t.id,e.setMap(this.map),this.markers.push(e),e}},{key:"bindMarkerEvent",value:function(t,e){var n=this;t.addListener("click",function(){n.activateMarker(t),n.option&&n.option.onMarkerActive&&n.option.onMarkerActive(e)}),t.addListener("mouseenter",function(){this.hightlight(),this.moveToTop()}),t.addListener("mouseleave",function(){this.removeHightlight(),this.restoreZIndex()})}},{key:"clearAllMarker",value:function(){for(var t,e=this.markers;e.length;)t=e.pop(),t.setMap(null)}},{key:"activateMarker",value:function(t){this.activedMarker&&(this.activedMarker.deactivate(),this.activedMarker=null),t&&(this.activedMarker=t,t.activate())}},{key:"activateMarkerById",value:function(t){var e=this.getMarkerById(t);e&&this.activateMarker(e)}},{key:"getMarkerById",value:function(t){return this.markers.filter(function(e){return e.id==t})[0]}},{key:"render",value:function(){var t=this,e=this.resList;this.activeSpot;e&&e&&(this.getMap(),this.clearAllMarker(),this.map.fitBounds(this.getBound()),e.forEach(function(e,n){t.bindMarkerEvent(t.renderMarker(Object.assign({},e,{serial:n+1})),e)}))}},{key:"load",value:function(t){this.resList=t,this.render()}}]),t}();e.Map=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(){return f?f:f=function(t){function e(t){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.data=t,a.active=!!t.active,t.active=!1,a.element=null,a.typeClassName="jmap-spot-"+t.type,a.hightlightClassName="jmap-spot-"+t.type+"-hightlight",a.activeClassName="jmap-spot-"+a.data.type+"-active",a}return a(e,t),s(e,[{key:"onAdd",value:function(){var t=this,e='<div class="jmap-spot '+this.typeClassName+'"><div class="jmap-win-box"><i class="jmap-win-arrow"></i><div class="jmap-win-content">'+this.data.name+'</div></div><div class="jmap-marker"></div></div>',n=this.getPanes(),i=$(e),a=i.clone().css({opacity:0,filter:"alpha(opacity=0)"});this.element=i,this.mask=a,a.find(".jmap-win-box, .jmap-marker").on("click",function(){google.maps.event.trigger(t,"click")}).on("mouseenter",function(){google.maps.event.trigger(t,"mouseenter")}).on("mouseleave",function(){google.maps.event.trigger(t,"mouseleave")}),this.active&&this.activateBySelf(),n.markerLayer.appendChild(i[0]),n.floatPane.appendChild(a[0])}},{key:"draw",value:function(){this.setPosition(this.data[u],this.data[d])}},{key:"onRemove",value:function(){this.element.remove(),this.mask.remove(),this.element=null,this.mask=null}},{key:"setZIndex",value:function(t){this.element&&(t=t||1,this.element.css("z-index",t),this.mask.css("z-index",t))}},{key:"moveToTop",value:function(){this.setZIndex(999)}},{key:"restoreZIndex",value:function(){this.setZIndex(1)}},{key:"setPosition",value:function(t,e){if(this.element){var n=this.getProjection(),i=n.fromLatLngToDivPixel(new google.maps.LatLng(t,e)),a={top:i.y-l-28+"px",left:i.x-this.element.width()/2+c/2-1+"px"};this.element.css(a),this.mask.css(a)}}},{key:"activate",value:function(){this.active=!0,this.element&&this.element.addClass(this.activeClassName),this.moveToTop()}},{key:"activateBySelf",value:function(){this.activate(),$(window).trigger("mapMarkerActivated",this.data)}},{key:"deactivate",value:function(){this.active=!1,this.element&&this.element.removeClass(this.activeClassName),this.restoreZIndex()}},{key:"deactivateBySelf",value:function(){this.deactivate(),$(window).trigger("mapMarkerDeactivated",this.data)}},{key:"hightlight",value:function(){this.element&&this.element.addClass(this.hightlightClassName)}},{key:"removeHightlight",value:function(){this.element&&this.element.removeClass(this.hightlightClassName)}}]),e}(google.maps.OverlayView)}function o(t){return new(r())(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.createMarker=o;var c=43,l=43,u="latitude",d="longitude",f=void 0},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){var e;return v.some(function(n){if(n.cid==t||n.data&&n.data.some(function(e){return e.cid==t}))return e=n,!0}),e}function r(t){return t?(t.data||[]).reduce(function(e,n){return(n.data||[]).forEach(function(n){n.latitude&&n.longitude&&e.push({moduleType:"spot",cid:n.cid,id:n.cid,dayId:t.cid,title:n.title,latitude:n.latitude,longitude:n.longitude})}),e},[]):[]}function o(){return b.find(".map-sub-item").data("nav-id")}function s(t){function e(t,e){if(t){var i=a(t);if(i){var o=r(i);if(o.length)return s.load(o),e||(e=o[0].cid),n(t,e),void s.activateMarkerById(e)}n(t,e)}}function n(t,e){b.find(".map-nav-active").removeClass("map-nav-active").end().find(".map-nav-sub").hide();var n=b.find(".map-main-item[data-nav-id="+t+"]").addClass("map-nav-active").siblings(".map-nav-sub").show();n.find(".map-sub-item").removeClass("map-nav-active").filter("[data-sub-id="+e+"]").addClass("map-nav-active"),n.end().closest(".map-nav-sub").show()}function i(t){t&&t.cid&&t.dayId&&e(t.dayId,t.cid)}var s=new l.Map(t.find(".J_MapDetail")[0],{onMarkerActive:i});b=t.find(".J_MapDetailJourney"),t.on("click",".map-nav-item",function(){e($(this).data("nav-id"))}).on("click",".map-sub-item",function(){e($(this).data("nav-id"),$(this).data("sub-id"))}).on("click",".J_MapDetailClose",function(){u.layer.close(g)}),y&&(b.find(".map-sub-item[data-nav-id="+y+"]").length||(y=null)),e(y||o())}function c(t,e,n){v=t.detail,m=e,y=n,g=u.layer.open({type:1,title:!1,closeBtn:!1,content:h({data:v,scheduleType:t.scheduleType}),area:["1000px","600px"],btn:!1,success:s})}Object.defineProperty(e,"__esModule",{value:!0}),e.openBigMap=c;var l=n(357),u=n(311),d=n(334),f=i(d),p=n(360),h=f.compile(p.mapDialogTemplate,{client:!0,compileDebug:!1}),v=void 0,m=void 0,y=void 0,g=void 0,b=void 0},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.mapDialogTemplate='\n<div class="map-detail">\n    <div class="J_MapDetailClose map-detail-close"></div>\n    <div class="J_MapDetail map-detail-map"></div>\n    <div class="map-detail-journey">\n    <div class="J_MapDetailJourney map-nav">\n      <ul class="map-nav-main">\n        <% if (scheduleType == 1) { %>\n          <% for (var journeyIndex = 0, list; journeyIndex < data.length; journeyIndex++) { %>\n            <% if (data[journeyIndex] && (list = data[journeyIndex][\'data\']) && list.length) { %>\n                <% for (var isBlank = true, moduleIndex = 0; moduleIndex < list.length; moduleIndex++) {\n                    var moduleData = list[moduleIndex];\n                    if (moduleData.data && moduleData.data.length) {\n                        isBlank = !moduleData.data.filter(function(resData) {\n                            return resData && resData.latitude && resData.longitude\n                        }).length;\n                        if (!isBlank) {\n                            break;\n                        }\n                    }\n                } %>\n                <% if (!isBlank) { %>\n                    <li>\n                        <div class="map-nav-item map-main-item" data-nav-id="<%= data[journeyIndex][\'cid\'] %>">\n                          <div class="map-nav-label" title="第<%= data[journeyIndex][\'day\'] %>天">第<%= data[journeyIndex][\'day\'] %>天</div>\n                          <i class="map-nav-icon-serial"><span>D<%= data[journeyIndex][\'day\'] %></span></i>\n                        </div>\n                        <ul class="map-nav-sub">\n                          <% var itemIndex = 1;%>\n                          <% for (var moduleIndex = 0; moduleIndex < list.length; moduleIndex++) { %>\n                              <% var moduleData = list[moduleIndex] %>\n                              <% if (moduleData) { %>\n                                  <% if (moduleData.data && moduleData.data.length) { %>\n                                      <% for(var resIndex = 0; resIndex <  moduleData.data.length; resIndex++) { %>\n                                          <% var resData = moduleData.data[resIndex] %>\n                                          <% if (resData && resData.latitude && resData.longitude) { %>\n                                              <li>\n                                                <div class="map-nav-item map-sub-item" data-nav-id="<%= data[journeyIndex][\'cid\'] %>" data-sub-id="<%= resData[\'cid\'] %>">\n                                                  <div class="map-nav-label" title="<%= resData[\'title\'] %>"><%= resData[\'title\'] %></div>\n                                                  <i class="map-nav-icon-serial"><span><%= itemIndex++ %></span></i>\n                                                </div>\n                                              </li>\n                                          <% } %>\n                                      <% } %>\n                                  <% } %>\n                              <% } %>\n                          <% } %>\n                        </ul>\n                    </li>\n                <% } %>\n            <% } %>\n          <% } %>\n        <% } %>\n      </ul>\n    </div>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.spotDetailTemplate='\n<div class="detail-dialog">\n    <!-- dialog head S -->\n    <div class="detail-dialog-head">\n        <div class="detail-dialog-title"><%= data.title %></div>\n        <div class="J_DialogClose detail-dialog-close"></div>\n    </div>\n    <!-- dialog head E -->\n    <div class="detail-dialog-body">\n        <div class="detail-dialog-gallery">\n            <% if (data.picture && data.picture.length) { %>\n                <div class="J_DialogGallery gallery">\n                    <div class="gallery-display">\n                        <ul class="gallery-display-box">\n                            <% if (data.picture && data.picture.length) { %>\n                                <% for(var i = 0, len = data.picture.length, item; i < data.picture.length && (item = data.picture[i]); i++) { %>\n                                <li class="gallery-photo<% if (i === 0) { %> gallery-photo-active<% } %>" data-src="<%= item.url %>" data-thumb="<%= item.url %>">\n                                    <img src="<%= item.url %>" alt="<%= item.title %>">\n                                </li>\n                                <% } %>\n                            <% } %>\n                        </ul>\n                    </div>\n                    <div class="gallery-nav">\n                        <div class="gallery-prev"><i class="icon"></i></div>\n                        <div class="gallery-next"><i class="icon"></i></div>\n                        <div class="gallery-thumbs">\n                            <div class="gallery-mask"></div>\n                            <div class="gallery-nav-box">\n                                <ul class="gallery-nav-list">\n                                    <% if (data.picture && data.picture.length) { %>\n                                        <% for(var i = 0, len = data.picture.length, item; i < data.picture.length && (item = data.picture[i]); i++) { %>\n                                        <li class="gallery-thumb"><img src="<%= item.url %>" alt="<%= item.title %>"></li>\n                                        <% } %>\n                                    <% } %>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            <% } %>\n        </div>\n\n        <div class="detail-dialog-info">\n            <div class="detail-dialog-info-box">\n                <div class="detail-dialog-info-title">\n                    景点介绍<i class="icon detail-content-icon-note"></i>\n                </div>\n                <% if (data.beenCount && data.beenCount != 0) { %>\n                    <div class="detail-dialog-info-item">\n                        <i class="icon detail-content-icon-person"></i>\n                        <strong class="detail-dialog-info-strong"><%= data.beenCount %></strong>人去过\n                    </div>\n                <% } %>\n                <% if (data.times != 0) { %>\n                    <div class="detail-dialog-info-item">\n                        <i class="icon detail-content-icon-clock"></i> 游玩时长:\n                        <%= data.times %>\n                    </div>\n                <% } %>\n                <% if (data.opened) { %>\n                    <div class="detail-dialog-info-item">\n                        <i class="icon detail-content-icon-calendar"></i> 开放时间:\n                        <%= data.opened %>\n                    </div>\n                <% } %>\n                <% if (data.telephone) { %>\n                    <div class="detail-dialog-info-item">\n                        <i class="icon detail-content-icon-telphone"></i> 电话号码:\n                        <%= data.telephone %>\n                    </div>\n                <% } %>\n                <% if (data.address) { %>\n                    <div class="detail-dialog-info-item">\n                        <i class="icon detail-content-icon-location"></i> 景点地址:\n                        <%= data.address %>\n                    </div>\n                <% } %>\n                <% if (data.content) { %>\n                    <div class="detail-dialog-info-desc">\n                        <%- data.content %>\n                    </div>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</div>\n';},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){if(document.cookie.length>0){var e=document.cookie.indexOf(t+"=");if(e!=-1){e=e+t.length+1;var n=document.cookie.indexOf(";",e);return n==-1&&(n=document.cookie.length),unescape(document.cookie.substring(e,n))}}return""}function o(t){t.find("img").each(function(){var t=$(this),e=t.data("src");O.on(t,function(){var n=new Image;n.onload=function(){t.prop("src",e).parent().addClass("loaded"),O.off(t),Y.trigger("resize")},n.onerror=function(){t.parent().addClass("loaded"),O.off(t),Y.trigger("resize")},n.src=e,t.src=e})})}function s(t){t.find(".item-label-fixed").each(function(){var t=$(this),e=t.find(".item-label-inner"),n=t.height(),i=e.height();n<i&&(e.height(n),t.addClass("fold"),t.on("click",".item-label-more",function(){t.addClass("expand"),e.height(i),Y.trigger("resize")}).on("click",".item-label-less",function(){t.removeClass("expand"),e.height(n),Y.trigger("resize")}))}),Y.trigger("resize")}function c(t){var e=t.find(".J_Journey3RouteTab");(0,A.createTaber)(e,{ctx:t})}function l(t){var e=t.journeyDescJson;return e&&"object"==("undefined"==typeof e?"undefined":d(e))&&(e.detail||[]).forEach(function(t,e){t.cid="d"+e,(t.data||[]).forEach(function(e,n){e.cid=t.cid+"-m"+n,(e.data||[]).forEach(function(t,n){return t.cid=e.cid+"-s"+n})})}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Journey=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},f=n(298),p=n(334),h=i(p),v=n(363),m=n(365),y=n(366),g=n(367),b=n(368),_=n(369),x=n(370),w=n(371),j=n(372),k=n(373),I=n(374),T=n(375),C=n(376),D=n(379),S=n(382),M=n(351),O=i(M),E=n(356),P=n(349),A=n(355),N=n(350),L=1,J=3,R=4,F=5,V=void 0,G=void 0,H=void 0,B=void 0,U=void 0,z=$("#J_MultiJourneyTab"),W=z.find(".journey-tab-list"),Y=$(window),K=void 0;e.Journey=function(){function t(e){a(this,t),this.status=L,this.config=e,this.journeyId=e.journeyId,this.$tab=W.find(".journey-tab-item").filter('[data-id="'+this.journeyId+'"]'),this.rel=this.$tab.data("rel"),this.journeyIns=null,this.active=!1,this.journeyData=null,V=$("#J_MultiJourneyNav"),G=V.find("[data-rel]"),H=$("#J_DetailTab").height(),B=$("#J_DetailMultiRoute"),U=$("#J_MultiJourneySelect"),K=(0,f.getStore)(),e.data&&(this.journeyData=e.data,this.status=R),$(this.rel).length&&(this.status=F)}return u(t,[{key:"initVisa",value:function(){O.off(this.$visa);var t=new C.Visa({$el:this.$visa});(0,S.fetchVisa)(function(e){t.load(e),t.render()},function(){t.remove()})}},{key:"initGuide",value:function(){O.off(this.$guide);var t=new D.Guide({$el:this.$guide});(0,S.fetchGuide)(function(e){t.load(e),t.render()},function(){t.remove()})}},{key:"activate",value:function(){var t=this;t.active=!0,t.journeyData?(t.isRendered()||t.render(),t.show()):t.fetch()}},{key:"show",value:function(){var t=this.journeyIns;["$tab","$target","$floatTab"].forEach(function(e){return t[e].addClass("active")}),t.enable(),U.text(t.label)}},{key:"hide",value:function(){var t=this.journeyIns;["$tab","$target","$floatTab"].forEach(function(e){return t[e].removeClass("active")}),t.disable()}},{key:"fetch",value:function(t){var e=this;$.ajax({url:e.config.getJourneyUrl(),data:{d:JSON.stringify(e.getJourneyReqParams(e.journeyId))},beforeSend:function(){e.startLoading()}}).done(function(t){t&&t.success&&t.data&&e.load(l(t.data))}).always(function(){e.stopLoading()})}},{key:"load",value:function(t){this.journeyData=t,this.status=R,this.active&&this.render()}},{key:"render",value:function(){var t=this,e=t.createRender(m.multiJourneyTemplate),n=t.createRender(y.featureTemplate),i=t.createRender(g.journeyTemplate),a=t.createRender(b.feeTemplate),o=t.createRender(_.policyTemplate),s=t.createRender(k.journey4Template),c=t.createRender(x.journey3Template),l=t.createRender(w.journeyOldTemplate),u=t.createRender(j.journeyPDFTemplate),d=t.createRender(I.journey4PhotoTemplate),f=t.createRender(T.journey4ResourceTemplate),p={helper:v.helper,cdn:{cdnHost:"http://img1.tuniucdn.com"}},h=e(Object.assign({},p,{data:K.getState("detail"),journey:t.journeyData,tab:K.getState("multiTab").filter(function(e){return e.journeyId==t.journeyId})[0],cityCodeFromCookie:r("tuniuuser_citycode")}),null,function(t,e){switch(t){case"feature":return n(Object.assign({},p,e));case"journey":return i(Object.assign({},p,e),null,function(t,e){switch(t){case"journey4":return s(Object.assign({},p,e),null,function(t,e){if("journey4Resource"==t)return f(Object.assign({},p,e),null,function(t,e){if("journey4Photo"==t)return d(Object.assign({},p,e))})});case"journey3":return c(Object.assign({},p,e));case"journeyOld":return l(Object.assign({},p,e));case"journeyPDF":return u(Object.assign({},p,e))}});case"fee":return a(Object.assign({},p,e));case"policy":return o(Object.assign({},p,e))}});$(".J_multiContainer").append(h),this.status=F,this.bind(!0)}},{key:"bind",value:function(t){var e=this;e.initSupplier(),e.initReception(),e.$visa=$(".J_DetailVisa").filter('[data-id="'+e.journeyId+'"]'),e.$guide=$(".J_Guide").filter('[data-id="'+e.journeyId+'"]'),O.on(e.$visa,e.initVisa.bind(e)),O.on(e.$guide,e.initGuide.bind(e)),3==e.journeyData.isNewJson?e.journeyIns=e.initOneJourney4(e.journeyData):e.journeyIns=e.initOneJourney3(),t&&e.show()}},{key:"initOneJourney3",value:function(){function t(){return v?(m&&m.update(),y&&y.update(),g&&g.update(),void(b&&b.update())):(v=!0,s(a),c(u),f.length&&(m=(0,P.createFixer)(f,{range:{top:f,bottom:a,left:B,right:B},offset:{top:h,left:0},ctx:a}),h+=f.height(),y=(0,N.createScrollTaber)(f,{offset:h,ctx:a})),g=(0,P.createFixer)(l,{range:{top:d,bottom:d,left:a,right:a},offset:{top:h+10},ctx:a}),void(b=(0,N.createScrollTaber)(l,{offset:h})))}function e(){m&&m.disable(),y&&y.disable(),g&&g.disable(),b&&b.disable()}function n(){t(),p.prepend(V),m&&m.enable(),y&&y.enable(),g&&g.enable(),b&&b.enable()}var i=this.$tab.data("rel"),a=$(i),r=G.filter('[data-rel="'+i+'"]'),l=a.find(".J_JourneyNav"),u=a.find(".J_DetailRoute"),d=a.find(".J_DetailJourney"),f=a.find(".J_JourneyTab"),p=(a.find(".J_JourneyRouteTab"),f.find(".section-box-toolbar")),h=H,v=!1,m=void 0,y=void 0,g=void 0,b=void 0;return o(a),{$tab:this.$tab,$floatTab:r,$target:a,id:this.journeyId,label:r.text(),disable:e,enable:n}}},{key:"initOneJourney4",value:function(t){function e(){l||(l=!0,o.length&&(u=(0,P.createFixer)(o,{range:{top:o,bottom:a,left:B,right:B},offset:{top:H,left:0},ctx:a}),d=(0,N.createScrollTaber)(o,{offset:c,ctx:a}))),s.prepend(V),f.enable(),u&&u.update(),d&&d.update(),u&&u.enable(),d&&d.enable()}function n(){f.disable(),u&&u.disable(),d&&d.disable()}var i=this.$tab.data("rel"),a=$(i),r=G.filter('[data-rel="'+i+'"]'),o=a.find(".J_JourneyTab"),s=o.find(".section-box-toolbar"),c=H,l=!1,u=void 0,d=void 0;o.length&&(c+=o.height());var f=E.journey4Module.init(a,t.journeyDescJson,{tabHeight:c});return{$tab:this.$tab,$floatTab:r,$target:a,id:this.journeyId,label:r.text(),disable:n,enable:e}}},{key:"initSupplier",value:function(){if(!this.config.isNeedReception()){var t=K.getState("supplier");t&&$(".J_DetailSupplier:not(.loaded-supplier)").each(function(){var e=$(this),n=e.data("id");if(n){var i=(t||[]).filter(function(t){return t.resId==n})[0];if(i){var a="<strong>"+i.aggregationCompanyName+"</strong>";a+="（该品牌在"+i.displayDestGroupName+"目的地满意度<strong>"+i.statis+"%</strong>",0!=i.delta&&(a+="，",a+=i.deltaSign>0?"高":i.deltaSign<0?"低":"等",a+="于"+i.displayDestGroupName+"平均满意度 <span>"+i.delta+"%</span>"),a+="）",e.find(".J_DetailSupplierContent").html(a),e.show()}}e.addClass("loaded-supplier")})}}},{key:"initReception",value:function(){if(this.config.isNeedReception()){var t=K.getState("supplier");t&&$(".J_DetailReception:not(.loaded-reception)").each(function(){var e=$(this),n=e.data("id");if(n){var i=(t||[]).filter(function(t){return t.resId==n})[0];if(i&&i.groundOperatorsName){var a="接待服务由 <strong>"+(i.groundOperatorsName||"")+"</strong> 提供";e.find(".J_DetailReceptionContent").html(a),e.show()}}e.addClass("loaded-reception")})}}},{key:"loadGuide",value:function(t){this.guide.load(t),this.isRendered()&&this.active&&this.renderGuide()}},{key:"renderGuide",value:function(){this.guide.isLoaded()&&!this.guide.isRendered()&&(this.guide.render(),this.append(this.guide),this.guide.bind())}},{key:"getJourneyReqParams",value:function(){return{productId:K.getState("productId"),journeyId:this.journeyId,cityCodeFromCookie:r("tuniuuser_citycode"),bookCode:K.getState("bookCityCode"),departCode:K.getState("departCityCode"),backCode:K.getState("backCityCode")}}},{key:"startLoading",value:function(){$(".J_journeyLoading").show().css({height:$(".J_MultiDetailJourney.active").height()})}},{key:"stopLoading",value:function(){$(".J_journeyLoading").hide(),Y.trigger("resize")}},{key:"createRender",value:function(t){return h.compile(t,{client:!0,compileDebug:!1})}},{key:"isLoading",value:function(){return this.status==J}},{key:"isLoaded",value:function(){return this.status>=R}},{key:"isRendered",value:function(){return this.status>=F}}]),t}()},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.helper=void 0;var a=n(364),r=i(a);e.helper={removeHtmlTag:function(t){return String(t).replace(/<[a-zA-Z\/][^<>]*>/g,"")},trimBoundBr:function(t){return"string"==typeof t&&t?t.replace(/\s/g,"").replace(/^(<br\/?>)+/,"").replace(/(<br\/?>)+$/,""):t},resizeImage:function(t,e,n,i,a){var r=/^(.*?)(_w\d+_h\d+_c\d+_t\d+)+\.([\w]+)$/,o=void 0;return e=e||0,n=n||0,i=i||0,a=a||0,(o=r.exec(t))?[o[1],"_",["w"+e,"h"+n,"c"+i,"t"+a].join("_"),".",o[3]].join(""):t},nb2br:function(t){return t=t||"",t.replace(/\n+?/gm,"<br>")},calculateDuration:function(t,e){if(t&&e){var n=/^(\d+):(\d+)$/,i=n.exec(t);n.lastIndex=0;var a=n.exec(e);if(i&&a)return 60*parseInt(a[1],10)+parseInt(a[2],10)-60*parseInt(i[1],10)-parseInt(i[2],10)}return 0},wrap:function(t){return t},empty:function(t){function e(t){return r.isString(t)?!t.replace(/^\s*|\s*$/g,""):r.isNumber(t)?!t:r.isBoolean(t)?t:Array.isArray(t)?t.every(e):r.isEmpty(t)}return e(t)}}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};(function(){var n=this||window,a=n._,r={},o=Array.prototype,s=Object.prototype,c=Function.prototype,l=o.push,u=o.slice,d=o.concat,f=s.toString,p=s.hasOwnProperty,h=o.forEach,v=o.map,m=o.reduce,y=o.reduceRight,g=o.filter,b=o.every,_=o.some,x=o.indexOf,w=o.lastIndexOf,j=Array.isArray,k=Object.keys,I=c.bind,T=function G(t){return t instanceof G?t:this instanceof G?void(this._wrapped=t):new G(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=T),e._=T,T.VERSION="1.6.0";var C=T.each=T.forEach=function(t,e,n){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++)if(e.call(n,t[i],i,t)===r)return}else for(var o=T.keys(t),i=0,a=o.length;i<a;i++)if(e.call(n,t[o[i]],o[i],t)===r)return;return t};T.map=T.collect=function(t,e,n){var i=[];return null==t?i:v&&t.map===v?t.map(e,n):(C(t,function(t,a,r){i.push(e.call(n,t,a,r))}),i)};var D="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(t,e,n,i){var a=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return i&&(e=T.bind(e,i)),a?t.reduce(e,n):t.reduce(e);if(C(t,function(t,r,o){a?n=e.call(i,n,t,r,o):(n=t,a=!0)}),!a)throw new TypeError(D);return n},T.reduceRight=T.foldr=function(t,e,n,i){var a=arguments.length>2;if(null==t&&(t=[]),y&&t.reduceRight===y)return i&&(e=T.bind(e,i)),a?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var o=T.keys(t);r=o.length}if(C(t,function(s,c,l){c=o?o[--r]:--r,a?n=e.call(i,n,t[c],c,l):(n=t[c],a=!0)}),!a)throw new TypeError(D);return n},T.find=T.detect=function(t,e,n){var i;return S(t,function(t,a,r){if(e.call(n,t,a,r))return i=t,!0}),i},T.filter=T.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,a,r){e.call(n,t,a,r)&&i.push(t)}),i)},T.reject=function(t,e,n){return T.filter(t,function(t,i,a){return!e.call(n,t,i,a)},n)},T.every=T.all=function(t,e,n){e||(e=T.identity);var i=!0;return null==t?i:b&&t.every===b?t.every(e,n):(C(t,function(t,a,o){if(!(i=i&&e.call(n,t,a,o)))return r}),!!i)};var S=T.some=T.any=function(t,e,n){e||(e=T.identity);var i=!1;return null==t?i:_&&t.some===_?t.some(e,n):(C(t,function(t,a,o){if(i||(i=e.call(n,t,a,o)))return r}),!!i)};T.contains=T.include=function(t,e){return null!=t&&(x&&t.indexOf===x?t.indexOf(e)!=-1:S(t,function(t){return t===e}))},T.invoke=function(t,e){var n=u.call(arguments,2),i=T.isFunction(e);return T.map(t,function(t){return(i?e:t[e]).apply(t,n)})},T.pluck=function(t,e){return T.map(t,T.property(e))},T.where=function(t,e){return T.filter(t,T.matches(e))},T.findWhere=function(t,e){return T.find(t,T.matches(e))},T.max=function(t,e,n){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-(1/0),a=-(1/0);return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>a&&(i=t,a=s)}),i},T.min=function(t,e,n){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,a=1/0;return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<a&&(i=t,a=s)}),i},T.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=T.random(n++),i[n-1]=i[e],i[e]=t}),i},T.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=T.values(t)),t[T.random(t.length-1)]):T.shuffle(t).slice(0,Math.max(0,e))};var M=function(t){return null==t?T.identity:T.isFunction(t)?t:T.property(t)};T.sortBy=function(t,e,n){return e=M(e),T.pluck(T.map(t,function(t,i,a){return{value:t,index:i,criteria:e.call(n,t,i,a)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,n,i){var a={};return n=M(n),C(e,function(r,o){var s=n.call(i,r,o,e);t(a,s,r)}),a}};T.groupBy=O(function(t,e,n){T.has(t,e)?t[e].push(n):t[e]=[n]}),T.indexBy=O(function(t,e,n){t[e]=n}),T.countBy=O(function(t,e){T.has(t,e)?t[e]++:t[e]=1}),T.sortedIndex=function(t,e,n,i){n=M(n);for(var a=n.call(i,e),r=0,o=t.length;r<o;){var s=r+o>>>1;n.call(i,t[s])<a?r=s+1:o=s}return r},T.toArray=function(t){return t?T.isArray(t)?u.call(t):t.length===+t.length?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:t.length===+t.length?t.length:T.keys(t).length},T.first=T.head=T.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:e<0?[]:u.call(t,0,e)},T.initial=function(t,e,n){return u.call(t,0,t.length-(null==e||n?1:e))},T.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},T.rest=T.tail=T.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var E=function H(t,e,n){return e&&T.every(t,T.isArray)?d.apply(n,t):(C(t,function(t){T.isArray(t)||T.isArguments(t)?e?l.apply(n,t):H(t,e,n):n.push(t)}),n)};T.flatten=function(t,e){return E(t,e,[])},T.without=function(t){return T.difference(t,u.call(arguments,1))},T.partition=function(t,e){var n=[],i=[];return C(t,function(t){(e(t)?n:i).push(t)}),[n,i]},T.uniq=T.unique=function(t,e,n,i){T.isFunction(e)&&(i=n,n=e,e=!1);var a=n?T.map(t,n,i):t,r=[],o=[];return C(a,function(n,i){(e?i&&o[o.length-1]===n:T.contains(o,n))||(o.push(n),r.push(t[i]))}),r},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=function(t){var e=u.call(arguments,1);return T.filter(T.uniq(t),function(t){return T.every(e,function(e){return T.contains(e,t)})})},T.difference=function(t){var e=d.apply(o,u.call(arguments,1));return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){for(var t=T.max(T.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=T.pluck(arguments,""+n);return e},T.object=function(t,e){if(null==t)return{};for(var n={},i=0,a=t.length;i<a;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},T.indexOf=function(t,e,n){if(null==t)return-1;var i=0,a=t.length;if(n){if("number"!=typeof n)return i=T.sortedIndex(t,e),t[i]===e?i:-1;i=n<0?Math.max(0,a+n):n}if(x&&t.indexOf===x)return t.indexOf(e,n);for(;i<a;i++)if(t[i]===e)return i;return-1},T.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(w&&t.lastIndexOf===w)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var a=i?n:t.length;a--;)if(t[a]===e)return a;return-1},T.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),a=0,r=new Array(i);a<i;)r[a++]=t,t+=n;return r};var P=function(){};T.bind=function(t,e){var n,i;if(I&&t.bind===I)return I.apply(t,u.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return n=u.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(u.call(arguments)));P.prototype=t.prototype;var a=new P;P.prototype=null;var r=t.apply(a,n.concat(u.call(arguments)));return Object(r)===r?r:a}},T.partial=function(t){var e=u.call(arguments,1);return function(){for(var n=0,i=e.slice(),a=0,r=i.length;a<r;a++)i[a]===T&&(i[a]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},T.bindAll=function(t){var e=u.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=T.bind(t[e],t)}),t},T.memoize=function(t,e){var n={};return e||(e=T.identity),function(){var i=e.apply(this,arguments);return T.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},T.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},T.defer=function(t){return T.delay.apply(T,[t,1].concat(u.call(arguments,1)))},T.throttle=function(t,e,n){var i,a,r,o=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:T.now(),o=null,r=t.apply(i,a),i=a=null};return function(){var l=T.now();s||n.leading!==!1||(s=l);var u=e-(l-s);return i=this,a=arguments,u<=0?(clearTimeout(o),o=null,s=l,r=t.apply(i,a),i=a=null):o||n.trailing===!1||(o=setTimeout(c,u)),r}},T.debounce=function(t,e,n){var i,a,r,o,s,c=function l(){var c=T.now()-o;c<e?i=setTimeout(l,e-c):(i=null,n||(s=t.apply(r,a),r=a=null))};return function(){r=this,a=arguments,o=T.now();var l=n&&!i;return i||(i=setTimeout(c,e)),l&&(s=t.apply(r,a),r=a=null),s}},T.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},T.wrap=function(t,e){return T.partial(e,t)},T.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},T.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},T.keys=function(t){if(!T.isObject(t))return[];if(k)return k(t);var e=[];for(var n in t)T.has(t,n)&&e.push(n);return e},T.values=function(t){for(var e=T.keys(t),n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t[e[a]];return i},T.pairs=function(t){for(var e=T.keys(t),n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=[e[a],t[e[a]]];return i},T.invert=function(t){for(var e={},n=T.keys(t),i=0,a=n.length;i<a;i++)e[t[n[i]]]=n[i];return e},T.functions=T.methods=function(t){var e=[];for(var n in t)T.isFunction(t[n])&&e.push(n);return e.sort()},T.extend=function(t){return C(u.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},T.pick=function(t){var e={},n=d.apply(o,u.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},T.omit=function(t){var e={},n=d.apply(o,u.call(arguments,1));for(var i in t)T.contains(n,i)||(e[i]=t[i]);return e},T.defaults=function(t){return C(u.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t};var A=function B(t,e,n,a){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var r=f.call(t);if(r!=f.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=("undefined"==typeof t?"undefined":i(t))||"object"!=("undefined"==typeof e?"undefined":i(e)))return!1;for(var o=n.length;o--;)if(n[o]==t)return a[o]==e;var s=t.constructor,c=e.constructor;if(s!==c&&!(T.isFunction(s)&&s instanceof s&&T.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),a.push(e);var l=0,u=!0;if("[object Array]"==r){if(l=t.length,u=l==e.length)for(;l--&&(u=B(t[l],e[l],n,a)););}else{for(var d in t)if(T.has(t,d)&&(l++,!(u=T.has(e,d)&&B(t[d],e[d],n,a))))break;if(u){for(d in e)if(T.has(e,d)&&!l--)break;u=!l}}return n.pop(),a.pop(),u};T.isEqual=function(t,e){return A(t,e,[],[])},T.isEmpty=function(t){if(null==t)return!0;if(T.isArray(t)||T.isString(t))return 0===t.length;for(var e in t)if(T.has(t,e))return!1;return!0},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=j||function(t){return"[object Array]"==f.call(t)},T.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){T["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return!(!t||!T.has(t,"callee"))}),T.isFunction=function(t){return"function"==typeof t},T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!=+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return p.call(t,e)},T.noConflict=function(){return n._=a,this},T.identity=function(t){return t},T.constant=function(t){return function(){return t}},T.property=function(t){return function(e){return e[t]}},T.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},T.times=function(t,e,n){for(var i=Array(Math.max(0,t)),a=0;a<t;a++)i[a]=e.call(n,a);return i},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},T.now=Date.now||function(){return(new Date).getTime()};var $={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};$.unescape=T.invert($.escape);var N={escape:new RegExp("["+T.keys($.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys($.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(t){T[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return $[t][e]})}}),T.result=function(t,e){if(null!=t){var n=t[e];return T.isFunction(n)?n.call(t):n}},T.mixin=function(t){C(T.functions(t),function(e){var n=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),V.call(this,n.apply(T,t))}})};var L=0;T.uniqueId=function(t){var e=++L+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(t,e,n){var i;n=T.defaults({},n,T.templateSettings);var a=new RegExp([(n.escape||J).source,(n.interpolate||J).source,(n.evaluate||J).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(a,function(e,n,i,a,s){return o+=t.slice(r,s).replace(F,function(t){return"\\"+R[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),a&&(o+="';\n"+a+"\n__p+='"),r=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(e)return i(e,T);var c=function(t){return i.call(this,t,T)};return c.source="function("+(n.variable||"obj")+"){\n"+o+"}",c},T.chain=function(t){return T(t).chain()};var V=function(t){return this._chain?T(t).chain():t};return T.mixin(T),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];T.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],V.call(this,n)}}),C(["concat","join","slice"],function(t){var e=o[t];T.prototype[t]=function(){return V.call(this,e.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),T}).call(void 0)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.multiJourneyTemplate='<div class="J_MultiDetailJourney journey-multi-item active" id="J_MultiJourney<%= tab.index %>">\n\n    <div class="journey-multi-brief">\n        <div class="journey-multi-brief-row">\n            <div class="journey-multi-brief-row-title">行程天数：</div>\n            <div class="journey-multi-brief-row-content"><%= tab.day %></div>\n        </div>\n        <div class="journey-multi-brief-row">\n            <div class="journey-multi-brief-row-title">适用团期：</div>\n            <div class="journey-multi-brief-row-content">\n                <% if (tab.applyDateList && tab.applyDateList.length) { %>\n                    <%= tab.applyDateList.join(\'、\') %>\n                <% } else { %>\n                    暂无适用团期\n                <% } %>\n            </div>\n        </div>\n        <div class="J_DetailSupplier journey-multi-brief-row journey-multi-brief-supplier" data-id="<%= journey.tourResId %>">\n            <div class="journey-multi-brief-row-title">产品品牌：</div>\n            <div class="J_DetailSupplierContent journey-multi-brief-row-content"></div>\n        </div>\n        <div class="J_DetailReception journey-multi-brief-row journey-multi-brief-reception" data-id="<%= journey.tourResId %>">\n            <div class="journey-multi-brief-row-title">接&ensp;待&ensp;社：</div>\n            <div class="J_DetailReceptionContent journey-multi-brief-row-content"></div>\n        </div>\n    </div>\n\n    <div class="J_JourneyTab journey-multi-tab">\n        <div class="section-box-toolbar">\n            <ul class="section-box-tab">\n                <li class="active" data-rel=".J_DetailFeature" mm="点击_详情区_线路介绍_多行程_导航栏_查看产品特色">\n                    <a href="javascript:;">产品特色</a>\n                </li>\n                <li data-rel=".J_DetailRoute" mm="点击_详情区_线路介绍_多行程_导航栏_查看详细行程">\n                    <a href="javascript:;">详细行程</a>\n                </li>\n                <li data-rel=".J_DetailUpgrade" mm="点击_详情区_线路介绍_多行程_导航栏_查看产品升级">\n                    <a href="javascript:;">产品升级</a>\n                </li>\n                <li data-rel=".J_DetailFee" mm="点击_详情区_线路介绍_多行程_导航栏_查看费用说明">\n                    <a href="javascript:;">费用说明</a>\n                </li>\n                <li data-rel=".J_DetailPolicy" mm="点击_详情区_线路介绍_多行程_导航栏_查看预订须知">\n                    <a href="javascript:;">预订须知</a>\n                </li>\n                <% if (data.hasVisa) { %>\n                    <li data-rel=".J_DetailVisa" mm="点击_详情区_线路介绍_多行程_导航栏_查看签证信息">\n                        <a href="javascript:;">签证信息</a>\n                    </li>\n                <% } %>\n                <li class="last" data-rel=".J_Guide" mm="点击_详情区_导航栏_查看线路导游">\n                    <a href="javascript:;">线路导游</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <%- include(\'feature\', {\n        data: data,\n        journey: journey,\n        helper: helper\n    }) %>\n\n    <%- include(\'journey\', {\n        data: data,\n        journey: journey,\n        journeyId: tab.journeyId,\n        helper: helper,\n        cityCodeFromCookie: cityCodeFromCookie\n    }) %>\n\n    <% if (data.hasUpdate) { %>\n        <div class="J_DetailUpgrade section-loading" data-id="<%= tab.journeyId %>"></div>\n    <% } %>\n\n    <%- include(\'fee\', {\n        data: data,\n        journey: journey,\n        helper: helper\n    }) %>\n\n    <%- include(\'policy\', {\n        data: data,\n        journey: journey,\n        signInfo: data.signInfo,\n        payInfo: data.payInfo,\n        riskContents: data.riskContents,\n        helper: helper\n    }) %>\n\n    <% if (data.hasVisa) { %>\n        <div class="J_DetailVisa section-loading" data-id="<%= tab.journeyId %>"></div>\n    <% } %>\n\n    <div class="J_Guide section-loading" data-id="<%= tab.journeyId %>"></div>\n\n</div>'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.featureTemplate='<%\nvar TEAM_TYPE_MAP = {\n    0: \'出发地成团\',\n    1: \'目的地成团\',\n    2: \'中转地联运\',\n    3: \'无\'\n};\nvar TRAFFIC_TYPE_MAP = {\n    1: \'飞机\',\n    2: \'火车卧铺\',\n    3: \'火车硬卧\',\n    4: \'火车软座\',\n    5: \'火车硬座\',\n    6: \'汽车\',\n    7: \'邮轮\',\n    8: \'火车\',\n    9: \'动车组\',\n    10: \'游船\',\n    11: \'高铁二等座\',\n    12: \'高铁一等座\',\n    13: \'高铁商务座\',\n    14: \'自行安排\'\n};\nvar RECOMMEND_TYPE_MAP = {\n    1: \'用餐安排\',\n    2: \'住宿安排\',\n    3: \'行程安排\',\n    4: \'游玩安排\',\n    5: \'购物安排\',\n    6: \'娱乐安排\',\n    7: \'贴心赠送\',\n    9: \'特别优惠\',\n    10: \'重要提示\',\n    11: \'交通信息\',\n    15: \'产品特色\',\n    13: \'其他信息\'\n};\nvar STANDARD_TYPES = [1, 2, 3, 4, 5, 6, 7];\nvar OTHER_TYPES = [9, 10, 11, 13];\nvar standardList = (journey.tourRecommend || []).filter(function(item){return ~STANDARD_TYPES.indexOf(item.type) && item.description})\nvar isPrint = false;\n\nif (typeof printMode == \'boolean\') {\n    isPrint = printMode;\n}\n\n%>\n\n<div class="J_DetailFeature section-box detail-feature">\n    <% if (data.isSupportMultipleJourney == 0) { %>\n        <div class="section-box-head">\n            <h2>产品特色</h2>\n        </div>\n    <% } %>\n    <div class="section-box-body">\n        <% if (!(data.productType == 8 && data.classBrandId != 20)) { %>\n            <div class="section-box-title">\n                <h3>产品概要</h3>\n            </div>\n\n            <div class="section-box-content">\n                <div class="detail-feature-brief">\n                    <% if (journey.day) { %>\n                        <div class="detail-feature-brief-item">\n                            行程天数：<strong><%= journey.day %></strong>\n                        </div>\n                    <% } %>\n                    <% if (TEAM_TYPE_MAP[journey.teamType]) { %>\n                        <div class="detail-feature-brief-item">\n                            成团地点：<strong>\n                            <% if (journey.teamType == 0) { %>\n                                <%= data.departCityName %>成团\n                            <% } else if(journey.teamType == 1) { %>\n                                <%= journey.agglomerateName || \'目的地\' %>成团\n                            <% } else { %>\n                                <%= TEAM_TYPE_MAP[journey.teamType] %>\n                            <% } %>\n                            </strong>\n                        </div>\n                    <% } %>\n                    <% if (journey.destination) { %>\n                        <div class="detail-feature-brief-item">\n                            目的地：<strong><%= journey.destination %></strong>\n                        </div>\n                    <% } %>\n                    <% if (journey.trafficGo || journey.trafficBack) { %>\n                        <div class="detail-feature-brief-item">\n                            往返交通：<strong><%= TRAFFIC_TYPE_MAP[journey.trafficGo] %>/<%= TRAFFIC_TYPE_MAP[journey.trafficBack]%></strong>\n                        </div>\n                    <% } %>\n                    <% if (!isPrint && journey.defaultDeadline && (journey.defaultDeadline.deadLineDate || journey.defaultDeadline.deadLineHour)) { %>\n                        <div class="detail-feature-brief-item">\n                            报名截止时间：<strong>团期前<%= journey.defaultDeadline.deadLineDate %>天<%= journey.defaultDeadline.deadLineHour %>点</strong>\n                            <% if (journey.deadline && Object.keys(journey.deadline).length) { %>\n                                <a class="J_DetailFeatureDeadline" href="javascript:;" mm="点击_详情区_产品特色_产品概要_查看报名截止时间">查看全部报名截止时间<i class="icon"></i></a>\n\n                                <% var deadlineKeys = Object.keys(journey.deadline).filter(function(key) {\n                                    var deadline = journey.deadline[key];\n                                    return deadline && deadline.deadLineTime;\n                                }); %>\n                                <div class="detail-feature-deadline">\n                                    <i class="detail-feature-deadline-arrow"></i>\n                                    <div class="detail-feature-deadline-inner">\n                                        <div class="detail-feature-deadline-left">\n                                            <div class="thead">\n                                                <table>\n                                                    <thead>\n                                                        <tr>\n                                                            <th class="col-1">出发团期</th>\n                                                            <th class="col-2">报名截止时间</th>\n                                                        </tr>\n                                                    </thead>\n                                                </table>\n                                            </div>\n                                            <div class="tbody">\n                                                <table>\n                                                    <tbody>\n                                                        <% for (var index = 0; index < deadlineKeys.length; index++) { %>\n                                                            <% if (index % 2 === 0) { %>\n                                                                <% var deadline = deadlineKeys[index] %>\n                                                                <tr class="<%= index % 4 !== 0 ? \'even\' : \'\'%>">\n                                                                    <td class="col-1"><%= deadline %></td>\n                                                                    <td class="col-2"><%= journey.deadline[deadline].deadLineTime %>点之前</td>\n                                                                </tr>\n                                                            <% } %>\n                                                        <% } %>\n                                                    </tbody>\n                                                </table>\n                                            </div>\n                                        </div>\n                                        <div class="detail-feature-deadline-right">\n                                            <div class="thead">\n                                                <table>\n                                                    <thead>\n                                                        <tr>\n                                                            <th class="col-1">出发团期</th>\n                                                            <th class="col-2">报名截止时间</th>\n                                                        </tr>\n                                                    </thead>\n                                                </table>\n                                            </div>\n                                            <div class="tbody">\n                                                <table>\n                                                    <tbody>\n                                                    <% for (var index = 0; index < deadlineKeys.length; index++) { %>\n                                                        <% if (index % 2 === 1) { %>\n                                                            <% var deadline = deadlineKeys[index] %>\n                                                            <tr class="<%= (index - 1) % 4 !== 0 ? \'even\' : \'\'%>">\n                                                                <td class="col-1"><%= deadline %></td>\n                                                                <td class="col-2"><%= journey.deadline[deadline].deadLineTime %>点之前</td>\n                                                            </tr>\n                                                        <% } %>\n                                                    <% } %>\n                                                    </tbody>\n                                                </table>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            <% } %>\n                        </div>\n                    <% } %>\n                    <% if (data.productType != 2 && data.isSupportMultipleJourney == 0) { %>\n                        <div class="detail-feature-brief-item">\n                            组团形式：\n                            <strong>\n                                <% if (journey.independentTeam == 0 || journey.independentTeam == 2) { %>\n                                    <% if(journey.joinGroupItem == 1){ %>\n                                        联合发团；本产品与其他旅行社联合发团。\n                                        <% var joinGroupItemInfo = journey.joinGroupItemInfo || {} %>\n                                        <%= Object.keys(joinGroupItemInfo)\n                                                .map(function(key) {return joinGroupItemInfo[key]})\n                                                .filter(function(info) {return info})\n                                                .join(\'\')\n                                        %>\n                                    <% } else if (journey.joinGroupItem == 0){ %>\n                                        联合发团；本产品与其他旅行社联合发团。\n                                    <% } %>\n                                <% } else if(journey.independentTeam == 1) { %>\n                                    途牛独家发团；本产品为途牛独家发团产品，只接受途牛客人参团。\n                                <% } %>\n                            </strong>\n                        </div>\n\n                        <% if (!helper.empty(journey.importantAddition)) { %>\n                            <div class="detail-feature-brief-item">\n                                附加说明：\n                                <strong>\n                                    <%= journey.importantAddition.join(\'\') %>\n                                </strong>\n                            </div>\n                        <% } %>\n\n                    <% } %>\n                </div>\n            </div>\n        <% } %>\n\n        <div class="section-box-title">\n            <h3>产品特色</h3>\n        </div>\n\n        <% if (journey.characteristic && journey.characteristic.length) { %>\n            <% for (var i = 0; i < journey.characteristic.length; i++) {%>\n                <% var character = journey.characteristic[i] %>\n                <% if (helper.removeHtmlTag(character.title) || helper.removeHtmlTag(character.content)) { %>\n                    <div class="section-box-content">\n                        <% if (character.title) { %>\n                            <strong><%= character.title %></strong><br>\n                        <% } %>\n                        <%- (character.content || \'\').replace(/[\\n\\r]+?/g, \'<br>\') %>\n                    </div>\n                <% } %>\n                <% if (character.imgs) { %>\n                    <% var imgs = character.imgs.split(\',\') %>\n                    <% if(imgs && imgs.length) { %>\n                        <div class="detail-feature-photos">\n                            <% var photoLength = imgs.length; %>\n                            <% photoLength = photoLength > 4 ? 4 : (photoLength == 3 ? 2 : photoLength) %>\n                            <% var photoStep = photoLength === 3 ? 3 : 2 %>\n                            <div class="detail-feature-photo detail-feature-photo-<%= photoLength %>">\n\n                                <% if (photoLength === 1) { %>\n                                    <div class="detail-feature-photo-item">\n                                        <div class="detail-feature-photo-item-inner">\n                                            <% if (isPrint) { %>\n                                                <img src="<%= helper.resizeImage(imgs[0], 1536) %>">\n                                            <% } else { %>\n                                                <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder.png" data-src="<%= helper.resizeImage(imgs[0], 1536) %>">\n                                            <% } %>\n                                        </div>\n                                    </div>\n                                <% } else { %>\n                                    <% imgs.forEach(function(photo, photoIndex) { %>\n                                        <% if(photoIndex < photoLength) { %>\n                                            <div class="detail-feature-photo-item">\n                                                <div class="detail-feature-photo-item-inner">\n                                                    <% if (isPrint) { %>\n                                                        <img src="<%= helper.resizeImage(photo, 450, 300, 1) %>">\n                                                    <% } else { %>\n                                                        <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder.png" data-src="<%= helper.resizeImage(photo, 450, 300, 1) %>">\n                                                    <% } %>\n                                                </div>\n                                            </div>\n                                            <% if ((photoIndex + 1) % photoStep === 0) { %>\n                                                <div class="detail-feature-photo-sep"></div>\n                                            <% } %>\n                                        <% } %>\n                                    <% }); %>\n                                <% } %>\n\n                            </div>\n                        </div>\n                    <% } %>\n                <% } %>\n            <% } %>\n        <% } %>\n\n        <% if (standardList.length) { %>\n            <div class="section-box-title">\n                <h3>接待标准</h3>\n            </div>\n            <div class="section-box-content">\n                <% for (var i = 0; i < standardList.length; i++) { %>\n                    <p class="item-label">\n                        <strong><span class="dot">•</span><%= RECOMMEND_TYPE_MAP[standardList[i].type] %>：</strong><%- helper.nb2br(standardList[i].description) %>\n                    </p>\n                <% } %>\n            </div>\n        <% } %>\n\n        <% (journey.tourRecommend || []).filter(function(item) { %>\n            <% if (~OTHER_TYPES.indexOf(item.type) && helper.removeHtmlTag(item.description).replace(/(\\s|&nbsp;)+/g, \'\')) { %>\n                <div class="section-box-title">\n                    <h3><%= RECOMMEND_TYPE_MAP[item.type] %></h3>\n                </div>\n                <div class="section-box-content">\n                    <%- helper.nb2br(item.description) %>\n                </div>\n            <% } %>\n        <% }) %>\n\n    </div>\n</div>\n';},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journeyTemplate='<% var downloadUrl %>\n<% var printUrl %>\n<div class="J_DetailRoute section-box detail-route detail-route<%= parseInt(journey.isNewJson) + 1 %>" data-id="<%= journeyId %>">\n    <div class="section-box-head">\n        <% if (data.isSupportMultipleJourney) { %>\n            <h2>详细行程</h2>\n        <% } else { %>\n            <h2>线路介绍</h2>\n        <% } %>\n    </div>\n    <div class="section-box-body">\n\n        <% if (journey.tourTrafficInfo && !helper.empty(journey.tourTrafficInfo.departBusInfo)) { %>\n            <div class="section-box-title">\n                <h3>发车信息\n                    <% if (journey.tourTrafficInfo.departInfo) { %>\n                        <span>* <%= journey.tourTrafficInfo.departInfo %></span>\n                    <% } %>\n                </h3>\n            </div>\n            <div class="section-box-content detail-depart">\n                <table>\n                    <thead>\n                        <tr>\n                            <th class="col-1">发车时间</th>\n                            <th class="col-2">发车地点</th>\n                            <th class="col-3">返回地点</th>\n                            <th class="col-4">备注</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <% journey.tourTrafficInfo.departBusInfo.forEach(function(bus) { %>\n                            <tr>\n                                <td class="col-1"><%= bus.departTime %></td>\n                                <td class="col-2"><%= bus.departPlace %></td>\n                                <td class="col-3"><%= bus.backPlace %></td>\n                                <td class="col-4"><%= bus.departRemark %></td>\n                            </tr>\n                        <% }) %>\n                    </tbody>\n                </table>\n            </div>\n        <% } %>\n\n        <% if (journey.isNewJson == 3) { %>\n            <% downloadUrl = \'/tour/journey/download/\' + data.productId + \'/\' + journey.id + \'?b=\' + data.bookCityCode + \'&bc=\' + cityCodeFromCookie %>\n            <% printUrl = \'/tour/journey/print/\' + data.productId + \'/\' + journey.id + \'?b=\' + data.bookCityCode + \'&bc=\' + cityCodeFromCookie %>\n            <div class="detail-route-download">\n                <a class="download" href="<%= downloadUrl %>" target="_blank" m="点击_详情区_线路介绍_下载行程">下载行程</a>\n                <a class="print" href="<%= printUrl %>" target="_blank" m="点击_详情区_线路介绍_打印行程">打印行程</a>\n            </div>\n        <% } else { %>\n            <div class="detail-route-download">\n                <% if (journey.isNewJson == 2) { %>\n                    <% if (journey.scheduleFile && journey.scheduleFile.filePath) { %>\n                        <% downloadUrl = journey.scheduleFile.filePath %>\n                        <a href="<%= downloadUrl %>" target="_blank" m="点击_详情区_线路介绍_下载行程"><i class="icon"></i>下载行程</a>\n                    <% } %>\n                <% } else { %>\n                    <% downloadUrl = host.main + \'/tn?r=detail/tourV3/DownloadJourneyInfo&id=\' + data.productId %>\n                    <a href="<%= downloadUrl %>" target="_blank" m="点击_详情区_线路介绍_下载行程"><i class="icon"></i>下载行程</a>\n                <% } %>\n            </div>\n        <% } %>\n\n\n        <% switch(parseInt(journey.isNewJson)) {\n            case 0:\n            %>\n                <%- include(\'journeyOld\', {\n                    journey: journey\n                }) %>\n            <%\n                break;\n            case 1:\n            %>\n                <%- include(\'journey3\', {\n                    journey: journey\n                }) %>\n            <%\n                break;\n            case 2:\n            %>\n                <%- include(\'journeyPDF\', {\n                    journey: journey,\n                    data: data\n                }) %>\n            <%\n                break;\n            case 3:\n            %>\n                <%- include(\'journey4\', {\n                    downloadUrl: downloadUrl,\n                    printUrl: printUrl,\n                    journey: journey\n                }) %>\n            <%\n                break;\n            %>\n        <% }%>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.feeTemplate="<%\nvar INCLUDE_NAME_MAP = {\n    trafficInfo: '交&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;通',\n    innerTrafficInfo: '小&ensp;&ensp;交&ensp;&ensp;通',\n    liveInfo: '住&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;宿',\n    mealInfo: '用&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;餐',\n    ticketInfo: '门&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;票',\n    guideInfo: '导&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;服',\n    childStdInfo: '儿童价标准',\n    presentInfo: '赠&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;送',\n    otherInfo: '其&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;他',\n    visaInfo: '签&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;证',\n    tipInfo: '小&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;费',\n    guideFees: '导&ensp;&ensp;服&ensp;&ensp;费'\n};\nvar EXCLUDE_NAME_MAP = {\n    traffic: '小&ensp;&ensp;交&ensp;&ensp;通',\n    flightTax: '机&ensp;&ensp;票&ensp;&ensp;税',\n    room: '单&ensp;&ensp;房&ensp;&ensp;差',\n    menpiao: '门&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;票',\n    noOtherInfo: '其&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;他',\n    addition: '补&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;充',\n    insurance: '旅游意外险',\n    visaInfo: '签&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;证',\n    tipInfo: '小&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;费',\n    guideFees: '导&ensp;&ensp;服&ensp;&ensp;费'\n};\n%>\n\n<% if (!helper.empty(journey.costInclude) ||\n    !helper.empty(journey.costExclude) ||\n    !helper.empty(journey.activeRecommend) ||\n    !helper.empty(journey.activeRecommend)) { %>\n    <div class=\"J_DetailFee section-box detail-upgrade\">\n        <div class=\"section-box-head\">\n            <h2>费用说明</h2>\n        </div>\n        <div class=\"section-box-body\">\n\n            <% if (!helper.empty(journey.costInclude)) { %>\n                <div class=\"section-box-title\">\n                    <h3>费用包含</h3>\n                </div>\n                <div class=\"section-box-content\">\n                    <% if (typeof journey.costInclude === 'string') { %>\n                        <%- helper.nb2br(journey.costInclude) %>\n                    <% } else { %>\n                        <table class=\"text-list\">\n                            <% Object.keys(INCLUDE_NAME_MAP).forEach(function(itemName) { %>\n                                <tr>\n                                    <% var itemValue = journey.costInclude[itemName]%>\n                                    <% if (itemValue && itemValue.length) { %>\n                                        <td class=\"title\"><strong><span class=\"dot\">•</span><%- INCLUDE_NAME_MAP[itemName] %>：</strong></td>\n                                        <td><%= typeof itemValue == 'string' ? itemValue : itemValue.join('；') %></td>\n                                    <% } %>\n                                </tr>\n                            <% }) %>\n                        </table>\n                    <% } %>\n                </div>\n            <% } %>\n\n            <% if (!helper.empty(journey.costExclude)) { %>\n                <div class=\"section-box-title\">\n                    <h3>费用不包含</h3>\n                </div>\n                <div class=\"section-box-content\">\n\n                    <% if (typeof journey.costExclude === 'string') { %>\n                        <%- helper.nb2br(journey.costExclude) %>\n                    <% } else { %>\n                        <table class=\"text-list\">\n                            <% Object.keys(EXCLUDE_NAME_MAP).forEach(function(itemName) { %>\n                                <tr>\n                                    <% var itemValue = journey.costExclude[itemName]%>\n                                    <% if (itemValue && itemValue.length) { %>\n                                        <td class=\"title\"><strong><span class=\"dot\">•</span><%- EXCLUDE_NAME_MAP[itemName] %>：</strong></td>\n                                        <td><%= typeof itemValue == 'string' ? itemValue : itemValue.join('；') %></td>\n                                    <% } %>\n                                </tr>\n                            <% }) %>\n                        </table>\n                    <% } %>\n                </div>\n            <% } %>\n\n            <% var hasShop = !helper.empty(journey.shopRecommend) %>\n            <% if (hasShop) { %>\n                <div class=\"section-box-title\">\n                    <h3>购物推荐</h3>\n                </div>\n                <div class=\"section-box-content\">\n                    <table class=\"detail-upgrade-shopping\">\n                        <thead>\n                            <tr>\n                                <th class=\"col-1\">名称</th>\n                                <th class=\"col-2\">营业产品</th>\n                                <th class=\"col-3\">说明</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% journey.shopRecommend.forEach(function(shop, shopIndex) { %>\n                                <tr<%= shopIndex % 2 == 1 ? ' class=\"even\"' : '' %>>\n                                    <td><%= shop.name %></td>\n                                    <td><%= shop.remark %></td>\n                                    <td><%= shop.description %></td>\n                                </tr>\n                            <% }) %>\n                        </tbody>\n                    </table>\n                </div>\n            <% } %>\n\n            <% var hasActivity = !helper.empty(journey.activeRecommend) %>\n            <% if (hasActivity) { %>\n                <div class=\"section-box-title\">\n                    <h3>活动推荐</h3>\n                </div>\n                <div class=\"section-box-content\">\n                    <table class=\"detail-upgrade-activity\">\n                        <thead>\n                            <tr>\n                                <th class=\"col-1\">活动名称</th>\n                                <th class=\"col-2\">参考价格</th>\n                                <th class=\"col-3\">详细说明</th>\n                                <th class=\"col-4\">备注</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% journey.activeRecommend.forEach(function(activity, shopIndex) { %>\n                                <tr<%= shopIndex % 2 == 1 ? ' class=\"even\"' : '' %>>\n                                    <td><%= activity.name %></td>\n                                    <td><%= activity.price %></td>\n                                    <td><%= activity.description %></td>\n                                    <td><%= activity.remark %></td>\n                                </tr>\n                            <% }) %>\n                        </tbody>\n                    </table>\n                </div>\n            <% } %>\n\n            <% if (hasShop || hasActivity) { %>\n                <div class=\"section-box-content\">\n                    <div class=\"detail-upgrade-tip\">推荐说明：*所有推荐项目均是建议性项目，客人应本着\"自愿自费\"的原则酌情参加。</div>\n                </div>\n            <% } %>\n\n        </div>\n    </div>\n<% } %>\n"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.policyTemplate='<%\nvar ITEM_NAME_MAP = {\n    trafficInfos: \'交&#12288;&#12288;通\',\n    accInfos: \'住&#12288;&#12288;宿\',\n    mealInfos: \'团队用餐\',\n    tour: \'游&#12288;&#12288;览\',\n    shopping: \'购&#12288;&#12288;物\',\n    diffPrice: \'差价说明\',\n    departureNotice: \'出团通知\',\n    suggestionFeedback: \'意见反馈\',\n    activityArrangment: \'活动说明\',\n    abroadNotice: \'注意事项\',\n    specialTerms: \'特别约定\',\n    selfDriveAttentions: \'自驾须知\',\n    orderAttentions: \'预订须知\',\n    warmAttention: \'温馨提示\'\n};\n\nvar SIGN_ICON_MAP = {\n    online: \'online\',\n    fax: \'fax\',\n    toDoor: \'visit\',\n    salesroom: \'retail\'\n}\n\nvar bookNotice = journey.bookNotice || {};\n\nvar hasOut = typeof bookNotice === \'string\' ? true : Object.keys(ITEM_NAME_MAP).some(function(itemName) {\n    return !helper.empty(bookNotice[itemName]);\n});\n\nvar isPrint = false;\n\nif (typeof printMode == \'boolean\') {\n    isPrint = printMode;\n}\n\n%>\n\n<div class="J_DetailPolicy section-box detail-policy">\n    <div class="section-box-head">\n        <h2>预订须知</h2>\n    </div>\n    <div class="section-box-body">\n        <% if (hasOut) { %>\n            <div class="section-box-title">\n                <h3>出行须知</h3>\n            </div>\n            <div class="section-box-content fold-box fold-box-indent" data-role="fold-box">\n                <div class="fold-box-inner" data-role="fold-box-inner">\n                    <% if (typeof bookNotice === \'string\') { %>\n                        <%- helper.nb2br(bookNotice) %>\n                    <% } else { %>\n                        <% Object.keys(ITEM_NAME_MAP).forEach(function(itemName) { %>\n                            <% var itemValue = bookNotice[itemName] %>\n                            <% if (!helper.empty(itemValue)) { %>\n                                <div class="item-label">\n                                    <strong><span class="dot">•</span><%- ITEM_NAME_MAP[itemName] %>：</strong>\n                                    <% if (typeof itemValue == \'string\') { %>\n                                        <%- itemValue %>\n                                    <% } else { %>\n                                        <%- itemValue.join(\'<br>\') %>\n                                    <% } %>\n                                </div>\n                            <% } %>\n                        <% }) %>\n                    <% } %>\n                </div>\n            </div>\n        <% } %>\n\n        <% if (data.contractLoseInfo && !helper.empty(data.contractLoseInfo.regionList)) { %>\n            <div class="section-box-title">\n                <h3>违约责任提示</h3>\n            </div>\n            <div class="section-box-content fold-box" data-role="fold-box">\n                <div class="fold-box-inner" data-role="fold-box-inner">\n                    <p>旅游者在出发前提出解除合同的，应当按下列标准承担退团损失：</p>\n                    <% data.contractLoseInfo.regionList.forEach(function(region) { %>\n                        <div>\n                            <span class="dot">•</span>\n                            <%= region.content %>\n                        </div>\n                    <% }) %>\n                </div>\n            </div>\n        <% } %>\n\n        <% if (isPrint !== true) { %>\n            <div class="section-box-title">\n                <h3>特殊限制</h3>\n            </div>\n\n            <div class="section-box-content fold-box" data-role="fold-box">\n                <div class="fold-box-inner" data-role="fold-box-inner">\n\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong>病患者、孕妇及行动不便者：</strong></div>\n                        <p>\n                            1. 为了确保旅游顺利出行，防止旅途中发生人身意外伤害事故，请旅游者在出行前做一次必要的身体检查，如存在下列情况，因服务能力所限无法接待：<br>\n                            （1）传染性疾病患者，如传染性肝炎、活动期肺结核、伤寒等传染病人；<br>\n                            （2）心血管疾病患者，如严重高血压、心功能不全、心肌缺氧、心肌梗塞等病人；<br>\n                            （3）脑血管疾病患者，如脑栓塞、脑出血、脑肿瘤等病人；<br>\n                            （4）呼吸系统疾病患者，如肺气肿、肺心病等病人；<br>\n                            （5）精神病患者，如癫痫及各种精神病人；<br>\n                            （6）严重贫血病患者，如血红蛋白量水平在50克/升以下的病人；<br>\n                            （7）大中型手术的恢复期病患者；<br>\n                            （8）孕妇及行动不便者。\n                        </p>\n                    </div>\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong>老年人：</strong></div>\n                        <p>\n                            1. 70周岁以上老年人预订出游，须与我司签订《健康证明》并有家属或朋友（因服务能力所限无法接待及限制接待的人除外）陪同方可出游。<br>\n                            2. 因服务能力所限，无法接待80周岁以上的旅游者报名出游，敬请谅解。<br>\n                            3. 因服务能力所限，不受理65周岁（含65周岁）以上老年人预订云南跟团产品。<br>\n                            4. 因服务能力所限，不受理70周岁（含70周岁）以上老年人预订四川跟团产品。\n                        </p>\n                    </div>\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong>未成年人：</strong></div>\n                        <p>\n                            1. 未满18周岁的旅游者请由家属（因服务能力所限无法接待及限制接待的人除外）陪同参团。<br>\n                            2. 因服务能力所限，无法接待18周岁以下旅游者单独报名出游，敬请谅解。\n                        </p>\n                    </div>\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong>外籍友人：</strong></div>\n                        <% if (bookNotice.foreignerLimit) { %>\n                            <p>因服务能力所限，本产品暂不能接受外宾（含港澳台同胞）报名，敬请谅解。</p>\n                        <% } else { %>\n                            <p>本产品网上报价适用持有大陆居民身份证的游客。如您持有其他国家或地区的护照，请在预订过程中注明。</p>\n                        <% } %>\n                    </div>\n\n                </div>\n            </div>\n\n            <div class="section-box-title">\n                <h3>签约方式</h3>\n            </div>\n\n            <div class="section-box-content">\n                <div class="detail-policy-sign">\n                    <ul>\n                        <% Object.keys(SIGN_ICON_MAP).forEach(function(itemName) { %>\n                            <% if (signInfo[itemName] && (itemName == \'online\' || data.platformTypeId != 6)) { %>\n                                <li>\n                                    <div class="detail-policy-sign-item">\n                                        <div class="detail-policy-sign-icon">\n                                            <i class="icon detail-policy-sign-icon-<%= SIGN_ICON_MAP[itemName] %>"></i>\n                                        </div>\n                                        <div class="detail-policy-sign-title">\n                                            <strong><%= signInfo[itemName].title %></strong>\n                                        </div>\n                                        <div class="detail-policy-sign-desc">\n                                            <%= signInfo[itemName].content %>\n                                            <% if (itemName == \'salesroom\' && signInfo.company && signInfo.company.length) { %>\n                                                推荐门市：<br>\n                                                <a href="javascript:;"><i class="icon detail-policy-sign-icon-location"></i>&nbsp;<%= signInfo.company[0].name %></a><br>\n                                                <a class="detail-policy-sign-view J_retailView" href="javascript:;" mm="点击_详情区_预订须知_查看全部门市">查看全部门市</a>\n                                            <% } %>\n                                        </div>\n                                    </div>\n                                </li>\n                            <% } %>\n                        <% }) %>\n                    </ul>\n                </div>\n            </div>\n\n            <div class="section-box-title">\n                <h3>付款方式</h3>\n            </div>\n\n            <div class="section-box-content">\n                <% [\'internet\', \'salesroom\', \'remittance\'].forEach(function(itemName) { %>\n                    <% var itemValue = payInfo[itemName] %>\n                    <% if (itemValue && (itemName == \'internet\' || data.platformTypeId != 6)) { %>\n                        <div class="item-with-title">\n                            <span class="dot">•</span>\n                            <div class="item-title"><strong><%= itemValue.title %>：</strong></div>\n                            <p>\n                                <% if (typeof itemValue.content == \'string\') { %>\n                                    <%- itemValue.content %>\n                                <% } else { %>\n                                    <%- itemValue.content.map(function(content, index) {\n                                        if (typeof content == \'string\') {\n                                            return \'（\' + (index + 1) + \'）\' + content;\n                                        } else {\n                                            return \'（\' + (index + 1) + \'）\' + content.title + \'：\' + content.content;\n                                        }\n                                    }).join(\'<br>\') %>\n                                <% } %>\n                                <% if (itemName == \'remittance\') { %>\n                                    <a href="javascript:;" data-url="<%= itemValue.url %>">查看汇款帐号</a>\n                                <% } %>\n                            </p>\n                        </div>\n                    <% } %>\n                <% }) %>\n            </div>\n\n            <% if (riskContents) { %>\n                <div class="section-box-title">\n                    <h3>安全提示</h3>\n                </div>\n                <div class="section-box-content fold-box" data-role="fold-box">\n                    <div class="fold-box-inner" data-role="fold-box-inner">\n                        <% riskContents.forEach(function(risk) { %>\n                            <div class="item-with-title">\n                                <span class="dot">•</span>\n                                <div class="item-title"><strong>高危项目安全须知——<%= risk.riskTitle %>：</strong></div>\n                                <p>\n                                    <%- risk.riskDetails.join(\'<br>\') %>\n                                </p>\n                            </div>\n                        <% })%>\n                    </div>\n                </div>\n                <div class="section-box-content">\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong>安全须知、文明公约：</strong></div>\n                        <p>\n                            为普及旅游安全知识及旅游文明公约，使您的旅程顺利圆满完成，特拟定安全须知：\n                            <%- [\n                                    {url: data.safetyInstruction, name: \'安全须知\'},\n                                    {url: data.civilizationConvention, name: \'文明公约\'}\n                                ].filter(function(item){ return item.url;} )\n                                .map(function(item){return  \'<a href="\' + item.url + \'">《\' + item.name + \'》</a>\'})\n                                .join(\'、\')\n                            %>\n                            。\n                        </p>\n                    </div>\n                </div>\n            <% } %>\n\n            <% if (data.isSupportChange && data.contractLoseInfo && data.contractLoseInfo.regionList) { %>\n                <div class="section-box-title">\n                    <h3>违约责任提示</h3>\n                </div>\n                <div class="section-box-content">\n                    <p>旅游者违约：</p>\n                    <%- data.contractLoseInfo.regionList.map(function(region) {return region.content}).join(\'<br>\') %>\n                </div>\n            <% } %>\n\n            <% if (journey.deadline && journey.deadline.length) { %>\n                <div class="section-box-title">\n                    <h3>报名截止日期</h3>\n                </div>\n                <div class="section-box-content">\n                    <%- journey.deadline.join(\'<br>\') %>\n                </div>\n            <% } %>\n\n            <% if (data.warmNotice) { %>\n                <div class="section-box-title">\n                    <h3>温馨提醒</h3>\n                </div>\n                <div class="section-box-content">\n                    <%- helper.nb2br(data.warmNotice) %>\n                </div>\n            <% } %>\n\n        <% } %>\n\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journey3Template='<%\n// 行程3.0\n%>\n<%\nvar itemTypeMap = {\n    activity: {\n        label: \'activity\',\n        timeLabel: \'活动\',\n    },\n    transport: {\n        label: \'transport\',\n        timeLabel: \'\',\n    },\n    catering: {\n        label: \'dinner\',\n        timeLabel: \'用餐\',\n    },\n    spot: {\n        label: \'spot\',\n        timeLabel: \'游览\',\n    },\n    accommodation: {\n        label: \'hotel\',\n        timeLabel: \'\',\n    },\n    shopping: {\n        label: \'shopping\',\n        timeLabel: \'\',\n    },\n    tip: {\n        label: \'note\',\n        timeLabel: \'\',\n    }\n};\n\nvar transportLabelMap = {\n    bus: \'bus\',\n    plain: \'plane\',\n    car: \'car\',\n    bus: \'bus\',\n    train: \'train\',\n    ship: \'ship\',\n    metro: \'metro\'\n}\n%>\n\n<div class="detail-journey-tab">\n    <ul class="J_Journey3RouteTab">\n        <li class="active" data-rel=".J_DetailRouteDetail">行程明细<i class="icon"></i></li>\n        <li class="seprate"></li>\n        <li data-rel=".J_DetailRouteCalendar">日历模式<i class="icon"></i></li>\n    </ul>\n    <span>* 以下行程仅供参考，最终行程可能会根据实际情况进行微调，敬请以签约行程为准。</span>\n</div>\n\n<div class="J_DetailRouteDetail section-box-content detail-journey-3-content active">\n\n    <div class="J_DetailJourney detail-journey">\n\n        <div class="detail-journey-dot"></div>\n\n        <div class="J_JourneyNav detail-journey-nav">\n            <ul>\n                <% (journey.journeySummary || []).forEach(function(item, index) { %>\n                    <li<% if(index === 0) { %> class="active"<% } %> data-rel="#J_JourneyDay<%= index + 1%>">第<%= index + 1%>天</li>\n                <% }) %>\n            </ul>\n        </div>\n\n        <% (journey.journeyDescJson || []).forEach(function(oneJourney, journeyIndex) { %>\n            <div id="J_JourneyDay<%= journeyIndex + 1 %>">\n                <div class="detail-journey-head">\n                    <i class="icon detail-journey-day">D<%= journeyIndex + 1 %></i>\n                    <%- oneJourney.day_citys.map(function(city) {\n                        return city.city_name + (city.transport_type ? \'<i class="icon detail-journey-transport-\' + transportLabelMap[city.transport_type] + \'"></i>\' : \'\')\n                    }).join(\'\') %>\n                </div>\n\n                <% oneJourney.sch_items.forEach(function(item, itemIndex) { %>\n                    <% var duration = helper.calculateDuration(item.begin_time, item.end_time) %>\n                    <div class="detail-journey-title">\n                        <% if(item.item_type == \'transport\') { %>\n                            <%= item.depart_city %>\n                            <i class="icon detail-journey-transport-<%= transportLabelMap[item.transport_type] %>"></i>\n                            <%= item.arrival_city %>\n                        <% } else if(item.item_type == \'spot\') { %>\n                            <% if(item.spot_id) { %>\n                                <a data-id="<%= item.spot_id %>" href="javascript:;"><%= item.spot_name %></a>\n                            <% } else { %>\n                                <%= item.spot_name %>\n                            <% } %>\n                        <% } else if (item.item_type == \'shopping\') { %>\n                            购物店信息<span>* 如因游客购物造成时间延长，延长时间不计入旅行社的客观安排停留时间</span>\n                        <% } else { %>\n                            <%= item.title %>\n                        <% } %>\n\n                        <% if(/^(\\d+):(\\d+)$/.test(item.time_desc || item.begin_time)) { %>\n                            <i class="detail-journey-time"><%= item.time_desc || item.begin_time %></i>\n                        <% } %>\n\n                        <% if(item.item_type) { %>\n                            <i class="icon detail-journey-label-<%= itemTypeMap[item.item_type].label %>"></i>\n                        <% } %>\n\n                        <% if(duration) { %>\n                            <div class="detail-journey-duration">(<%= itemTypeMap[item.item_type].timeLabel %>时间：约<%= duration %>分钟)</div>\n                        <% } %>\n                    </div>\n\n                    <% if(item.content || item.description) { %>\n                        <div class="detail-journey-desc"><%- helper.trimBoundBr(helper.nb2br(item.content || item.description)) %></div>\n                    <% } %>\n\n                    <% if(item.notes) { %>\n                        <div class="detail-journey-note"><%- item.notes %></div>\n                    <% } %>\n\n                    <% if(item.pic_text_info && item.pic_text_info.length) { %>\n                        <div class="detail-journey-photos">\n                            <% var photoLength = item.pic_text_info.length; %>\n                            <div class="detail-journey-photo detail-journey-photo-3">\n                                <% item.pic_text_info.forEach(function(photo, photoIndex) { %>\n                                    <% if(photoIndex < photoLength) { %>\n                                        <div class="detail-journey-photo-item">\n                                            <div class="detail-journey-photo-item-inner">\n                                                <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder.png" data-src="<%= helper.resizeImage(photo.pic_url, 500, 280, 1) %>"\n                                                alt="<%= photo.pic_title %>">\n                                            </div>\n                                        </div>\n                                        <% if ((photoIndex + 1) % 3 === 0) { %>\n                                            <div class="detail-feature-photo-sep"></div>\n                                        <% } %>\n                                    <% } %>\n                                <% }) %>\n                            </div>\n                        </div>\n                    <% } %>\n\n                    <% if(item.shop_info && item.shop_info.length) { %>\n                        <div class="detail-journey-table">\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th class="col-1">名称</th>\n                                        <th class="col-2">营业产品</th>\n                                        <th class="col-3">停留时间</th>\n                                        <th class="col-4">说明</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <% item.shop_info.forEach(function(shopItem) { %>\n                                        <tr>\n                                            <td class="col-1"><%= shopItem.shop_name %></td>\n                                            <td class="col-2"><%= shopItem.business_product %></td>\n                                            <td class="col-3"><%= shopItem.wait_time %></td>\n                                            <td class="col-4"><%= shopItem.description %></td>\n                                        </tr>\n                                    <% })%>\n                                </tbody>\n                            </table>\n                        </div>\n                    <% } %>\n\n                    <div class="detail-journey-seprate"></div>\n\n                <% }) %>\n\n            </div>\n        <% }) %>\n\n    </div>\n\n</div>\n\n<div class="J_DetailRouteCalendar section-box-content detail-journey-3-summary">\n    <div class="detail-journey-table">\n        <table>\n            <thead>\n                <tr>\n                    <th class="col-1">时间</th>\n                    <th class="col-2">行程</th>\n                    <th class="col-3">游玩景点</th>\n                    <th class="col-4">住宿</th>\n                    <th class="col-5">用餐</th>\n                </tr>\n            </thead>\n            <tbody>\n                <% (journey.journeySummary || []).forEach(function(item, itemIndex) { %>\n                    <tr class="<%= itemIndex % 2 == 1 ? \'even\': \'\'%>">\n                        <td><%- item.index %></td>\n                        <td><%- item.summary %></td>\n                        <td><%- item.spots.map(function(spot) {\n                            return spot.name;\n                            return \'<a data-id="\' + spot.id + \'" href="javascript:;">\' + spot.name + \'</a>\'\n                        }).join(\'<br>\') %></td>\n                        <td><%- item.hotel %></td>\n                        <td><%- Array.isArray(item.food) ? item.food.join(\'<br>\') : item.food %></td>\n                    </tr>\n                <% }) %>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<% if(journey.scheduleRemark) { %>\n    <div class="detail-note">\n        <div class="detail-note-head">行程附注<i class="icon"></i></div>\n        <div class="detail-note-body">*请注意以下行程补充事项：</div>\n        <div class="detail-note-body">\n            <%- journey.scheduleRemark %>\n        </div>\n    </div>\n<% } %>';},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journeyOldTemplate='<div class="section-box-title">\n    <h3>行程明细<span>* 以下行程仅供参考，最终行程可能会根据实际情况进行微调，敬请以签约行程为准。</span></h3>\n</div>\n\n<% if (!helper.empty(journey.journeySummary)) { %>\n    <div class="section-box-content">\n        <div class="detail-route-brief">\n            <h4>沿途景点：</h4>\n            <% journey.journeySummary.forEach(function(item, index) { %>\n                <p><strong>第<%= index + 1 %>天</strong><%= item.join(\'、\') %></p>\n            <% }) %>\n        </div>\n    </div>\n<% } %>\n\n<div class="section-box-content">\n\n    <div class="J_DetailJourney detail-journey">\n\n        <div class="detail-journey-dot"></div>\n\n        <% if (!helper.empty(journey.journeySummary)) { %>\n            <div class="J_JourneyNav detail-journey-nav">\n                <ul>\n                    <% journey.journeySummary.forEach(function(item, index) { %>\n                        <li <% if (index === 0) { %> class="active"<% } %> data-rel="#J_JourneyDay<%= index + 1%>">第<%= index + 1%>天</li>\n                    <% }) %>\n                </ul>\n            </div>\n        <% } %>\n\n        <% if (!helper.empty(journey.journeyDescJson)) { %>\n\n            <% journey.journeyDescJson.forEach(function(oneJourney, journeyIndex) { %>\n                <div id="J_JourneyDay<%= journeyIndex + 1 %>">\n                    <div class="detail-journey-head">\n                        <i class="icon detail-journey-day">D<%= journeyIndex + 1 %></i>\n                        <%- oneJourney.journeyDescription.replace(/{(\\w+)}/g, \'<i class="icon detail-journey-transport-$1"></i>\') %>\n                    </div>\n                    <div class="detail-journey-seprate-solid"></div>\n\n                    <div class="detail-journey-title">行程描述</div>\n                    <div class="detail-journey-desc"><%- helper.trimBoundBr(helper.nb2br(oneJourney.journeyInfor)) %></div>\n                    <div class="detail-journey-seprate"></div>\n\n                    <% (oneJourney.journeyPeriodsTimeList || []).forEach(function(period) { %>\n                        <% if (period.journeyTime) {%>\n                            <div class="detail-journey-title">\n                                <i class="icon detail-journey-label-time"></i>\n                                <% if (period.journeyTime && !helper.empty(helper.removeHtmlTag(period.journeyTime))) { %>\n                                    <i class="detail-journey-time"><%- period.journeyTime %></i>\n                                <% } %>\n                            </div>\n                        <% } %>\n\n                        <% (period.journeyTimeInfor || []).forEach(function(timeInfo) { %>\n\n                            <% if (timeInfo.elementType == \'TimeDesc\' ||\n                                timeInfo.elementType == \'SubtitleText\') { %>\n                                <div class="detail-journey-desc"><%- timeInfo.elementInfor %></div>\n                            <% } else if (timeInfo.elementType == \'Subtitle\') { %>\n                                <div class="detail-journey-title"><%- timeInfo.elementInfor %></div>\n                            <% } else if (timeInfo.elementType == \'photo\') { %>\n                                <div class="detail-journey-photos">\n                                    <% var photoLength = timeInfo.elementInfor.length; %>\n                                    <% photoLength = photoLength > 4 ? 4 : (photoLength == 3 ? 2 : photoLength) %>\n                                    <div class="detail-journey-photo detail-journey-photo-<%= photoLength %>">\n                                        <% timeInfo.elementInfor.forEach(function(photo, photoIndex) { %>\n                                            <% if (photoIndex < photoLength) { %>\n                                                <div class="detail-journey-photo-item">\n                                                    <div class="detail-journey-photo-item-inner">\n                                                        <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder.png" data-src="<%= helper.resizeImage(photo.strBigPicUrl, 500, 280, 1) %>"\n                                                        alt="<%= photo.strPicDesc %>">\n                                                    </div>\n                                                </div>\n                                                <% if ((photoIndex + 1) % 2 === 0) { %>\n                                                    <div class="detail-feature-photo-sep"></div>\n                                                <% } %>\n                                            <% } %>\n                                        <% }) %>\n                                    </div>\n                                </div>\n                            <% } %>\n\n                        <% })%>\n\n                    <% }) %>\n\n                    <% if (Array.isArray(oneJourney.foodAndStays)) { %>\n                        <div class="detail-journey-seprate"></div>\n                        <% oneJourney.foodAndStays.forEach(function(oneItem) { %>\n                            <% if (oneItem) { %>\n                                <% if (oneItem.elementType == \'food\') { %>\n                                    <div class="detail-journey-title"><i class="icon detail-journey-label-dinner"></i>餐饮</div>\n                                    <div class="detail-journey-list">\n                                        <%- oneItem.elementInfor %>\n                                    </div>\n                                    <div class="detail-journey-seprate"></div>\n                                <% } else if (oneItem.elementType == \'hotel\') { %>\n                                    <div class="detail-journey-title"><i class="icon detail-journey-label-hotel"></i>住宿</div>\n                                    <div class="detail-journey-list">\n                                        <%- oneItem.elementInfor %>\n                                    </div>\n                                    <div class="detail-journey-seprate"></div>\n                                <% } %>\n                            <% } %>\n                        <% }) %>\n                    <% } %>\n\n\n\n                    <% if (oneJourney.shops && oneJourney.shops.length) { %>\n                        <div class="detail-journey-title"><i class="icon detail-journey-label-shopping"></i>购物点信息<span>*如因游客购物造成时间延长，延长时间不计入旅行社的客观安排停留时间</span></div>\n                        <div class="detail-journey-table">\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th class="col-1">名称</th>\n                                        <th class="col-2">营业产品</th>\n                                        <th class="col-3">停留时间</th>\n                                        <th class="col-4">说明</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <% oneJourney.shops.forEach(function(shop, shopIndex) { %>\n                                        <tr class="<%= shopIndex % 2 == 1 ? \'even\': \'\'%>">\n                                            <td><%- shop.shopName %></td>\n                                            <td><%- shop.mainBussinessProduct %></td>\n                                            <td><%= shop.waitTime %></td>\n                                            <td><%- shop.description %></td>\n                                        </tr>\n                                    <% }) %>\n                                </tbody>\n                            </table>\n                        </div>\n                    <% } %>\n\n                </div>\n            <% }) %>\n\n        <% } %>\n\n    </div>\n</div>\n\n<% if(journey.scheduleRemark) { %>\n    <div class="detail-note">\n        <div class="detail-note-head">行程附注<i class="icon"></i></div>\n        <div class="detail-note-body">\n            *请注意以下行程补充事项：\n        </div>\n        <div class="detail-note-body">\n            <%- journey.scheduleRemark %>\n        </div>\n    </div>\n<% } %>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journeyPDFTemplate='<div class="section-box-content">\n    <div class="detail-route-img-only">\n        <% if (!helper.empty(journey.scheduleFile)) { %>\n            <a href="<%= journey.scheduleFile.imgPath %>" target="_blank">\n                <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder.png" data-src="<%= journey.scheduleFile.imgPath %>" alt="<%= data.productName %>">\n            </a>\n        <% } %>\n    </div>\n</div>\n\n<% if(journey.scheduleRemark) { %>\n    <div class="detail-note">\n        <div class="detail-note-head">行程附注<i class="icon"></i></div>\n        <div class="detail-note-body">\n            *请注意以下行程补充事项：\n        </div>\n        <div class="detail-note-body">\n            <%- journey.scheduleRemark %>\n        </div>\n    </div>\n<% } %>'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journey4Template='\n<%\n\nvar trafficTypeMap = {\n    1: \'none\',\n    2: \'plane\',\n    3: \'boat\',\n    4: \'train\',\n    5: \'car\',\n    6: \'other\'\n}\n\nvar moduleTypeMap = {\n    1: \'scenic\',\n    2: \'hotel\',\n    3: \'traffic\',\n    4: \'food\',\n    5: \'shopping\',\n    6: \'activity\',\n    7: \'reminder\',\n    8: \'note\'\n}\n\nvar moduleIconMap = {\n    1: \'spot\',\n    2: \'hotel\',\n    3: \'transport\',\n    4: \'dinner\',\n    5: \'shopping\',\n    6: \'activity\',\n    7: \'note\',\n    8: \'note\'\n}\n\nvar moduleDurationMap = {\n    1: \'建议时间\',\n    2: \'建议时间\',\n    3: \'建议时间\',\n    4: \'建议时间\',\n    5: \'建议时间\',\n    6: \'建议时间\',\n    7: \'建议时间\',\n    8: \'建议时间\'\n}\n\nvar resourceList = [1, 2];\nvar journeyData = journey.journeyDescJson || {};\n\nvar spotGroups = [];\n\nif (journeyData.scheduleType == 1) {\n    (journeyData.detail || []).reduce(function(list, dayItem) {\n        (dayItem.data || []).reduce(function(list, moduleItem) {\n            if (moduleItem.moduleTypeValue == 1) {\n                (moduleItem.data || []).reduce(function(list, resource) {\n                    if (resource.latitude && resource.longitude) {\n                        list.push(resource);\n                    }\n                    return list;\n                }, list);\n            }\n            return list;\n        }, list)\n        return list;\n    }, spotGroups);\n}\n%>\n\n<% if (journeyData.scheduleType == 1) { %>\n    <div class="detail-journey-tab">\n        <ul class="J_Journey4RouteTab">\n            <li class="active" data-rel=".J_DetailRouteDetail">行程明细<i class="icon"></i></li>\n            <li class="seprate"></li>\n            <li data-rel=".J_DetailRouteCalendar">日历模式<i class="icon"></i></li>\n        </ul>\n        <span>* 以下行程仅供参考，最终行程可能会根据实际情况进行微调，敬请以签约行程为准。</span>\n    </div>\n\n    <div class="J_DetailRouteCalendar section-box-content detail-journey-4-summary">\n        <div class="detail-journey-table">\n            <table>\n                <thead>\n                    <tr>\n                        <th class="col-1">时间</th>\n                        <th class="col-2">行程</th>\n                        <th class="col-3">游玩景点</th>\n                        <th class="col-4">住宿</th>\n                        <th class="col-5">用餐</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <% (journeyData.detail || []).forEach(function(dayItem, dayIndex) { %>\n                        <% var resources = {} %>\n                        <% (dayItem.data || []).forEach(function(resource, resourceIndex) {\n                            var moduleType = resource.moduleTypeValue;\n                            resources[moduleType] = resources[moduleType] || [];\n                            if (moduleType == 1 || moduleType == 2) {\n                                resources[moduleType] = resources[moduleType].concat(resource.data || []);\n                            } else if (moduleType == 4 || moduleType == 5 || moduleType == 6) {\n                                resources[moduleType].push(resource);\n                            }\n                        })%>\n                        <tr class="<%= dayIndex % 2 == 1 ? \'even\': \'\'%>">\n                            <td>第<%- dayItem.day %>天</td>\n                            <td>\n                                <% (dayItem.traffic || []).forEach(function(trafficItem) { %>\n                                    <%= trafficItem.from %>\n                                    <% if (trafficItem.to) { %>\n                                        - <%= trafficItem.to %>\n                                    <% } %>\n                                <% }) %>\n                            </td>\n                            <% [1, 2, 4].forEach(function(moduleType) { %>\n                                <td>\n                                    <% if (moduleType == 4) { %>\n                                        <%- helper.nb2br(((journeyData.overview || [])[dayIndex] || {})[\'food\']) %>\n                                    <% } else { %>\n                                        <%- (resources[moduleType] || []).map(function(item){return item.title}).join(\'<br>\') %>\n                                    <% } %>\n                                </td>\n                            <% }) %>\n                        </tr>\n                    <% })%>\n                </tbody>\n            </table>\n        </div>\n    </div>\n<% } %>\n\n<div class="J_DetailRouteDetail section-box-content detail-journey-4-detail active">\n    <% if (journeyData.scheduleType == 1) { %>\n        <div class="section-box-content detail-route4-brief-box<% if (true || !spotGroups.length) { %> detail-route4-brief-nomap<% } %>">\n            <div class="J_DetailRouteBrief detail-route-brief">\n                <div class="J_DetailRouteBriefBox detail-route-brief-box">\n                    <div class="J_DetailRouteBriefInner detail-route-brief-inner">\n                        <h4>沿途景点：</h4>\n                        <% (journeyData.detail || []).forEach(function(dayItem, dayIndex) { %>\n                            <p><strong>第<%= dayItem.day %>天</strong>\n                                <%\n                                    var trafficDesc = (dayItem.traffic || []).reduce(function(sum, trafficItem) {\n                                            if (trafficItem.from) sum.push(trafficItem.from);\n                                            if (trafficItem.to) sum.push(trafficItem.to);\n                                            return sum;\n                                        }, []);\n\n                                    // var resourceDesc = (dayItem.data || []).filter(function(resource) {return resource.moduleTypeValue == 1})\n                                    //    .reduce(function(sum, resource) {\n                                    //        return sum.concat(resource.data.map(function(item) {return item.title}))\n                                    //    }, [])\n                                    //    .filter(function(item) {return item});\n                                %>\n                                <%= trafficDesc.join(\'、\') %>\n                            </p>\n                        <% }) %>\n                    </div>\n                </div>\n                <a class="J_DetailRouteBriefMore detail-route-brief-more" href="javascript:;">展开全部<i class="icon"></i></a>\n                <a class="J_DetailRouteBriefLess detail-route-brief-less" href="javascript:;">收起全部<i class="icon"></i></a>\n            </div>\n            \n            <% if (false && spotGroups.length) { %>\n                <div class="detail-route-map">\n                    <div class="detail-route-map-head">\n                        <div class="detail-route-map-day">\n                            <div class="J_DetailJourneyMapPrev detail-route-map-day-prev"><i class="icon"></i></div>\n                            <div class="J_DetailJourneyMapNext detail-route-map-day-next"><i class="icon"></i></div>\n                            <div class="J_DetailJourneyMapDay detail-route-map-day-label">正在加载...</div>\n                        </div>\n                        <div class="J_DetailJourneyMapView detail-route-map-button">\n                            <i class="icon"></i>查看大图\n                        </div>\n                    </div>\n                    <div class="detail-route-map-body">\n                        <div class="J_DetailJourneyMapSmall detail-route-map-box loading"></div>\n                    </div>\n                </div>\n            <% } %>\n            \n        </div>\n    <% } %>\n\n    <div class="J_DetailJourney detail-journey detail-journey-4">\n\n        <div class="detail-journey-dot"></div>\n\n        <div class="J_JourneyNav detail-journey-4-nav">\n            <div class="detail-journey-4-nav-box">\n                <div class="detail-journey-4-nav-inner">\n                    <ul class="detail-journey-4-nav-list">\n                        <% //1:time  2:resource %>\n                        <% if (journeyData.scheduleType == 1) { %>\n                            <% (journeyData.detail || []).forEach(function(dayItem, dayIndex) { %>\n                                <li class="detail-journey-4-nav-group" data-rel=".J_JourneyItem<%= dayItem.cid %>">\n                                    <div class="detail-journey-4-nav-group-label"><span>第<%= dayItem.day %>天</span><i class="icon"></i></div>\n                                    <ul class="detail-journey-4-nav-sub">\n                                        <% (dayItem.data || []).forEach(function(resource) { %>\n                                            <% if (~resourceList.indexOf(resource.moduleTypeValue)) { %>\n                                                <% if (resource.data && resource.data.length) { %>\n                                                    <% resource.data.forEach(function(item) { %>\n                                                        <li class="detail-journey-4-nav-sub-item" data-sub-rel=".J_JourneyItem<%= item.cid %>"><span><%= item.title %></span><i class="icon"></i></li>\n                                                    <% })%>\n                                                <% } %>\n                                            <% } %>\n                                        <% }) %>\n                                    </ul>\n                                </li>\n                            <% }) %>\n                        <% } else if (journeyData.scheduleType == 2 && journeyData.detail && journeyData.detail.length) { %>\n                            <% ((journeyData.detail[0] || {}).data || []).forEach(function(resource) { %>\n                                <% if (~resourceList.indexOf(resource.moduleTypeValue)) { %>\n                                    <% if (resource.data && resource.data.length) { %>\n                                        <% resource.data.forEach(function(item) { %>\n                                            <li class="detail-journey-4-nav-group" data-rel=".J_JourneyItem<%= item.cid %>">\n                                                <div class="detail-journey-4-nav-group-label"><span><%= item.title %></span><i class="icon"></i></div>\n                                            </li>\n                                        <% })%>\n                                    <% } %>\n                                <% } %>\n                            <% }) %>\n                        <% } %>\n                    </ul>\n                </div>\n            </div>\n        </div>\n\n        <% if (journeyData.scheduleType == 1) { %>\n            <% (journeyData.detail || []).forEach(function(dayItem, dayIndex) { %>\n                <div class="J_JourneyItem<%= dayItem.cid %>">\n                    <div class="detail-journey-head">\n                        <i class="icon detail-journey-day">D<%= dayItem.day %></i>\n                        <strong>第<%= dayItem.day %>天</strong>\n\n                        <% (dayItem.traffic || []).forEach(function(trafficItem) { %>\n                            <strong><%= trafficItem.from %></strong>\n                            <% if (trafficItem.to) { %>\n                                <% if (trafficItem.meanValue == 6) { %>\n                                    -\n                                <% } else { %>\n                                    <i class="icon detail-journey-transport-<%= trafficTypeMap[trafficItem.meanValue] %>"></i>\n                                <% } %>\n                                <strong><%= trafficItem.to %></strong>\n                            <% } %>\n                        <% }) %>\n                    </div>\n                    <div class="detail-journey-seprate-solid"></div>\n\n                    <%- include(\'journey4Resource\', {\n                        journeyData: dayItem || {},\n                        trafficTypeMap: trafficTypeMap,\n                        moduleTypeMap: moduleTypeMap,\n                        resourceList: resourceList,\n                        moduleIconMap: moduleIconMap,\n                        moduleDurationMap: moduleDurationMap,\n                        scheduleType: journeyData.scheduleType\n                    }) %>\n\n                </div>\n            <% }) %>\n        <% } else { %>\n            <%- include(\'journey4Resource\', {\n                journeyData: (journeyData.detail || [])[0] || {},\n                trafficTypeMap: trafficTypeMap,\n                moduleTypeMap: moduleTypeMap,\n                resourceList: resourceList,\n                moduleIconMap: moduleIconMap,\n                moduleDurationMap: moduleDurationMap,\n                scheduleType: journeyData.scheduleType\n            }) %>\n        <% } %>\n    </div>\n</div>\n\n<%\nvar notes = (journeyData.detail || []).reduce(function(allNotes, dayItem) {\n    var dayNotes = (dayItem.data || []).reduce(function(sum, moduleItem) {\n        if (moduleItem.moduleTypeValue == 8) {\n            sum.push(moduleItem);\n        }\n        return sum;\n    }, []);\n\n    return allNotes.concat(dayNotes);\n}, []);\n%>\n\n<% if (notes.length) { %>\n    <div class="detail-note">\n        <div class="detail-note-head">行程附注<i class="icon"></i></div>\n        <div class="detail-note-body">*请注意以下行程补充事项：</div>\n        <div class="detail-note-body">\n            <%- notes.map(function(note) {return helper.nb2br(note.content)}).join(\'<br>\') %>\n        </div>\n    </div>\n<% } %>\n\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journey4PhotoTemplate='\n\n<%\n\nvar photoLength = Array.isArray(pictures) ? pictures.length : 0,\n    photoStep = 3;\n\nif (photoLength % 3 === 0) {\n    photoStep = 3;\n} else if (photoLength % 2 === 0) {\n    photoStep = 2;\n} else if (photoLength === 1) {\n    photoStep = 2;\n}\n\n%>\n\n<% if(photoLength) { %>\n    <div class="detail-journey-photos">\n        <div class="detail-journey-photo detail-journey-photo-<%= photoStep %>">\n            <% pictures.forEach(function(photo, photoIndex) { %>\n                <% if(photoIndex < photoLength) { %>\n                    <div\n                        <% if (hasDetail) { %>\n                            class="J_ViewDetail detail-journey-photo-item detail-journey-photo-item-clickable"\n                            data-id="<%= cid %>"\n                        <% } else { %>\n                            class="detail-journey-photo-item"\n                        <% } %>\n                    >\n                        <div class="detail-journey-photo-item-inner">\n                            <img src="<%= cdn.cdnHost %>/static/img/2016/common/placeholder-4x3.png"\n                                data-src="<%= helper.resizeImage(photo.url, 640, 480, 1) %>"\n                                alt="<%= photo.pic_title %>">\n                            <% if (photo.title) { %>\n                                <div class="detail-journey-photo-item-mask"></div>\n                                <div class="detail-journey-photo-item-title"><%= photo.title %></div>\n                            <% } %>\n                        </div>\n                    </div>\n                    <% if ((photoIndex + 1) % photoStep === 0) { %>\n                        <div class="detail-feature-photo-sep"></div>\n                    <% } %>\n                <% } %>\n            <% }) %>\n        </div>\n    </div>\n<% } %>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.journey4ResourceTemplate='\n<%\nvar resourceLength = (journeyData.data || []).length;\n\nvar hotelLevelMap = {\n    1: \'一星级\',\n    2: \'二星级\',\n    3: \'三星级\',\n    4: \'四星级\',\n    5: \'五星级\'\n};\n\nvar mealTypeMap = {\n    breakfast: \'早餐\',\n    lunch: \'午餐\',\n    dinner: \'晚餐\',\n    allDay: \'全天用餐\'\n}\n\n\nfunction isSpotAvailable(spot) {\n    if (spot &&\n        spot.poiId &&\n        spot.latitude &&\n        spot.longitude &&\n        spot.picture &&\n        spot.picture.length) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction isEmpty(value) {\n    function _isEmpty(value) {\n        switch (typeof value) {\n            case \'string\':\n                return !value;\n            case \'number\':\n                return !value;\n            case \'bollean\':\n                return value;\n            default:\n                if(Array.isArray(value)) {\n                    return value.every(_isEmpty);\n                } else {\n                    return !Object.keys(value || {}).length;\n                }\n        }\n    }\n    return _isEmpty(value);\n}\n\nfunction isFoodEmpty(resData) {\n    return isEmpty((resData || {}).hasInfoList);\n}\n\nfunction isResourceEmpty(resData) {\n    var emptyFlag = false;\n    switch (parseInt((resData || {}).moduleTypeValue, 10)) {\n        case 4:\n            emptyFlag = isFoodEmpty(resData)\n            break;\n        case 8:\n            emptyFlag = true;\n            break;\n    }\n\n    return emptyFlag;\n}\n\n%>\n\n<% (journeyData.data || []).forEach(function(resource, resourceIndex) { %>\n    <% var resourceType = resource.moduleTypeValue %>\n    <% if (isResourceEmpty(resource)) { return; }%>\n    <div class="J_JourneyItem<%= resource.cid %>">\n        <% var subResourceLength = (resource.data || []).length %>\n        <div class="detail-journey-title">\n\n            <i class="icon detail-journey-label-<%= moduleIconMap[resourceType] %>"></i>\n\n            <% if (resourceType == 4) { %>\n                <% if (resource.moment) { %>\n                    <i class="detail-journey-time"><%= resource.moment %></i>\n                <% } %>\n            <% } else if ((resource.moment || resource.period) && String(resource.moment || resource.period) != \'00:00\') { %>\n                <i class="detail-journey-time"><%= resource.moment || resource.period %></i>\n            <% } %>\n\n            <% if (resourceType == 1) {%>\n                景点 · <%- (resource.data || []).map(function(scenic) {\n                    return isSpotAvailable(scenic) ? \'<a class="J_ViewDetail" data-id="\' + scenic.cid + \'" href="javascript:;">\' + scenic.title + \'</a>\' : scenic.title\n                }).join(\' - \')%>\n            <% } else if (resourceType == 2) { %>\n                住宿 · <%- (resource.data || []).map(function(hotel) {\n                    var title = hotel.title;\n                    if (hotel.starName) {\n                        title += \'<span class="detail-journey-star">\' + (hotelLevelMap[hotel.starName] || hotel.starName)  + \'</span>\'\n                    }\n                    return title;\n                }).join(resource.relative == 1 ? \'<span class="detail-journey-relative">和</span>\' : \'<span class="detail-journey-relative">或</span>\')%>\n            <% } else if (resourceType == 3) { %>\n                <% // traffic %>\n                <% if (resource.from) { %>\n                    <strong><%= resource.from %></strong>\n                <% } %>\n                <% if (resource.to) { %>\n                    <% if (resource.meanValue == 6) { %>\n                        -\n                    <% } else { %>\n                        <i class="icon detail-journey-transport-<%= trafficTypeMap[resource.meanValue] %>"></i>\n                    <% } %>\n                    <strong><%= resource.to %></strong>\n                <% } %>\n            <% } else if (resourceType == 4) { %>\n                <% // food %>\n                <%- (resource.hasInfoList).map(function(dinner) {\n                    return mealTypeMap[dinner.type] + \'：\' + (dinner.has == 0 ? \'敬请自理\' : \'已含\')\n                }).join(\'<i class="meal-sep">；</i>\') %>\n            <% } else if (resourceType == 5) { %>\n                <% // shopping %>\n                购物店信息<span><%= resource.reminder %></span>\n            <% } else if (resourceType == 6) { %>\n                <% // activity %>\n                自由活动\n            <% } else if (resourceType == 7) {%>\n                <% // reminder %>\n                <%= resource.type || \'温馨提醒\' %>\n            <% } else if (resourceType == 8) {%>\n                <% // note %>\n            <% } else { %>\n                <%= resource.title %>\n            <% } %>\n\n        </div>\n\n        <% if (resourceType == 6 && resource.title) { %>\n            <div class="detail-journey-title-sub">\n                <%= resource.title %>\n            </div>\n        <% } %>\n\n        <% if (resource.times) { %>\n            <div class="detail-journey-duration"><%= moduleDurationMap[resourceType] %>：<%= resource.times %></div>\n        <% } %>\n\n        <% if (resourceType == 4 && resource.title) { %>\n            <div class="detail-journey-title-sub">\n                <%= resource.title %>\n            </div>\n        <% } %>\n\n        <% if (resource.content) { %>\n            <div class="detail-journey-desc"><%- helper.nb2br(resource.content) %></div>\n        <% } %>\n\n        <% if (resource.poiDescription) { %>\n            <div class="detail-journey-desc"><%- helper.nb2br(resource.poiDescription) %></div>\n        <% } %>\n\n        <% if (resourceType == 5 && resource.data && resource.data.length) { %>\n            <div class="detail-journey-desc detail-journey-shopping-list">\n                <table>\n                    <thead>\n                        <tr>\n                            <th class="col-1">名称</th>\n                            <th class="col-2">营业产品</th>\n                            <th class="col-3">停留时间</th>\n                            <th class="col-4">说明</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <% resource.data.forEach(function(item) { %>\n                            <tr>\n                                <td class="col-1"><%= item.title %></td>\n                                <td class="col-2"><%= item.product %></td>\n                                <td class="col-3"><%= item.times %></td>\n                                <td class="col-4"><%= item.instruction %></td>\n                            </tr>\n                        <% }) %>\n                    </tbody>\n                </table>\n            </div>\n        <% } %>\n\n        <%- include(\'journey4Photo\', {\n            pictures: resource.picture,\n            hasDetail: false,\n            cid: \'\'\n        }) %>\n\n        <% if (resourceType == 1 && resource.data && resource.data.length) { %>\n            <% resource.data.forEach(function(item) { %>\n                <div class="J_JourneyItem<%= item.cid %>">\n                    <% if (subResourceLength > 1) { %>\n                        <div class="detail-journey-title-sub">\n                            景点 ·\n                            <% if (isSpotAvailable(item)) { %>\n                                <a class="J_ViewDetail" href="javascript:;" data-id="<%= item.cid %>"><%= item.title %></a>\n                            <% } else { %>\n                                <%= item.title %>\n                            <% } %>\n                        </div>\n                    <% } %>\n\n                    <% if (scheduleType != 1) { %>\n                        <ul class="detail-journey-list">\n                            <% if (item.times) { %>\n                                <li><i class="icon detail-journey-icon-smile"></i>建议时间：<%= item.times %></li>\n                            <% } %>\n                            <% if (item.opened) { %>\n                                <li><i class="icon detail-journey-icon-clock"></i>开放时间：<%= item.opened %></li>\n                            <% } %>\n                            <% if (item.address) { %>\n                                <li class="single"><i class="icon detail-journey-icon-marker"></i>景点地址：<%= item.address %></li>\n                            <% } %>\n                        </ul>\n                    <% } else { %>\n                        <ul class="detail-journey-list">\n                            <% if (item.times) { %>\n                                <li><i class="icon detail-journey-icon-clock"></i>游玩时长：约<%= item.times %></li>\n                            <% } %>\n                        </ul>\n                    <% } %>\n\n\n                    <% if (item.content) { %>\n                        <div class="detail-journey-desc"><%- helper.trimBoundBr(helper.nb2br(item.content)) %></div>\n                    <% } %>\n\n                    <%- include(\'journey4Photo\', {\n                        pictures: item.picture,\n                        hasDetail: isSpotAvailable(item),\n                        cid: item.cid\n                    }) %>\n                </div>\n            <% })%>\n        <% } %>\n\n\n        <% if (resourceType == 2 && resource.data && resource.data.length) { %>\n            <% var hotelAmount = resource.data.length; %>\n            <% resource.data.filter(function(item){\n                var rooms = false;\n                if (item && Array.isArray(item.room) && item.room.length) {\n                    rooms = item.room.filter(function(room) {\n                        return room && (room.title || room.description || room.picture && room.picture.length)\n                    });\n                }\n                return rooms && rooms.length >= 1;\n            }).forEach(function(item) { %>\n                <div class="J_JourneyItem<%= item.cid %>">\n\n                    <div class="detail-journey-title-sub">\n                        <% if (hotelAmount > 1) { %>\n                            房型介绍 · <%= item.title %>\n                        <% } else { %>\n                            房型介绍\n                        <% } %>\n                    </div>\n\n                    <% item.room.forEach(function(room) { %>\n                        <% if (room.title) { %>\n                            <div class="detail-journey-title-3"><%= room.title %></div>\n                        <% } %>\n\n                        <% if (room.description) { %>\n                            <div class="detail-journey-desc"><%- room.description %></div>\n                        <% } %>\n\n                        <%- include(\'journey4Photo\', {\n                            pictures: room.picture,\n                            hasDetail: false,\n                            cid: \'\'\n                        }) %>\n\n                    <% })%>\n\n                </div>\n            <% })%>\n        <% } %>\n\n\n        <% if (resource.remark) { %>\n            <div class="detail-journey-desc">备注：<%- helper.nb2br(resource.remark) %></div>\n        <% } %>\n\n        <% if (resourceIndex < resourceLength - 1) { %>\n            <div class="detail-journey-seprate"></div>\n        <% } %>\n    </div>\n<% }) %>\n';},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){D=g.layer.open({type:1,title:!1,closeBtn:!1,content:E({dialogType:e}),area:["700px","auto"],btn:!1,success:t})}function r(){a(c,"send")}function o(){a(l,"print")}function s(){g.layer.close(D)}function c(t){u(t,"send")}function l(t){u(t,"print")}function u(t,e){function n(t){l.css("visibility","visible").find("strong").text(t.join("；"))}function i(){l.css("visibility","hidden").find("strong").text("")}function a(){var t=o.filter(".active").toArray().map(function(t){return{id:$(t).data("id"),name:$(t).data("name")}});return{groupCode:t,email:c.val(),productId:S.getState("productId"),productName:O,resId:M}}function r(){if(u){var t=d(a(),e);t===!0?i():n(t)}}var o=t.find(".J_VisaPersonType"),c=t.find(".J_VisaEmail"),l=t.find(".J_DialogError"),u=!1;o.click(function(){var t=$(this);t.hasClass("active")?t.removeClass("active"):t.addClass("active"),r()}),c.on("change",r),t.on("click",".J_VisaCancel, .J_VisaClose",s).on("click",".J_VisaSend",function(){var t=a(),r=d(t,e);"send"===e?(u=!0,$(this).attr({href:"javascript:;"}).removeAttr("target"),r===!0?f(t):n(r)):r===!0?(i(),$(this).attr({href:j.config.url.visaPrint(t),target:"_blank"})):n(r)})}function d(t,e){var n=[];return t.groupCode&&0!=t.groupCode.length||n.push("请选择您的身份类型"),"send"===e&&(t.email?(0,_.checkEmail)(t.email)===!1&&n.push("请输入正确的邮箱"):n.push("请输入您常用的邮箱")),0===n.length||n}function f(t){$.ajax({url:j.config.url.visaSend(),dataType:"json",data:{d:JSON.stringify(t)},type:"post",success:function(t){t.success?p():h(t&&t.message)},error:function(){h()}})}function p(){var t=g.layer.open({type:1,title:!1,time:3e3,content:'<div class="dialog-success"><div class="dialog-close"></div><i class="icon"></i>材料已经发送至您的邮箱，请注意查收。</div>',area:["400px","auto"],btn:!1,closeBtn:!1,success:function(e){e.on("click",".dialog-close",function(){g.layer.close(t)})},end:s})}function h(t){var e=g.layer.open({type:1,title:!1,content:'<div class="dialog-error"><div class="dialog-close"></div><i class="icon"></i>'+(t||"材料发送失败，请稍后重试。")+"</div>",area:["400px","auto"],btn:!1,closeBtn:!1,success:function(t){t.on("click",".dialog-close",function(){g.layer.close(e)})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.Visa=void 0;var v=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=n(298),y=n(310),g=n(311),b=n(355),_=n(326),x=n(377),w=n(378),j=n(314),k=1,I=4,T=5,C=$(window),D=void 0,S=void 0,M=void 0,O=void 0,E=y.template.compile(w.detailVisaDialogTemplate);e.Visa=function(){function t(e){i(this,t),this.status=k,this.visaData=null,this.$el=e.$el,S=(0,m.getStore)()}return v(t,[{key:"load",value:function(t){this.visaData=t,this.status=I}},{key:"render",value:function(){var t=y.template.compile(x.detailVisaTemplate),e=S.getState("retailCity"),n=void 0;"[object Array]"===Object.prototype.toString.call(e)&&e.length&&(n=e[0].name);var i=this.$el.data("id"),a=this.visaData.filter(function(t){return(t.visaResIdAndJourneyId||[]).some(function(t){return t.journeyId==i})});this.$el.append(t({data:a,journeyId:i,retailName:n})).removeClass("section-loading"),this.status=T,this.bind()}},{key:"bind",value:function(){this.$el.find(".J_DetailVisaBlock").each(function(){var t=$(this);t.find(".J_VisaTab").each(function(){(0,b.createTaber)($(this),{ctx:t})}).end().find(".J_DetailVisaDeadline").each(function(){var t=$(this),e=t.parent(),n=e.find(".detail-visa-deadline");t.click(function(t){t.stopPropagation(),e.hasClass("expand")?e.removeClass("expand"):e.addClass("expand")}),n.click(function(t){t.stopPropagation()}),$(document).click(function(){e.removeClass("expand")})}).end().find(".J_DetailVisaSend").click(function(){M=$(this).data("id"),O=$(this).data("name"),r()}).end().find(".J_DetailVisaPrint").click(function(){M=$(this).data("id"),O=$(this).data("name"),o()})})}},{key:"remove",value:function(){this.$el.remove(),C.trigger("resize")}},{key:"isLoaded",value:function(){return this.status>=I}},{key:"isRendered",value:function(){return this.status>=T}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailVisaTemplate='\n<% var materialTypeMap = {0: \'原件\',1: \'复印件\',2: \'扫描件\',3: \'电子件\'} %>\n<% var deadline %>\n<div class="section-box detail-visa">\n    <div class="section-box-head">\n        <h2>签证信息</h2>\n    </div>\n    <div class="section-box-body">\n\n        <% for (var i = 0; i < data.length; i++) { %>\n            <div class="J_DetailVisaBlock">\n                <% var visa = data[i]; %>\n                <% var visaInfo = visa.visaInfo; %>\n                <% var deadlines = (visa.deadline || {})[journeyId]; %>\n                <div class="section-box-title">\n                    <h3><%= visaInfo.name %></h3>\n                </div>\n\n                <div class="section-box-content">\n                    <div class="detail-visa-info">\n\n                        <% if (visaInfo.visaCityName) { %>\n                            <div class="detail-visa-info-item">\n                                所属领区：<strong><%= visaInfo.visaCityName %></strong>\n                            </div>\n                        <% } %>\n                        <% if (visaInfo.enterCountryTimes) { %>\n                            <div class="detail-visa-info-item">\n                                入境次数：<strong><%= visaInfo.enterCountryTimes %></strong>\n                            </div>\n                        <% } %>\n                        <% if (visaInfo.longestResidenceTime) { %>\n                            <div class="detail-visa-info-item">\n                                停留天数：<strong><%= visaInfo.longestResidenceTime %></strong>\n                            </div>\n                        <% } %>\n                        <% if (visaInfo.handleTimeDuration) { %>\n                            <div class="detail-visa-info-item">\n                                办理时长：<strong><% if (visaInfo.handleTimeDuration == 0) { %>以实际情况为准<% } else { %>材料齐全后预计<%= visaInfo.handleTimeDuration %>个工作日<% } %></strong>\n                            </div>\n                        <% } %>\n                        <% if (deadlines && deadlines.length && (deadline = deadlines[0])) { %>\n                            <div class="detail-visa-info-item single-row">\n                                材料收取截止时间：<strong>出发<%= deadline.visaEndDay ? \'前\' + deadline.visaEndDay : \'当\'%>天的<%= deadline.visaEndOclock %>点</strong>\n                                <% if (deadlines.length > 1) { %>\n                                    <a class="J_DetailVisaDeadline detail-visa-time-more" href="javascript:;" mm="点击_详情区_签证信息_查看全部截止时间">查看全部截止时间<i class="icon"></i></a>\n                                    <div class="detail-visa-deadline">\n                                        <i class="detail-visa-deadline-arrow"></i>\n                                        <div class="detail-visa-deadline-inner">\n                                            <div class="detail-visa-deadline-left">\n                                                <div class="thead">\n                                                    <table>\n                                                        <thead>\n                                                            <tr>\n                                                                <th class="col-1">出发团期</th>\n                                                                <th class="col-2">收取材料截止时间</th>\n                                                            </tr>\n                                                        </thead>\n                                                    </table>\n                                                </div>\n                                                <div class="tbody">\n                                                    <table>\n                                                        <tbody>\n                                                            <% for (var index = 0; index < deadlines.length; index++) { %>\n                                                                <% if (index % 2 === 0) { %>\n                                                                    <% deadline = deadlines[index] %>\n                                                                    <tr class="<%= index % 4 !== 0 ? \'even\' : \'\'%>">\n                                                                        <td class="col-1"><%= deadline.departsDate %></td>\n                                                                        <td class="col-2"><%= deadline.visaEndTime%>&nbsp;&nbsp;<%= deadline.visaEndOclock %>点之前</td>\n                                                                    </tr>\n                                                                <% } %>\n                                                            <% } %>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                            <div class="detail-visa-deadline-right">\n                                                <div class="thead">\n                                                    <table>\n                                                        <thead>\n                                                            <tr>\n                                                                <th class="col-1">出发团期</th>\n                                                                <th class="col-2">收取材料截止时间</th>\n                                                            </tr>\n                                                        </thead>\n                                                    </table>\n                                                </div>\n                                                <div class="tbody">\n                                                    <table>\n                                                        <tbody>\n                                                        <% for (var index = 0; index < deadlines.length; index++) { %>\n                                                            <% if (index % 2 === 1) { %>\n                                                                <% deadline = deadlines[index] %>\n                                                                <tr class="<%= (index - 1) % 4 !== 0 ? \'even\' : \'\'%>">\n                                                                    <td class="col-1"><%= deadline.departsDate %></td>\n                                                                    <td class="col-2"><%= deadline.visaEndTime%>&nbsp;&nbsp;<%= deadline.visaEndOclock %>点之前</td>\n                                                                </tr>\n                                                            <% } %>\n                                                        <% } %>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                <% } %>\n                            </div>\n                        <% } %>\n                        <% if (visaInfo.acceptanceScope) { %>\n                            <div class="detail-visa-info-item single-row">\n                                受理范围：<strong><%= visaInfo.acceptanceScope %></strong>\n                            </div>\n                        <% } %>\n                    </div>\n                </div>\n\n                <div class="J_VisaTab section-box-toolbar">\n                    <ul class="section-box-tab">\n                        <% for (var h = 0; h < visaInfo.customerPropertyNames.length; h++) { %>\n                            <li<% if (h === 0) { %> class="active"<% } %> data-rel=".J_DetailVisa<%= visaInfo.customerPropertyNames[h].code %>">\n                                <a href="javascript:;"><%= visaInfo.customerPropertyNames[h].name %></a>\n                            </li>\n                        <% } %>\n                    </ul>\n\n                    <div class="detail-visa-button">\n                        <a class="J_DetailVisaSend detail-visa-button-mail" data-id="<%= visaInfo.id %>" data-name="<%= visaInfo.name %>" href="javascript:;" mm="点击_详情区_签证信息_发送材料"><i class="icon"></i>发送到我的邮箱</a>\n                        <a class="J_DetailVisaPrint detail-visa-button-print" data-id="<%= visaInfo.id %>" data-name="<%= visaInfo.name %>" href="javascript:;" mm="点击_详情区_签证信息_打印材料"><i class="icon"></i>打印材料</a>\n                    </div>\n                </div>\n\n                <div class="section-box-content detail-visa-material">\n                    <% var visaMaterial = visa.visaMaterial %>\n                    <% for (var h = 0; h < visaInfo.customerPropertyNames.length; h++) { %>\n                        <% var personType = visaInfo.customerPropertyNames[h].code %>\n\n                        <div class="J_DetailVisa<%= personType %> detail-visa-block<%= h == 0 ? \' active\' : \'\' %>">\n                            <div class="detail-visa-material-head">\n                                <table>\n                                    <thead>\n                                        <tr>\n                                            <th class="col-1">所需材料</th>\n                                            <th class="col-2">材料类型</th>\n                                            <th class="col-3">描述</th>\n                                        </tr>\n                                    </thead>\n                                </table>\n                            </div>\n                            <div class="detail-visa-material-body">\n                                <table>\n                                    <tbody>\n                                    <% for (var materialIndex = 0; materialIndex < visaMaterial.length; materialIndex++) { %>\n                                        <% var material = visaMaterial[materialIndex] %>\n                                        <% if (material.personnenlType == personType) { %>\n                                            <tr>\n                                                <td class="col-1"><%= material.customName %></td>\n                                                <td class="col-2"><%= materialTypeMap[material.materialType] %></td>\n                                                <td class="col-3">\n                                                    <%=# material.materialDesc %>\n                                                    <% if (material.attachments && material.attachments.length) { %>\n                                                        <% for (var attachmentIndex = 0; attachmentIndex < material.attachments.length; attachmentIndex++) { %>\n                                                            <div class="detail-visa-material-attachment">\n                                                                <a href="<%= material.attachments[attachmentIndex].attachmentPath %>" mm="点击_详情区_签证信息_查看材料模板"><%= material.attachments[attachmentIndex].attachmentName %></a>\n                                                            </div>\n                                                        <% } %>\n                                                    <% } %>\n                                                </td>\n                                            </tr>\n                                        <% } %>\n                                    <% } %>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    <% } %>\n                </div>\n\n            </div>\n        <% } %>\n\n\n        <div class="section-box-title">\n            <h3>签证须知</h3>\n        </div>\n\n        <div class="section-box-content">\n            <div class="item-with-title">\n                <span class="dot">•</span>\n                <div class="item-title"><strong>注意事项：</strong></div>\n                <p>\n                    当您在线提交订单成功后，可在会员中心提交材料扫描件。<br>\n                    请确保护照有效期：本次旅游归国至少还有6个月以上有效期，且尚有签证所需空白签证页。\n                </p>\n            </div>\n            <% for (var i = 0; i < data.length; i++) { %>\n                <% var visa = data[i]; %>\n                <% var visaInfo = visa.visaInfo; %>\n                <% if (visaInfo.bookNotice) { %>\n                    <div class="item-with-title">\n                        <span class="dot">•</span>\n                        <div class="item-title"><strong><%= visaInfo.customName %>办理须知：</strong></div>\n                        <p><%=# (visaInfo.bookNotice || \'\').replace(/[\\n\\r]+/g, \'<br>\') %></p>\n                    </div>\n                <% } %>\n            <% } %>\n        </div>\n\n\n        <div class="section-box-title">\n            <h3>材料递交方式</h3>\n        </div>\n\n        <div class="section-box-content">\n\n            <div class="item-with-title">\n                <span class="dot">•</span>\n                <div class="item-title"><strong>快递材料至途牛门市，具体门市请在下单时选择</strong></div>\n            </div>\n            <% if (retailName) { %>\n                <div class="item-with-title">\n                    <span class="dot">•</span>\n                    <div class="item-title"><strong>亲自到途牛门市当面递交材料</strong></div>\n                    <p>为您推荐门市：\n                        <a href="javascript:;"><i class="icon detail-visa-retail-location"></i>&nbsp;<span><%= retailName %></span></a>\n                        <a class="detail-visa-retail-view J_retailView" href="javascript:;" mm="点击_详情区_签证信息_查看送签门市">查看全部门市</a>\n                    </p>\n                </div>\n            <% } %>\n        </div>\n\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailVisaDialogTemplate='\n<div class="dialog dialog-visa">\n    <div class="J_VisaClose dialog-close"></div>\n    <% if (dialogType == \'send\') { %>\n        <div class="dialog-head">将材料发送到您的邮箱</div>\n    <% } else { %>\n        <div class="dialog-head">打印签证材料</div>\n    <% } %>\n    <div class="dialog-body">\n        <div class="dialog-row">请选择身份类型</div>\n        <div class="dialog-row">\n            <div class="J_VisaPersonType dialog-checkbox" data-id="2" data-name="在职人员"><i class="icon"></i>在职人员</div>\n            <div class="J_VisaPersonType dialog-checkbox" data-id="3" data-name="退休人员"><i class="icon"></i>退休人员</div>\n            <div class="J_VisaPersonType dialog-checkbox" data-id="4" data-name="自由职业者"><i class="icon"></i>自由职业者</div>\n            <div class="J_VisaPersonType dialog-checkbox" data-id="5" data-name="学龄前儿童"><i class="icon"></i>学龄前儿童</div>\n            <div class="J_VisaPersonType dialog-checkbox" data-id="6" data-name="在校学生"><i class="icon"></i>在校学生</div>\n            <div class="J_VisaPersonType dialog-checkbox" data-id="7" data-name="无业人员"><i class="icon"></i>无业人员</div>\n        </div>\n        <% if (dialogType === \'send\') { %>\n            <div class="dialog-row dialog-row-input">\n                <div class="dialog-input">\n                    <div class="dialog-label">请输入您常用的邮箱：</div>\n                    <div class="dialog-input-ctrl">\n                        <input class="J_VisaEmail" type="text" name="email">\n                    </div>\n                </div>\n            </div>\n        <% } %>\n        <div class="J_DialogError dialog-row dialog-error-tip">\n            <i class="icon"></i>&nbsp;<strong></strong>\n        </div>\n        <div class="dialog-row dialog-buttons">\n            <a class="J_VisaCancel dialog-button dialog-cancel" href="javascript:;">取消</a>\n            <% if (dialogType == \'send\') { %>\n                <a class="J_VisaSend dialog-button dialog-send" href="javascript:;">发送</a>\n            <% } else { %>\n                <a class="J_VisaSend dialog-button dialog-send" href="javascript:;">打印</a>\n            <% } %>\n        </div>\n        \n    </div>\n</div>\n'},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Guide=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(310),o=n(315),s=n(380),c=n(381),l=1,u=4,d=5,f=r.template.compile(c.detailGuideTemplate),p=$(window);e.Guide=function(){function t(e){i(this,t),this.status=l,this.allGuideData=null,this.$el=e.$el}return a(t,[{key:"load",value:function(t){this.allGuideData=t,this.status=u}},{key:"getGuideData",value:function(t){return(this.allGuideData.journeyGuides||[]).filter(function(e){return e&&e.journeyId==t&&e.tourGuides&&e.tourGuides.length})[0]}},{key:"render",value:function(){var t=this.$el.data("id"),e=this.getGuideData(t);e?(this.$el.append(f({data:e,tip:this.allGuideData.tips})).removeClass("section-loading").addClass("loaded-guide"),this.bind()):this.remove(),p.trigger("resize")}},{key:"bind",value:function(){(0,s.createGallery)(this.$el.find(".J_GuideGallery")),this.$el.find(".J_guideHonor").each(function(){var t=$(this);new o.Tip(t,{content:$("<div />").addClass("guide-detail").append(t.data("title")),dialog:{tipsOffset:[10,-30]}})})}},{key:"remove",value:function(){this.$el.remove(),p.trigger("resize")}},{key:"isLoaded",value:function(){return this.status>=u}},{key:"isRendered",value:function(){return this.status>=d}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t.find("[data-role=item]").toArray().map(function(t){return t=$(t),{$element:t}})}function a(t){t.forEach(function(t){t.width=t.$element.outerWidth(!0),t.height=t.$element.outerHeight(!0)})}function r(t){t=Object.assign({},t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=-t[e]);return t}function o(t,e){var n=new u(t,e);return c.push(n),n}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=[],l=$(window),u=function(){function t(e,i){n(this,t),this.options=Object.assign({direction:"h"},i),this.children=null,this.size=null,this.prevDisabled=!0,this.nextDisabled=!0,this.position={left:0,top:0},this.$container=e,this.$list=null,this.$prev=null,this.$next=null,this.init(),this.bind()}return s(t,[{key:"init",value:function(){this.options.direction;this.$list=this.$container.find("[data-role=list]"),this.$prev=this.$container.find("[data-role=prev]"),this.$next=this.$container.find("[data-role=next]"),this.children=i(this.$list),this.updateSize(),this.updateState(),this.updateView()}},{key:"update",value:function(){this.updateSize(),this.move(0)}},{key:"updateSize",value:function(){var t=this.options.direction,e="h"===t?"width":"height";a(this.children),this.size={width:this.$container.width(),height:this.$container.height()},this.$list[e](this.children.reduce(function(t,n){return n[e]+t},0)),this.listSize={width:this.$list.width(),height:this.$list.height()},this.listSize[e]<=this.size[e]?(this.$prev.hide(),this.$next.hide()):(this.$prev.show(),this.$next.show())}},{key:"updatePosition",value:function(t){var e=this.options.direction,n="h"===e?"left":"top",i="h"===e?"width":"height",a=0,r=this.position[n];t>0&&(r+=this.size[i]),this.children.some(function(e,n){var i=a+e.width;return 1===t&&r>=a&&r<i?(a=i,!0):t===-1&&r>a&&r<=i||(a=i,!1)}),t>0&&(a-=this.size[i]),this.listSize[i]-a<this.size[i]&&(a=this.listSize[i]-this.size[i]);var o={};o[n]=a,this.position=Object.assign({left:0,top:0},o)}},{key:"updateState",value:function(){var t=this.options.direction,e="h"===t?"left":"top",n="h"===t?"width":"height",i=this.position,a=this.size,r=this.listSize;i[e]<=0?this.prevDisabled=!0:this.prevDisabled=!1,i[e]+a[n]>=r[n]?this.nextDisabled=!0:this.nextDisabled=!1}},{key:"updateView",value:function(){this.prevDisabled?this.$prev.addClass("disabled"):this.$prev.removeClass("disabled"),this.nextDisabled?this.$next.addClass("disabled"):this.$next.removeClass("disabled")}},{key:"bind",value:function(){var t=this;this.$prev.click(function(){t.prevDisabled||t.move(-1)}),this.$next.click(function(){t.nextDisabled||t.move(1)})}},{key:"move",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];0===t?this.$list.css(r(this.position)):(this.updatePosition(t),this.updateState(),this.updateView(),this.$list.stop(!0,!0).animate(r(this.position),700))}}]),t}();l.on("resize",function(){c.forEach(function(t){return t.update()})}),e.createGallery=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailGuideTemplate='\n<div class="section-box detail-guide">\n    <div class="section-box-head">\n        <h2>线路导游</h2>\n    </div>\n    <div class="section-box-body">\n\n        <div class="J_GuideGallery guide-wrap">\n            <div class="guide-button guide-prev" data-role="prev" mm="点击_详情区_线路导游_切换查看导游"><i class="icon"></i></div>\n            <div class="guide-button guide-next" data-role="next" mm="点击_详情区_线路导游_切换查看导游"><i class="icon"></i></div>\n            <div class="guide-box">\n                <ul class="guide-list" data-role="list">\n                    <% for(var guideIndex = 0; guideIndex < data.tourGuides.length; guideIndex++) { %>\n                        <% var guide = data.tourGuides[guideIndex] %>\n                        <li class="guide-item" data-role="item">\n                            <div class="guide-inner">\n                                <% if (guide.level == 1) { %>\n                                    <div class="guide-medal"></div>\n                                <% } %>\n\n                                <div class="guide-photo">\n                                    <img src="<%= guide.guideImage %>" alt="<%= guide.guideName %>">\n                                </div>\n\n                                <div class="guide-info">\n                                    <div class="guide-name">\n                                        <%= guide.guideName %>\n                                        <% if (guide.guideSex == 1) { %>\n                                            <i class="icon icon-gender-male"></i>\n                                        <% } else { %>\n                                            <i class="icon icon-gender-female"></i>\n                                        <% } %>\n                                    </div>\n\n                                    <div class="guide-profile">\n                                        <span>满意度 <strong><%= guide.guideSatisfaction %>%</strong></span>\n                                        <span>带团年限 <strong><%= guide.workingTime %></strong></span>\n                                    </div>\n\n                                    <% if (guide.fields) { %>\n                                        <div class="guide-desc guide-domain">\n                                            <div class="guide-label">擅长领域：</div>\n                                            <div class="guide-content" title="<%= guide.fields %>"><%= guide.fields %></div>\n                                        </div>\n                                    <% } %>\n\n                                    <% if (guide.languages) { %>\n                                        <div class="guide-desc guide-language">\n                                            <div class="guide-label">擅长语言：</div>\n                                            <div class="guide-content" title="<%= guide.languages %>"><%= guide.languages %></div>\n                                        </div>\n                                    <% } %>\n\n                                    <% if (guide.honors) { %>\n                                        <div class="guide-desc guide-award">\n                                            <div class="guide-label">荣誉成就：</div>\n                                            <div class="J_guideHonor guide-content" data-title="<%= guide.honors %>"><%= guide.honors %></div>\n                                        </div>\n                                    <% } %>\n                                </div>\n\n                            </div>\n\n                        </li>\n                    <% } %>\n                </ul>\n            </div>\n        </div>\n\n        <% if (tip) { %>\n            <div class="section-box-content">\n                <div class="guide-tip"><%= tip %></div>\n            </div>\n        <% } %>\n\n    </div>\n</div>\n'},function(t,e,n){"use strict";function i(t,e){return s?void t(s):l?void e():void $.ajax({dataType:"json",url:o.config.url.guide({productId:(0,r.getStore)().getState("productId")}),beforeSend:function(){},complete:function(){l=!0},success:function(n){n&&n.success?(t(n.data),s=n.data):e()}})}function a(t,e){if(c)return void t(c);if(u)return void e();var n=(0,r.getStore)();$.ajax({dataType:"json",url:o.config.url.visa({productId:n.getState("productId"),bookCityCode:n.getState("bookCityCode")||void 0,departCityCode:n.getState("departCityCode")||void 0})}).done(function(n){n&&n.success&&n.data?(t(n.data),c=n.data):e()}).fail(function(){e()}).always(function(){u=!0})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchGuide=e.fetchVisa=void 0;var r=n(298),o=n(314),s=null,c=null,l=!1,u=!1;e.fetchVisa=a,e.fetchGuide=i},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){_.on("click",".J_retailView",function(){w?o():s(j,o)})}function r(t){return window.cityList?(l(),void("function"==typeof t&&t())):void $.ajax({url:"/papi/getCityList",data:{},success:function(e){l(),e&&e.success&&(window.cityList=e.data),"function"==typeof t&&t()}})}function o(){var t=void 0;t=p.layer.open({type:1,title:!1,closeBtn:!1,content:u(w),area:["700px","540px"],btn:!1,success:function(e){h.retailCityModule.init({bookCityCode:j}),e.on("click",".retail-box-close",function(){p.layer.close(t)}).on("click",".retail-location-label",function(){$(this).parent().toggleClass("expand")}).on("click",".retail-city-drop-city-name",function(t){var n=$(this);j=n.data("code"),s(j,function(){e.find(".retail-box").parent().html(u(w)),h.retailCityModule.init({bookCityCode:j})}),(0,g.record)("点击_详情区_预订须知_签约门市_切换城市",t)})}})}function s(t,e){$.ajax({dataType:"json",url:b.retailUrl({bookCode:t}),beforeSend:function(){c()},success:function(t){w=t&&t.success?t.data:[],r(e)},error:function(t,n){w=[],r(e)}})}function c(){var t=$(".retail-box");t.length&&t.addClass("loading")}function l(){var t=$(".retail-box");t.length&&t.removeClass("loading")}function u(t){var e=f.template.compile(v.detailRetailTemplate);return e({data:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.policyModule=void 0;var d=n(298),f=n(310),p=n(311),h=n(384),v=n(386),m=n(387),y=n(351),g=(i(y),n(320)),b=($(window),void 0),_=void 0,x=void 0,w=void 0,j=void 0,k={init:function(t){b=t,x=(0,d.getStore)(),j=x.getState("bookCityCode"),_=$("#J_Detail"),$(".J_DetailPolicy").find("[data-role=fold-box]").each(function(){(0,m.createAutoFold)($(this))}),a()}};e.policyModule=k;},function(t,e,n){"use strict";function i(t){var e=[],n={},i=["推荐城市"];t.Hot.forEach(function(t){n[t.districtName]||(n[t.districtName]=[]),n[t.districtName].push(t)}),e.push(n);var a=function(n){var a=t.cityLetter[n],r={};i[n]="";for(var o in a){var s=a[o];i[n]+=o.toUpperCase(),s.forEach(function(t){r[t.districtName]||(r[t.districtName]=[]),t.code==p&&(h=t.name),r[t.districtName].push(t)})}e.push(r)};for(var r in t.cityLetter)a(r);return{data:e,tabHead:i,bookCityName:h}}function a(){f.html(u(i(window.cityList))),r()}function r(){(0,c.createTaber)(f.find(".retail-city-drop-tab"),{ctx:f.find(".retail-city-drop-list")})}Object.defineProperty(e,"__esModule",{value:!0}),e.retailCityModule=void 0;var o=n(298),s=n(310),c=(n(311),n(355)),l=n(385),u=s.template.compile(l.retailCityTemplate),d=void 0,f=void 0,p=void 0,h=void 0,v={init:function(t){f=$("#J_retailCity"),p=t.bookCityCode,d=(0,o.getStore)(),f.length&&window.cityList&&a()}};e.retailCityModule=v},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.retailCityTemplate='\n<div class="retail-location-label">\n    <i class="r-icon-loc"></i><span class="retail-city-selected"><%= bookCityName %></span><i class="r-icon-down"></i>\n</div>\n<div class="retail-city-drop">\n    <div class="retail-city-drop-head">\n        <ul class="retail-city-drop-tab">\n            <% for (var i = 0; i < tabHead.length; i++) { %>\n                <li class="retail-city-drop-tab-item" data-rel=".J_retailTab<%= i %>"><%= tabHead[i] %></li>\n            <% } %>\n        </ul>\n    </div>\n    <div class="retail-city-drop-list">\n        <% for (var j = 0; j < data.length; j++) {\n            var cityItem = data[j]; %>\n            <dl class="retail-city-drop-city-city J_retailTab<%= j %>">\n                <% for (var key in cityItem) {\n                    var cityArea = cityItem[key] %>\n                    <dt><%= key %></dt>\n                    <dd class="retail-city-drop-city-item">\n                        <% for (var k = 0; k < cityArea.length; k++) { %>\n                        <span class="retail-city-drop-city-name <%= cityArea[k].name == bookCityName? \'active\': \'\' %>" data-code="<%= cityArea[k].code %>" data-name="<%= cityArea[k].name %>"><%= cityArea[k].name %></span>\n                        <% } %>\n                    </dd>\n                <% } %>\n            </dl>\n        <%}%>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailRetailTemplate='\n<div class="retail-box">\n    <div class="retail-box-close">\n    </div>\n    <div class="retail-box-head">\n        查看途牛门市\n        <div class="retail-location" id="J_retailCity">\n        </div>\n    </div>\n    <div class="retail-box-body">\n        <% if(data && data.length) { %>\n        <div class="retail-list">\n            <ul>\n                <% for(var i = 0; i < data.length; i++) {\n                    var retailItem = data[i]; %>\n                <li>\n                    <span class="retail-item-num"><%= i+1 %></span>\n                    <div class="retail-item-content">\n                        <p class="retail-item-title"><%= retailItem.name %></p>\n                        <dl class="retail-item-info">\n                            <dt>门市电话：</dt>\n                            <dd><%= retailItem.tel %></dd>\n                            <dt>营业时间：</dt>\n                            <dd><%= retailItem.openTime %></dd>\n                            <dt>门市地址：</dt>\n                            <dd><%= retailItem.address %></dd>\n                        </dl>\n                    </div>\n                </li>\n                <% } %>\n            </ul>\n        </div>\n        <% } else { %>\n        <div class="retail-nf">\n            <div class="retail-nf-bg"></div>\n            <p class="retail-nf-tips">呃~当前城市暂未开通途牛门市</p>\n            <p class="retail-nf-tips">请选择查看您附近城市的门市</p>\n        </div>\n        <% } %>\n        <div class="retail-list-loading">\n            <i class="retail-list-loading-bg"></i>\n            <i class="retail-list-loading-img"></i>\n        </div>\n    </div>\n</div>\n'},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"expand"==t?$('<a class="button-more" href="javascript:;">展开全部<i class="icon"></i></a>'):$('<a class="button-less" href="javascript:;">收起全部<i class="icon"></i></a>')}function a(t,e){var n=new u(t,e);return o.push(n),n}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=[],s=$(window),c=0,l="autoFold",u=function(){function t(e,i){n(this,t),this.originHeight=0,this.expandHeight=0,this.buttonInited=!1,this.inited=!1,this.expanded=!1,this.$element=e,this.id="AUTOFOLD_"+ ++c,this.$inner=e.find("[data-role=fold-box-inner]"),this.$more=null,this.$less=null,this.update()}return r(t,[{key:"init",value:function(){this.originHeight=this.$inner.height(),this.inited=!0}},{key:"initButton",value:function(){this.$more=i("expand"),this.$less=i("fold"),this.bindButton(),this.buttonInited=!0}},{key:"bindButton",value:function(){this.$more.click(this.expand.bind(this)),this.$less.click(this.fold.bind(this))}},{key:"showButton",value:function(){this.buttonInited||this.initButton(),this.$more.appendTo(this.$element),this.$less.appendTo(this.$element),this.updateButton()}},{key:"hideButton",value:function(){this.buttonInited&&(this.$more.remove(),this.$less.remove())}},{key:"updateButton",value:function(){this.buttonInited&&(this.expanded?(this.$more.hide(),this.$less.show()):(this.$more.show(),this.$less.hide()))}},{key:"update",value:function(){this.$element.is(":visible")&&(this.inited||this.init(),this.expandHeight=this.$inner[0].scrollHeight,this.$inner.css("max-height","none"),this.expandHeight>this.originHeight?(this.showButton(),this.updateContent(),this.$element.addClass("fold")):(this.hideButton(),this.$inner.height(this.expandHeight),this.$element.removeClass("fold")),s.trigger("resize",l))}},{key:"updateContent",value:function(){this.expanded?this.$inner.height(this.expandHeight):this.$inner.height(this.originHeight)}},{key:"expand",value:function(){this.expanded=!0,this.updateContent(),this.updateButton()}},{key:"fold",value:function(){this.expanded=!1,this.updateContent(),this.updateButton()}}]),t}();s.on("resize",function(t,e){e!==l&&o.forEach(function(t){return t.update()})}),e.createAutoFold=a},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=/(\d{4}\-\d{2}-\d{2})/.exec(String(t));return e?e[1]:t}function o(){var t={productId:N.getState("productId"),productType:N.getState("productType")};return K.tabId&&(t.tab=K.tabId),K.tagId&&(t.tag=K.tagId),K.photo&&(t.photo=K.photo),K.page&&1!=K.page&&(t.page=K.page),t}function s(t){return t&&t.travelType&&t.travelType.length&&t.travelType.sort(function(t,e){return e.remarkAmount-t.remarkAmount}),t}function c(t){return t&&t.contents&&t.contents.length&&t.contents.forEach(function(t){var e=[];t.extend&&e.push({type:"extend",replyTime:t.extendTime,deltaTime:(0,C.getDeltaDate)(r(t.extendTime),r(t.remarkTime))}),t.replyContents&&t.replyContents.length&&(e=e.concat(t.replyContents),e.sort(function(t,e){return t.replyTime>e.replyTime?1:-1})),t.exts=e}),t}function l(){$.ajax({dataType:"json",url:A.remarkStatusUrl(),data:{productId:N.getState("productId"),productType:N.getState("productType")},success:function(t){t&&t.success&&(d(s(t.data)),u())},error:function(t,e){}})}function u(){L&&L.abort(),L=$.ajax({dataType:"json",url:A.remarkListUrl(),data:o(),beforeSend:_,success:function(t){x(),t&&t.success&&t.data&&f(t.data)},error:function(t,e){"abort"===e||x()}})}function d(t){J||(J=k.template.compile(E.commentLayoutTemplate)),V.html(J({data:t})),G=V.find(".comment-head"),H=V.find(".comment-tab"),B=V.find(".comment-tag"),U=V.find(".comment-list-outer"),z=V.find(".comment-list"),W=V.find(".pagination"),V.removeClass("section-loading"),m(),F.trigger("resize")}function f(t){R||(R=k.template.compile(P.commentContentTemplate)),z.html(R({data:c(t)})),Y?(Y.reload({current:t.currentPage,total:t.totalPages}),Y.render()):Y=(0,O.createPagination)(W,{current:t.currentPage,total:t.totalPages,onchange:function(t){K.page=t,b(),(0,T.record)("点击_详情区_游客点评_翻页查看")}}),F.trigger("resize"),z.find(".J_CommentPhoto").each(function(){var t=$(this);I.layer.photos({photos:t,shift:5,shade:.5}),p(t.find("img").toArray(),function(){(0,D.createGallery)(t)})})}function p(t,e){function n(){a++,a===i&&e()}var i=t.length,a=0;t&&t.length?t.forEach(function(t){var e=new Image;e.onload=function(){n()},e.onerror=function(){n()},e.src=t.src}):e()}function h(){M.off(V),l()}function v(t){A=t,N=(0,j.getStore)(),V=$("#J_Comment"),M.on(V,h)}function m(){var t=H.find(".comment-tab-item");t.click(function(){var e=$(this);e.hasClass("active")||(t.removeClass("active"),e.addClass("active"),y(e.data("id")))});var e=B.find(".comment-tag-item");e.click(function(){var t=$(this);t.hasClass("active")||(e.removeClass("active"),t.addClass("active"),g(t.data("id")))});var n=H.find(".J_CommentPhoto");n.click(function(){K.photo?(K.photo=0,n.removeClass("checked")):(K.photo=1,n.addClass("checked")),b()})}function y(t){t!==K.tabId&&(K.tabId=t,b())}function g(t){t!==K.tagId&&(K.tagId=t,b())}function b(){u()}function _(){U.addClass("loading")}function x(){U.removeClass("loading")}Object.defineProperty(e,"__esModule",{value:!0}),e.commentModule=void 0;var w=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),j=n(298),k=n(310),I=n(311),T=n(320),C=n(326),D=n(380),S=n(351),M=i(S),O=n(389),E=n(390),P=n(391),A=void 0,N=void 0,L=null,J=void 0,R=void 0,F=$(window),V=void 0,G=void 0,H=void 0,B=void 0,U=void 0,z=void 0,W=void 0,Y=void 0,K={tabId:"",tagId:"",photo:0,page:1},q={init:v};(function(){function t(){a(this,t),this.timer=null,this.visible=!1,this.$element=null,this.$arrow=null,this.defaultWidth=500,this.defaultHeight=400,this.width=0,this.height=0,this.delay=150,this.createView()}return w(t,[{key:"createView",value:function(){this.$element=$("<div />").addClass("float-layer").hide().appendTo("body"),this.$inner=$("<div />").addClass("float-layer-inner").appendTo(this.$element),this.$arrow=$("<div />").addClass("float-layer-arrow").appendTo(this.$element)}},{key:"bind",value:function(){}},{key:"show",value:function(t){this.nextImg=t,clearTimeout(this.timer),this.timer=setTimeout(this._show.bind(this),this.delay)}},{key:"getNextPosition",value:function(){var t=this.nextImg,e=void 0;return t&&(e=t.offset()),Object.assign({left:0,top:0,width:t.width(),height:t.height()},e)}},{key:"_show",value:function(){this.getNextPosition();this.$element.css({left:0}),this.visible}},{key:"_load",value:function(){}},{key:"hide",value:function(){clearTimeout(this.timer),this.timer=setTimeout(this._hide.bind(this),this.delay)}},{key:"_hide",value:function(){this.visible=!1,this.nextImg=null,this.width=0,this.height=0,this.$element.hide().css({left:0,top:0}),this.$inner.empty().width(this.width).height(this.height)}}]),t})();e.commentModule=q},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var n=new u(t,e);return s.push(n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.createPagination=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(310),s=[],c='\n<div class="pagination-box">\n    <span class="pagination-item pagination-prev<%= current === 1 ? \' disabled\' : \'\' %>">&lt;</span>\n    <% for (var page = min; page <= max; page++) { %>\n        <span class="pagination-item pagination-page<%= current === page ? \' active\' : \'\' %>"\n            <% if (current !== page) { %>data-page="<%= page %>"<% } %>><%= page %></span>\n    <% } %>\n    <% if (more) { %>\n        <span class="pagination-item pagination-more">•••</span>\n    <% } %>\n    <% if (last) { %>\n        <span class="pagination-item pagination-page" data-page="<%= total %>"><%= total %></span>\n    <% } %>\n    <span class="pagination-item pagination-next<%= current === total ? \' disabled\' : \'\' %>">&gt;</span>\n</div>\n',l=o.template.compile(c),u=function(){function t(e,n){i(this,t),this.current=n.current||1,this.total=n.total||1,this.offset=2,this.$element=e,this.options=Object.assign({},n),this.bind(),this.render()}return r(t,[{key:"bind",value:function(){var t=this;this.$element.on("click",".pagination-prev",function(){t.change(t.current-1)}).on("click",".pagination-next",function(){t.change(t.current+1)}).on("click",".pagination-page",function(){t.change($(this).data("page"))})}},{key:"change",value:function(t){t=parseInt(t),t&&this.current!==t&&t>0&&t<=this.total&&(this.current=t,this.render(),this.options.onchange&&this.options.onchange(t))}},{key:"params",value:function(){var t=this.current,e=this.total,n=this.offset,i=Math.max(t-n,1),a=Math.min(e,i+2*n);return i=Math.max(a-2*n,1),{current:t,total:e,min:i,max:a,more:a<e,last:a!==e}}},{key:"render",value:function(){this.$element.html(l(this.params()))}},{key:"reload",value:function(t){this.current=t.current||this.current,this.total=t.total||this.total,this.offset=t.offset||this.offset,this.options=Object.assign({},this.options,t)}}]),t}();e.createPagination=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.commentLayoutTemplate='\n<% var gradeNames = \'|导游服务|行程安排|餐饮住宿|旅行交通|\' %>\n<div class="section-box comment">\n    <div class="section-box-head">\n        <h2>游客点评</h2>\n    </div>\n    <div class="section-box-body">\n\n        <% if (data && data.statData && data.statData.remarkAmount) { %>\n\n            <div class="comment-head">\n                <div class="comment-satisfaction">\n                    <div>满意度</div>\n                    <div><strong><%= data.statData.satisfaction %>%</strong></div>\n                    <div>来自<%= data.statData.remarkAmount %>名游客的点评</div>\n                    <i class="icon"></i>\n                </div>\n\n                <div class="comment-head-right">\n                    <div class="comment-percent">\n                        <table>\n                            <tr>\n                                <td class="col-1">满意(<%= data.statData.compGrade3Amount %>)</td>\n                                <td class="col-2">\n                                    <div class="comment-percent-value">\n                                        <i style="width: <%= data.statData.compGrade3Percent %>%"></i>\n                                    </div>\n                                </td>\n                                <td class="col-3"><strong><%= data.statData.compGrade3Percent %>%</strong></td>\n                            </tr>\n                            <tr>\n                                <td class="col-1">一般(<%= data.statData.compGrade2Amount %>)</td>\n                                <td class="col-2">\n                                    <div class="comment-percent-value">\n                                        <i style="width: <%= data.statData.compGrade2Percent %>%"></i>\n                                    </div>\n                                </td>\n                                <td class="col-3"><strong><%= data.statData.compGrade2Percent %>%</strong></td>\n                            </tr>\n                            <tr>\n                                <td class="col-1">不满意(<%= data.statData.compGrade1Amount %>)</td>\n                                <td class="col-2">\n                                    <div class="comment-percent-value">\n                                        <i style="width: <%= data.statData.compGrade1Percent %>%"></i>\n                                    </div>\n                                </td>\n                                <td class="col-3"><strong><%= data.statData.compGrade1Percent %>%</strong></td>\n                            </tr>\n                        </table>\n                    </div>\n\n                    <div class="comment-fraction">\n                        <% for (var gradeIndex = 0; gradeIndex < data.grade.length; gradeIndex++) { %>\n                            <% if (gradeNames.indexOf(\'|\' + data.grade[gradeIndex].name + \'|\') !== -1) { %>\n                                <div class="comment-fraction-item">\n                                    <%= data.grade[gradeIndex].name %><span><strong><%= data.grade[gradeIndex].grade %></strong>/5</span>\n                                </div>\n                            <% } %>\n                        <% } %>\n                    </div>\n\n\n                    <div class="comment-post">\n                        <div class="comment-post-desc">\n                            出游归来发点评返现金<br>本产品已累计发放<strong><%= data.statData.moneyAmount %></strong>元\n                        </div>\n                        <div class="comment-post-button">\n                            <a href="https://i.tuniu.com/list" target="_blank" mm="点击_详情区_游客点评_发表点评">发表点评</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="comment-tab">\n                <ul class="comment-tab-list">\n                    <li class="comment-tab-item active" mm="点击_详情区_游客点评_切换点评类型">\n                        <span>全部点评(<%= data.statData.remarkAmount %>)</span>\n                    </li>\n                    <li class="comment-tab-item" data-id="3" mm="点击_详情区_游客点评_切换点评类型">\n                        <span>满意(<%= data.statData.compGrade3Amount %>)</span>\n                    </li>\n                    <li class="comment-tab-item" data-id="2" mm="点击_详情区_游客点评_切换点评类型">\n                        <span>一般(<%= data.statData.compGrade2Amount %>)</span>\n                    </li>\n                    <li class="comment-tab-item last" data-id="1" mm="点击_详情区_游客点评_切换点评类型">\n                        <span>不满意(<%= data.statData.compGrade1Amount %>)</span>\n                    </li>\n                </ul>\n                <div class="J_CommentPhoto comment-tab-photo" mm="点击_详情区_游客点评_选择有图点评">\n                    <i class="icon"></i>有图\n                </div>\n            </div>\n\n            <div class="comment-tag">\n                <span class="comment-tag-item active">全部</span>\n                <% for (var tagIndex = 0; tagIndex < data.travelType.length; tagIndex++) { %>\n                    <span class="comment-tag-item" data-id="<%= data.travelType[tagIndex].travelTypeId %>" mm="点击_详情区_游客点评_切换出游类型"><%= data.travelType[tagIndex].travelTypeName %></span>\n                <% } %>\n            </div>\n\n            <div class="comment-list-outer">\n                <div class="comment-list">\n                </div>\n                <div class="comment-list-loading">\n                    <i class="comment-list-loading-bg"></i>\n                    <i class="comment-list-loading-img"></i>\n                </div>\n            </div>\n\n            <div class="pagination"></div>\n\n        <% } else { %>\n\n            <div class="comment-head">\n                <div class="comment-satisfaction">\n                    <div>满意度</div>\n                    <div><strong>100%</strong></div>\n                    <i class="icon"></i>\n                </div>\n\n                <div class="comment-head-right empty">\n\n                    <div class="comment-empty-content">\n                        本产品暂无点评，赶紧购买出游归来发表点评<br>\n                        点评有惊喜，海量抵用券返现等你来拿\n                    </div>\n\n                    <div class="comment-post">\n                        <div class="comment-post-desc">\n                            出游回来可点评产品\n                        </div>\n                        <div class="comment-post-button">\n                            <a href="https://i.tuniu.com/list" target="_blank" mm="点击_详情区_游客点评_发表点评">发表点评</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="comment-empty-list">\n                本产品暂无点评信息，游客出游归来可发表点评，您的出游评价是我们提升服务的依据。\n            </div>\n\n        <% } %>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.commentContentTemplate='\n<% var platformMap = {4: \'app\', 1: \'pc\', 2: \'pc\'} %>\n<% for(var i = 0; i < data.contents.length; i++) { %>\n    <% var comment = data.contents[i] %>\n    <div class="comment-item">\n        <% if (comment.essence) { %>\n            <i class="icon comment-item-jinghua"></i>\n        <% } %>\n\n        <div class="comment-item-user">\n            <div class="comment-item-user-photo">\n                <img src="<%= comment.user.avatar || \'http://img3.tuniucdn.com/img/20140811/usercenter_lxl/default.gif\' %>" alt="<%= comment.user.nickname %>">\n            </div>\n            <i class="icon comment-item-user-level comment-item-user-level-<%= comment.user.level %>"></i>\n            <div class="comment-item-user-name"><%= comment.user.nickname %></div>\n            <div class="comment-item-user-product-type"><%= comment.travelType.name %></div>\n        </div>\n\n        <% if (comment.moneyAmount || comment.travelCouponAmount || comment.couponAmount || comment.scoreAmount) { %>\n            <div class="comment-item-gift">\n                <div class="comment-item-gift-title"><i class="icon"></i>点评赠送</div>\n                <div class="comment-item-gift-list">\n                    <% if (comment.moneyAmount) { %>\n                        <div class="comment-item-gift-item">返&ensp;&ensp;现<strong>&yen;<%= comment.moneyAmount %></strong></div>\n                    <% } %>\n                    <% if (comment.travelCouponAmount) { %>\n                        <div class="comment-item-gift-item">旅游券<strong>&yen;<%= comment.travelCouponAmount %></strong></div>\n                    <% } %>\n                    <% if (comment.couponAmount) { %>\n                        <div class="comment-item-gift-item">抵用券<strong>&yen;<%= comment.couponAmount %></strong></div>\n                    <% } %>\n                    <% if (comment.scoreAmount) { %>\n                        <div class="comment-item-gift-item">积&ensp;&ensp;分<strong>&yen;<%= comment.scoreAmount %></strong></div>\n                    <% } %>\n                </div>\n            </div>\n        <% } %>\n\n        <div class="comment-item-toolbar">\n            <% var isStatis = false; %>\n            <% for (var subIndex = 0; subIndex < comment.subGradeContents.length; subIndex++) { %>\n                <% if(comment.subGradeContents[subIndex].dataIvalue == 3) { isStatis = true; break; } %>\n            <% } %>\n            <% for (var subIndex = 0; subIndex < comment.subGradeContents.length; subIndex++) { %>\n                <% var sub = comment.subGradeContents[subIndex] %>\n                <div class="comment-item-toolbar-item">\n                    <% if(isStatis && subIndex === 0) { %><i class="icon"></i><% } %><%= sub.notes %>：<%= sub.showGradeValue %>\n                </div>\n            <% } %>\n\n        </div>\n\n        <div class="comment-item-content">\n            <%= comment.compTextContent.dataSvalue %>\n        </div>\n\n        <% for (var subIndex = 0; subIndex < comment.subTextContents.length; subIndex++) { %>\n            <% var sub = comment.subTextContents[subIndex] %>\n            <% if (sub.dataSvalue) { %>\n                <div class="comment-item-detail">\n                    <div class="comment-item-detail-title"><%= sub.notes %>：</div>\n                    <div class="comment-item-detail-content"><%= sub.dataSvalue %></div>\n                </div>\n            <% } %>\n        <% } %>\n\n        <% var photoLength %>\n        <% if(comment.photoContents && (photoLength = comment.photoContents.length)) { %>\n            <div class="J_CommentPhoto comment-item-picture">\n                <div class="comment-item-picture-button comment-item-picture-prev" data-role="prev"><i class="icon"></i></div>\n                <div class="comment-item-picture-button comment-item-picture-next" data-role="next"><i class="icon"></i></div>\n                <div class="comment-item-picture-box">\n                    <ul data-role="list">\n                    <% for(var photoIndex = 0; photoIndex < photoLength; photoIndex++) { %>\n                        <li data-role="item" mm="点击_详情区_游客点评_查看点评图片"><img layer-src="<%= comment.photoContents[photoIndex].big %>" src="<%= comment.photoContents[photoIndex].dataSvalue %>" alt="<%= comment.photoContents[photoIndex].notes %>"></li>\n                    <% } %>\n                    </ul>\n                </div>\n            </div>\n        <% } %>\n\n        <div class="comment-item-foot">\n            <a class="comment-item-date" href="/recall/<%= comment.id %>" target="_blank"><%= comment.remarkTime %></a>\n            <% if (comment.remarkChannel == 4) { %>\n                <a class="comment-item-platform" href="http://www.tuniu.com/static/mobile/" target="_blank">来自<i class="icon comment-item-platform-<%= platformMap[comment.remarkChannel] %>"></i><%= comment.remarkChannelName %></a>\n            <% } else { %>\n                <span class="comment-item-platform">来自<i class="icon comment-item-platform-<%= platformMap[comment.remarkChannel] %>"></i><%= comment.remarkChannelName %></span>\n            <% } %>\n        </div>\n\n        <% for (var extIndex = 0; extIndex < comment.exts.length; extIndex++) { %>\n            <% var ext = comment.exts[extIndex] %>\n            <% if (ext.type == \'extend\') { %>\n                <div class="comment-item-extend">\n                    <div class="comment-item-extend-time">\n                    <%= ext.deltaTime.day ? ext.deltaTime.day + \'天后\' : \'当日\' %>追评：</div>\n                    <div class="comment-item-detail"><%= comment.extendContent %></div>\n                    <% if(comment.extendPhotoContents && (photoLength = comment.extendPhotoContents.length)) { %>\n                        <div class="J_CommentPhoto comment-item-picture comment-item-extend-picture">\n                            <div class="comment-item-picture-button comment-item-picture-prev" data-role="prev"><i class="icon"></i></div>\n                            <div class="comment-item-picture-button comment-item-picture-next" data-role="next"><i class="icon"></i></div>\n                            <div class="comment-item-picture-box">\n                                <ul data-role="list">\n                                <% for(var photoIndex = 0; photoIndex < photoLength; photoIndex++) { %>\n                                    <li data-role="item" mm="点击_详情区_游客点评_查看点评图片"><img layer-src="<%= comment.extendPhotoContents[photoIndex].big %>" src="<%= comment.extendPhotoContents[photoIndex].dataSvalue %>" alt="<%= comment.extendPhotoContents[photoIndex].notes %>"></li>\n                                <% } %>\n                                </ul>\n                            </div>\n                        </div>\n                    <% } %>\n\n                </div>\n\n            <% } else { %>\n                <div class="comment-item-service">\n                    <i class="comment-item-service-arrow"></i>\n                    <div class="comment-item-service-logo"></div>\n                    <div class="comment-item-service-box">\n                        <div class="comment-item-service-title">客服回复：</div>\n                        <div class="comment-item-service-content"><%=# ext.dataSvalue %></div>\n                    </div>\n                </div>\n            <% } %>\n        <% } %>\n\n\n\n    </div>\n<%} %>\n'},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){x.forEach(function(t){h.off(t)}),r()}function r(){s(function(t){c(t),u(t)})}function o(){x.forEach(function(t){return t.remove()}),_.trigger("resize")}function s(t){$.ajax({dataType:"json",url:b.qaUrl(),data:S,success:function(e){e&&e.success&&e.data?t(e.data):o()},error:function(t,e){o()}})}function c(t){C=f.template.compile(y.advisoryLayoutTemplate),x.forEach(function(e){e.append(C({data:t})).removeClass("section-loading")}),l()}function l(){I=T.find(".J_qaContent"),k=T.find(".pagination");var t=T.find(".advisory-category-list"),e=T.find(".advisory-search-input"),n=T.find(".advisory-search-btn");t.on("click","li",function(){var t=$(this);t.hasClass("active")||(t.addClass("active").siblings().removeClass("active"),S.page=1,S.type=t.data("type"),S.search="",e.val(""),s(u))}),n.click(function(){S.page=1,S.search=e.val(),s(u)})}function u(t){I.html(D({data:t})),t&&t.askCount>0?(k.show(),j?(j.reload({current:S.page,total:Math.ceil(t.askCount/S.limit)}),j.render()):j=(0,v.createPagination)(k,{current:S.page,total:Math.ceil(t.askCount/S.limit),onchange:function(t){S.page=t,s(u),(0,m.record)("点击_详情区_在线问答_翻页查看提问")}})):k.hide()}Object.defineProperty(e,"__esModule",{value:!0}),e.advisoryModule=void 0;var d=n(298),f=n(310),p=(n(311),n(351)),h=i(p),v=n(389),m=n(320),y=n(393),g=n(394),b=void 0,_=$(window),x=void 0,w=void 0,j=void 0,k=void 0,I=void 0,T=$("#J_detailAdvisory"),C=f.template.compile(y.advisoryLayoutTemplate),D=f.template.compile(g.advisoryContentTemplate),S={productId:null,page:1,limit:5,type:null,search:""},M={init:function(t){b=t,w=(0,d.getStore)(),S.productId=w.getState("productId"),x=T.toArray().map(function(t){return $(t)}),x.forEach(function(t){h.on(t,a)})}};e.advisoryModule=M},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.advisoryLayoutTemplate='\n<div class="section-box advisory">\n    <div class="section-box-head">\n        <h2>在线问答</h2>\n    </div>\n    <div class="section-box-body">\n        <div class="advisory-head">\n            <div class="advisory-category">\n                <span>问题分类：</span>\n                <ul class="advisory-category-list">\n                    <li class="advisory-category-item active"><a href="javascript:;">全部</a></li>\n                    <% if(data && data.questionNameArray) {\n                        for (var i = 0; i < data.questionNameArray.length; i++) { %>\n                            <li class="advisory-category-item" data-type="<%= data.questionNameArray[i].id %>"><a href="javascript:;"><%= data.questionNameArray[i].question_name %></a></li>\n                    <% } } %>\n                </ul>\n            </div>\n\n            <div class="advisory-search">\n                <input class="advisory-search-input" type="text" name="advisory-search-input" placeholder="请输入问题">\n                <a class="advisory-search-btn" href="javascript:;">搜索</a>\n                <a class="advisory-search-detail" href="http://www.tuniu.com/u/ask" rel="nofollow" target="_blank">查看我的提问 <i>&gt;</i></a>\n            </div>\n        </div>\n\n        <div class="advisory-content J_qaContent">\n        </div>\n\n        <div class="pagination">\n        </div>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.advisoryContentTemplate='\n<% if (data.routeAsk && data.routeAsk.length) { %>\n<ul>\n    <% for (var j = 0; j < data.routeAsk.length; j++) {\n        var qaItem = data.routeAsk[j]; %>\n    <li>\n        <div class="advisory-content-item">\n            <span class="advisory-content-title"><i class="advisory-content-icon-ask"></i>咨询问题：</span>\n            <p>\n                <%= qaItem.content %>\n            </p>\n            <span class="advisory-content-time"><%= qaItem.adddate %></span>\n        </div>\n        <div class="advisory-content-item">\n            <span class="advisory-content-title"><i class="advisory-content-icon-answer"></i>途牛客服：</span>\n            <p>\n                <%= qaItem.answer %>\n            </p>\n            <span class="advisory-content-time"><%= qaItem.last_reply_time %></span>\n        </div>\n    </li>\n    <% } %>\n</ul>\n<% } else { %>\n<div class="J_noQuestion">暂无该产品问答！对本产品有任何疑问，请在此进行提问。我们的工作人员将尽快回复您。</div>\n<% } %>\n';},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(){g.off(j),g.off(I),r()}function r(){$.ajax({dataType:"json",url:x.relatedUrl(),data:{productId:C.getState("productId"),productType:C.getState("productType"),bookCode:C.getState("bookCityCode"),poiId:O},success:function(t){t&&t.success?(P=t.data.recommend||[],P.forEach(function(t,e){t.showIndex=e+1}),d(t.data)):u()},error:function(t,e){u()}})}function o(){P.length<=8?l(T,P):(l(T,c(A,8)),A=(A+8)%P.length)}function s(){P.length<=4?l(k,P):(l(k,c(N,4)),N=(N+4)%P.length)}function c(t,e){for(var n=P.length,i=[],a=t;a<t+e;a++)i.push(P[a%n]);return i}function l(t,e){t.html(L({data:e}))}function u(){j.remove(),I.remove(),w.trigger("resize")}function d(t){var e=h.template.compile(b.detailRelativeTemplate);j.append(e({status:C.getState("status"),data:t,destination:E,poiId:O,year:(new Date).getFullYear(),host:x.mainHost})).removeClass("section-loading"),T=I.find(".J_productList"),k=j.find(".J_productList"),t.recommend&&t.recommend.length?(o(),s(),I.removeClass("section-loading")):I.remove(),w.trigger("resize"),f()}function f(){(0,v.createTaber)($("#J_localTab"),{ctx:$(".J_localContent"),onactive:function(t){var e=$(".J_proTypeName"),n=$(".J_proTypeLink");e.text(t.$tab.text()),n.attr("href",n.attr("href").replace(/\/\w+-0-0\/$/,"/"+t.$tab.data("type")+"-0-0/"))}}),j.find(".J_relativeGallery").each(function(){(0,m.createGallery)($(this))}),P.length>4&&j.find(".J_productMore").show().click(s),P.length>8&&I.find(".J_productMore").show().click(o)}Object.defineProperty(e,"__esModule",{value:!0}),e.relativeModule=void 0;var p=n(298),h=n(310),v=n(355),m=n(380),y=n(351),g=i(y),b=n(396),_=n(397),x=void 0,w=$(window),j=void 0,k=void 0,I=void 0,T=void 0,C=void 0,D=void 0,S=void 0,M=void 0,O=void 0,E=void 0,P=void 0,A=0,N=0,L=h.template.compile(_.detailProductTemplate),J={init:function(t){if(x=t,C=(0,p.getStore)(),j=$("#J_detailRelative"),I=$("#J_detailRecommend"),S=C.getState("isSupportMultipleJourney"),D=C.getState("journey"),M=C.getState("multiTab"),1==S){var e=D[M[0].journeyId];O=e.poiId,E=e.destination}else O=D.poiId,E=D.destination;g.on(j,a),g.on(I,a)}};e.relativeModule=J},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailRelativeTemplate='\n<div class="section-box relative">\n    <div class="section-box-head">\n        <h2>相关产品</h2>\n    </div>\n    <div class="section-box-body">\n        <% if (status == 0 && data.recommend && data.recommend.length) { %>\n            <div class="section-box-title">\n                <h3>为您推荐其他相似线路</h3>\n                <a class="J_productMore relative-pro-refresh" href="javascript:;" mm="点击_相关产品_相似产品_换一换">换一换 <i></i></a>\n            </div>\n            <div class="J_productList section-box-content relative-pro-list"></div>\n        <% } %>\n        <% if (data.favorite && data.favorite.length) { %>\n            <div class="section-box-title">\n                <h3>猜你喜欢</h3>\n            </div>\n            <div class="section-box-content">\n                <div class="J_relativeGallery detail-relative-wrap">\n                    <div class="detail-relative-btn detail-relative-prev" data-role="prev" mm="点击_详情区_相关产品_切换猜你喜欢产品"><i class="icon"></i></div>\n                    <div class="detail-relative-btn detail-relative-next" data-role="next" mm="点击_详情区_相关产品_切换猜你喜欢产品"><i class="icon"></i></div>\n                    <div class="detail-relative-box">\n                        <ul class="relative-pro-list gallery-list" data-role="list">\n                            <% for (var j = 0, jLen = data.favorite.length; j < jLen; j++) {\n                                var favoriteItem = data.favorite[j]; %>\n                            <li data-role="item">\n                                <a href="/tour/<%= favoriteItem.productId %>" target="_blank" mm="点击_详情区_相关产品_查看猜你喜欢产品">\n                                    <div class="relative-pro-pic">\n                                        <img src="<%= favoriteItem.picUrl %>" alt="<%= favoriteItem.productName %>" />\n                                        <div class="relative-pro-des">\n                                            <p>\n                                                <%= favoriteItem.productName %>\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class="relative-pro-info">\n                                        <div class="relative-pro-price">\n                                            <span>￥<b><%= favoriteItem.price %></b></span>起\n                                        </div>\n                                        <div class="relative-pro-satis">\n                                            满意度：<%= favoriteItem.satisfaction %>%\n                                        </div>\n                                    </div>\n                                </a>\n                            </li>\n                            <% } %>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        <% } %>\n        <% if ((data.localPlay && data.localPlay.length) || (data.ticket && data.ticket.length)) { %>\n            <div class="section-box-title">\n                <h3><%= destination %>&nbsp;<b class="J_proTypeName">当地玩乐</b></h3>\n                <div class="relative-play" id="J_localTab">\n                    <% if (data.localPlay && data.localPlay.length) { %>\n                    <span class="active" data-rel=".J_localPlay" data-type="local" mm="点击_详情区_相关产品_选择当地玩乐">当地玩乐</span>\n                    <% } %>\n                    <% if (data.ticket && data.ticket.length) { %>\n                    <span data-rel=".J_ticket" data-type="ticket" mm="点击_详情区_相关产品_选择门票">门票</span>\n                    <% } %>\n                </div>\n                <a class="relative-pro-more J_proTypeLink" href="<%= host %>/g<%= poiId %>/local-0-0/" target="_blank" mm="点击_详情区_相关产品_查看更多当地玩乐">查看更多 <i>&gt;</i></a>\n            </div>\n            <div class="section-box-content J_localContent">\n                <% if (data.localPlay && data.localPlay.length) { %>\n                <ul class="relative-pro-list J_localPlay">\n                    <% for (var k = 0, kLen = data.localPlay.length; k < kLen; k++) {\n                        var localItem = data.localPlay[k]; %>\n                    <li>\n                        <a href="<%= host %>/tours/<%= localItem.productId %>" target="_blank" mm="点击_详情区_相关产品_当地玩乐_查看当地玩乐">\n                            <div class="relative-pro-pic">\n                                <img src="<%= localItem.picUrl %>" alt="<%= localItem.productName %>" />\n                                <% if(localItem.productName) { %>\n                                <div class="relative-pro-des">\n                                    <p>\n                                        <%= localItem.productName %>\n                                    </p>\n                                </div>\n                                <% } %>\n                            </div>\n                            <div class="relative-pro-info">\n                                <div class="relative-pro-price">\n                                    <span>￥<b><%= +localItem.price %></b></span>起\n                                </div>\n                                <div class="relative-pro-satis">\n                                    满意度：<%= (+localItem.satisfaction) * 100 %>%\n                                </div>\n                            </div>\n                        </a>\n                    </li>\n                    <% } %>\n                </ul>\n                <% } %>\n                <% if (data.ticket && data.ticket.length) { %>\n                <ul class="relative-pro-list J_ticket">\n                    <% for (var l = 0, lLen = data.ticket.length; l < lLen; l++) {\n                        var ticketItem = data.ticket[l]; %>\n                    <li>\n                        <a href="http://menpiao.tuniu.com/t_<%= ticketItem.productId %>" target="_blank" mm="点击_详情区_相关产品_当地玩乐_查看门票产品">\n                            <div class="relative-pro-pic">\n                                <img src="<%= ticketItem.picUrl %>" alt="<%= ticketItem.productName %>" />\n                                <% if(ticketItem.productName) { %>\n                                <div class="relative-pro-des">\n                                    <p>\n                                        <%= ticketItem.productName %>\n                                    </p>\n                                </div>\n                                <% } %>\n                            </div>\n                            <div class="relative-pro-info">\n                                <div class="relative-pro-price">\n                                    <span>￥<b><%= +ticketItem.price %></b></span>起\n                                </div>\n                                <div class="relative-pro-satis">\n                                    满意度：<%= (+ticketItem.satisfaction) * 100 %>%\n                                </div>\n                            </div>\n                        </a>\n                    </li>\n                    <% } %>\n                </ul>\n                <% } %>\n            </div>\n        <% } %>\n        <% if (data.strategy) { %>\n            <div class="section-box-title">\n                <h3><%= destination %>&nbsp;攻略&amp;游记</h3>\n            </div>\n            <div class="section-box-content">\n                <div class="relative-strategy">\n                    <div class="relative-strategy-pic" >\n                        <a href="<%= host %><%= data.strategy.url %>" target="_blank" mm="点击_详情区_相关产品_攻略&游记_查看攻略">\n                            <img src="<%= data.strategy.img %>" alt="旅游攻略" />\n                            <div class="relative-strategy-pic-name"><p><%= destination %></p><span></span></div>\n                        </a>\n                    </div>\n                    <div class="relative-strategy-info">\n                        <span class="relative-strategy-info-title"><%= year %>旅游攻略</span>\n                        <span class="relative-strategy-info-des" title="<%= destination %>"><%= destination %></span>\n                        <a class="relative-strategy-info-download" href="<%= host %><%= data.strategy.url %>" target="_blank" mm="点击_详情区_相关产品_攻略&游记_查看攻略">查看详情</a>\n                    </div>\n                </div>\n                <% if (data.strategy.travelNote && data.strategy.travelNote.length) { %>\n                <ul class="relative-travels-list">\n                    <% for (var m = 0, mLen = data.strategy.travelNote.length; m < mLen; m++) {\n                        var noteItem = data.strategy.travelNote[m]; %>\n                    <li>\n                        <a href="<%= host %>/trips/<%= noteItem.tripsId %>" target="_blank" mm="点击_详情区_相关产品_攻略&游记_查看游记">\n                            <div class="relative-travels-pic">\n                                <img src="<%= noteItem.tripsImageUrl %>" alt="<%= noteItem.tripsTitle %>" />\n                                <div class="relative-travels-des">\n                                    <p>\n                                        <%= noteItem.tripsTitle %>\n                                    </p>\n                                </div>\n                            </div>\n                        </a>\n                    </li>\n                    <% } %>\n                </ul>\n                <% } %>\n            </div>\n        <% } %>\n        <% if (data.history && data.history.length) { %>\n            <div class="section-box-title">\n                <h3>我的浏览记录</h3>\n            </div>\n            <div class="section-box-content">\n                <div class="J_relativeGallery detail-relative-wrap">\n                    <div class="detail-relative-btn detail-relative-prev" data-role="prev" mm="点击_详情区_相关产品_浏览记录_切换已浏览产品"><i class="icon"></i></div>\n                    <div class="detail-relative-btn detail-relative-next" data-role="next" mm="点击_详情区_相关产品_浏览记录_切换已浏览产品"><i class="icon"></i></div>\n                    <div class="detail-relative-box">\n                        <ul class="relative-pro-list gallery-list" data-role="list">\n                        <% for (var n = 0, nLen = data.history.length; n < nLen; n++) {\n                            var historyItem = data.history[n]; %>\n                            <li data-role="item">\n                                <a href="/tour/<%= historyItem.productId %>" target="_blank" mm="点击_详情区_相关产品_浏览记录_查看已浏览产品">\n                                    <div class="relative-pro-pic">\n                                        <img src="<%= historyItem.picUrl %>" alt="<%= historyItem.productName %>" />\n                                        <div class="relative-pro-des">\n                                            <p>\n                                                <%= historyItem.productName %>\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class="relative-pro-info">\n                                        <div class="relative-pro-price">\n                                            <span>￥<b><%= historyItem.price %></b></span>起\n                                        </div>\n                                        <div class="relative-pro-satis">\n                                            满意度：<%= historyItem.satisfaction %>%\n                                        </div>\n                                    </div>\n                                </a>\n                            </li>\n                            <% } %>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        <% } %>\n    </div>\n</div>\n'},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.detailProductTemplate='\n<ul class="product-list">\n    <% for (var index = 0; index < data.length; index++) { %>\n        <% var product = data[index] %>\n        <li class="product-item">\n            <a class="product-link" href="/tour/<%= product.productId %>" target="_blank" m="点击_相关产品_相似产品_<%= product.showIndex %>_<%= product.productId %>">\n                <div class="product-picture">\n                    <img src="<%= product.picUrl %>" alt="<%= product.productName %>" />\n                    <div class="product-name">\n                        <p><%= product.productName %></p>\n                    </div>\n                </div>\n                <div class="product-info">\n                    <div class="product-price">\n                        <span>￥<b><%= product.price %></b></span> 起\n                    </div>\n                    <div class="product-satisfication">\n                        满意度：<%= product.satisfaction || 100 %>%\n                    </div>\n                </div>\n            </a>\n        </li>\n    <% }%>\n</ul>\n'}]);